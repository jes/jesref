<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title>PlasmaC User Guide</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(5);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>PlasmaC User Guide</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="cha:plasmac-user-guide">1. License</h2>
<div class="sectionbody">
<div class="paragraph"><p>PlasmaC and all of its related software are released under GPLv2.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">2. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>PlasmaC is a plasma cutting configuration that is loaded on top of LinuxCNC v2.8 or later. It includes a HAL component plus GUI configurations for both <a href="../gui/axis.html#cha:axis-gui">Axis</a> and <a href="../gui/gmoccapy.html#cha:gmoccapy">Gmoccapy</a>. There is also an option to have the Axis GUI display in portrait mode, see <a href="plasmac-user-guide.html#axis-ini">Axis &lt;machine_name&gt;.ini file</a>.</p></div>
<div class="paragraph"><p>The desired LinuxCNC GUI (Axis or Gmoccapy) with PlasmaC component loaded should be chosen prior to starting the LinuxCNC installation process as switching between Axis and Gmoccapy requires a fresh configuration to be created.</p></div>
<div class="paragraph"><p>Screenshot examples of PlasmaC loaded on top of both the Axis and Gmoccapy GUIs are below:</p></div>
<div class="paragraph"><p><strong>AXIS:</strong></p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_axis.png" alt="width=100%" />
</div>
</div>
<div class="paragraph"><p><strong>GMOCCAPY:</strong></p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_gmoccapy.png" alt="width=100%" />
</div>
</div>
<div class="paragraph"><p>The PlasmaC component should run on any hardware that is supported by LinuxCNC provided there are enough hardware I/O pins to fulfill the requirements of a plasma configuration.</p></div>
<div class="paragraph"><p>If the user is new to CNC plasma cutting, it is recommended that they read the <a href="plasma-cnc-primer.html">Plasma CNC Primer</a> document which is a generic introduction to CNC plasma cutting.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Except where noted, this guide assumes the user is using the latest version of PlasmaC. PlasmaC update notices are posted at: <a href="https://forum.linuxcnc.org/plasmac/37233-plasmac-updates">https://forum.linuxcnc.org/plasmac/37233-plasmac-updates</a> Refer to <a href="plasmac-user-guide.html#plasmac-version">PlasmaC Version</a> to see the current PlasmaC version in the Config Panel. If the Version Number is not present, the user&#8217;s version of PlasmaC is before v0.121. See <a href="plasmac-user-guide.html#update-plasmac">Update PlasmaC</a> for information on updating PlasmaC.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plasmac-mode">3. Installing LinuxCNC</h2>
<div class="sectionbody">
<div class="paragraph"><p>The preferred method for installing LinuxCNC (which contains PlasmaC by default) is via an ISO image as described below.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">It is possible to install and run LinuxCNC on a variety of Linux distributions however that is beyond the scope of this User Guide. If the user wishes to install a Linux distribution other than those recommended, they will first need to install the preferred Linux distribution and then install LinuxCNC v2.8 or later along with any required dependencies.</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_if_the_user_does_not_have_linux_installed">3.1. If The User Does Not Have Linux Installed</h3>
<div class="paragraph"><p>Installation instructions are available at: <a href="http://linuxcnc.org/docs/devel/html/getting-started/getting-linuxcnc.html">http://linuxcnc.org/docs/devel/html/getting-started/getting-linuxcnc.html</a></p></div>
<div class="paragraph"><p>Following these instructions will yield a machine with the current stable branch (v2.8) of LinuxCNC.</p></div>
</div>
<div class="sect2">
<h3 id="_if_the_user_has_linux_with_linuxcnc_v2_7">3.2. If The User Has Linux with LinuxCNC v2.7</h3>
<div class="paragraph"><p>Upgrading instruction are available at: <a href="http://linuxcnc.org/docs/devel/html/getting-started/updating-linuxcnc.html">http://linuxcnc.org/docs/devel/html/getting-started/updating-linuxcnc.html</a></p></div>
<div class="paragraph"><p>Following these instructions will yield a machine with the current stable branch (v2.8) of LinuxCNC.</p></div>
</div>
<div class="sect2">
<h3 id="_creating_a_working_base_machine_configuration">3.3. Creating A Working Base Machine Configuration</h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">"Base machine configuration" means a complete working system without any of the plasma connections shown in the <a href="plasmac-user-guide.html#io_requirements">I/O Requirements</a> section. All axes should be working and tuned for best performance and all home and limit switches for X, Y, and Z axes (if installed) should be operating correctly.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">DO <strong>NOT</strong> ADD ANY OF THE PLASMA CONNECTIONS SHOWN IN THE <a href="plasmac-user-guide.html#io_requirements">I/O REQUIREMENTS</a> SECTION AT THIS TIME, THESE I/O&#8217;S WILL BE ADDED LATER DURING THE PlasmaC CONFIGURATION USING THE <a href="plasmac-user-guide.html#configurator">CONFIGURATOR</a>.</td>
</tr></table>
</div>
<div class="paragraph"><p>Some recommended settings:</p></div>
<div class="ulist" id="z_settings"><ul>
<li>
<p>
<strong>Z MINIMUM_LIMIT</strong> should be just below top of the slats with allowances for float_switch_travel and over travel tolerance. For example, if the user&#8217;s float switch takes 4mm (0.157") to activate then set the Z minimum to 5mm (0.197") plus an allowance for overrun (as calculated using the equation below) below the lowest slat.
</p>
</li>
<li>
<p>
<strong>Z MAXIMUM_LIMIT</strong> should be the highest the user wants the Z axis to travel (it must not be lower than Z HOME_OFFSET).
</p>
</li>
<li>
<p>
<strong>Z HOME</strong> should be set to be approximately 5mm (0.196") below the maximum limit.
</p>
</li>
<li>
<p>
<strong>Floating Head</strong> - it is recommended that a floating head be used and that it has enough movement to allow for overrun during probing. Overrun can be calculated using the following formula:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>o = 0.5 × a × (v ÷ a)^2</code></pre>
</div></div>
<div class="paragraph"><p>where: o = overrun, a = acceleration in units/sec2 and v = velocity in units/sec.</p></div>
<div class="paragraph"><p>Metric example:  given a Z axis MAX_ACCELERATION of 600mm/s<sup>2</sup> and MAX_VELOCITY of 60mm/s, the overrun would be 3mm.</p></div>
<div class="paragraph"><p>Imperial example: given a Z axis MAX_ACCELERATION of 24in/s<sup>2</sup> and MAX_VELOCITY of 2.4in/s, the overrun would be 0.12in.</p></div>
<div class="paragraph"><p>On machines that will utilize an ohmic probe as the primary method of probing, it is highly recommended to install a switch on the floating head as a backup means of stopping Z motion in the event of ohmic probe failure due to dirty surfaces.</p></div>
<div class="paragraph"><p>The user may opt to create a base machine manually or one of the existing configuration helpers may be used:</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">It is highly recommended to keep the base machine config simple until it has been fully tested and tuned.<br />
If using Stepconf or Pncconf then deselect the VCP Panel, spindle, manual tool change, and classic ladder options.<br />
Any of the aforementioned options can be added manually at a later time should the need arise.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">DO NOT ADD ANY OF THE <a href="plasmac-user-guide.html#io_requirements">PLASMA SPECIFIC I/O REQUIREMENTS</a> TO THE PNCCONF OR STEPCONF WIZARDS.</td>
</tr></table>
</div>
<div class="paragraph"><p>If using a Mesa Electronics board, use the <a href="../config/pncconf.html#cha:pncconf-wizard">pncconf wizard</a> (enter the following command into a terminal window):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>pncconf</code></pre>
</div></div>
<div class="paragraph"><p>If using a parallel port, use the <a href="../config/stepconf.html#cha:stepconf-wizard">stepconf wizard</a> (enter the following command into a terminal window):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>stepconf</code></pre>
</div></div>
<div class="paragraph"><p>If using a Pico Systems board:<br />
<a href="https://forum.linuxcnc.org/27-driver-boards/14977-pico-systems-faq">This LinuxCNC forum thread</a> may be helpful.</p></div>
<div class="paragraph"><p>If the user already has a dual motor gantry configuration that requires the configuration to be hand edited:<br />
<a href="https://forum.linuxcnc.org/49-basic-configuration/33079-how-to-2-or-more-motors-on-one-axis-gantry-linuxcnc-2-8-master?start=0">This LinuxCNC forum thread</a> may be helpful.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">BEFORE PROCEEDING, THE USER SHOULD BE ABLE TO HOME THE MACHINE, ZERO EACH AXIS, JOG ALL AXES TO SOFT LIMITS WITHOUT CRASHING, AND RUN TEST G-CODE PROGRAMS WITHOUT ANY ERRORS.</td>
</tr></table>
</div>
<div class="paragraph"><p>ONLY WHEN this criteria is met should the user proceed with configuring PlasmaC "on top" of a working machine by running the configurator.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">DO <strong>NOT</strong> CONTINUE UNTIL THE BASE MACHINE IS CONFIGURED AND WORKING.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="io_requirements">4. Plasma Specific I/O Considerations</h2>
<div class="sectionbody">
<div class="paragraph"><p>Prior to starting a plasma configuration, it is important that the user has a firm understanding of the operating modes available, as well as the I/O&#8217;s that are required for successful plasma operation.</p></div>
<div class="sect2">
<h3 id="_modes">4.1. Modes</h3>
<div class="paragraph"><p>PlasmaC requires the selection of one of following three operating modes:</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Mode</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">0</p></td>
<td align="left" valign="top"><p class="table">Uses an external arc voltage input to calculate both Arc Voltage (for Torch Height Control) and Arc OK.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">1</p></td>
<td align="left" valign="top"><p class="table">Uses an external arc voltage input to calculate Arc Voltage (for Torch Height Control).<br />
   Uses an external Arc OK input for Arc OK.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">2</p></td>
<td align="left" valign="top"><p class="table">Uses an external Arc OK input for Arc OK.<br />
   Use external up/down signals for Torch Height Control.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">If the plasma power source has an Arc OK (Transfer) output then it is recommended to use that for Arc OK rather than the soft (calculated) Arc OK provided by mode 0.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_available_i_os">4.2. Available I/Os</h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This section only touches on the hardware I/O&#8217;s required for the PlasmaC component. Base machine requirements such as limit switches, home switches, etc. are in addition to these and should already be configured and working prior to the user running the configurator.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="10%" />
<col width="70%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Modes</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Arc Voltage</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">Analog input; <strong>optional.</strong><br />
                 Connected to the velocity output of an encoder equipped breakout board.
                                 This signal is used to read the arc voltage to determine the necessary corrections to maintain the torch distance from the work piece during cutting.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Arc OK</p></td>
<td align="left" valign="top"><p class="table">1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital input; <strong>optional.</strong><br />
                 Connected from the Arc OK output of the plasma power source to an input on the breakout board.
                                 This signal is used to determine if the cutting arc has been established and it is ok for the machine to move (sometimes called arc transfer).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Float Switch</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital input; <strong>optional, see info below table:</strong><br />
                    Connected from a breakout board input to a switch on the floating head.
                                        This signal is used to mechanically probe the work piece with the torch and set Z zero at the top of the work piece.<br />
                    If used and no ohmic probe is configured, this is the primary probing method.<br />
                    If used and an ohmic probe is configured, this is the fallback probing method.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Probe</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital input; <strong>optional, see info below table:</strong><br />
                   Connected from to the ohmic probe&#8217;s output to a breakout board input.
                                   This signal is used to probe electronically by completing a circuit using the work piece and the torch consumables and set Z zero at the top of the work piece.<br />
                   If used, this is the primary probing method.
                                   If an ohmic probe fails to locate the work piece, and there is no float switch is present, probing will continue until the torch breaks away or the minimum Z limit is reached.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Probe Enable</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital output; <strong>optional, see info below table:</strong><br />
                   Connected from a breakout board output to an input to control the ohmic probe&#8217;s power.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Breakaway Switch</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital input; <strong>optional, see info below table:</strong><br />
                        Connected from a breakout board input to a torch breakaway detection switch.<br />
                  This signal senses if the torch has broken away from its cradle.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Torch On</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital output; <strong>required.</strong><br />
                Connected from a breakout board output to the torch-on input of the plasma power supply.
                                This signal is used to control the plasma power supply and start the arc.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Move Up</p></td>
<td align="left" valign="top"><p class="table">2</p></td>
<td align="left" valign="top"><p class="table">Digital input; <strong>optional.</strong><br />
           Connected from the up output of the external THC control to a break out board input.
                   This signal is used to control the Z axis in an upward motion and make necessary corrections to maintain the torch distance from the work piece during cutting.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Move Down</p></td>
<td align="left" valign="top"><p class="table">2</p></td>
<td align="left" valign="top"><p class="table">Digital input; <strong>optional.</strong><br />
             Connected from the down output of the external THC control to a break out board input.
                         This signal is used to control the Z axis in a downward motion and make necessary corrections to maintain the torch distance from the work piece during cutting.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Scribe Arming</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital output; <strong>optional.</strong><br />
                     Connected from a breakout board output to the scribe arming circuit.
                                         This signal is used to place the scribe into position on the work piece .</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Scribe On</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Digital output; <strong>optional.</strong><br />
                     Connected from a breakout board output to the scribe-on circuit.
                                         This signal is used to turn the scribing device on.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Only one of either <strong>Float Switch</strong> or <strong>Ohmic Probe</strong> is required. If both are used then <strong>Float Switch</strong> will be a fallback if <strong>Ohmic Probe</strong> is not sensed.</p></div>
<div class="paragraph"><p>If <strong>Ohmic Probe</strong> is used then <strong>Ohmic Probe Enable</strong> is required to be checked on the PlasmaC GUI.</p></div>
<div class="paragraph"><p><strong>Breakaway Switch</strong> is not mandatory because <strong>Float Switch</strong> is treated the same as a breakaway when not probing. If they are two separate switches, and there are not enough inputs on the breakout board, they could be combined and connected as a <strong>Float Switch</strong>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The minimum I/O requirement for a PlasmaC configuration to function are:  <strong>Arc Voltage</strong> input OR <strong>Arc OK</strong> input, <strong>Float Switch</strong> input, and <strong>Torch On</strong> output. To reiterate, in this case PlasmaC will treat the float switch as a breakaway switch when it is not probing.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">THE ABOVE PINS WILL BE ENTERED LATER DURING THE PLASMAC CONFIGURATOR PROCESS. MAKE NOTE OF THE CORRESPONDING INPUTS AND OUTPUTS ON THE BREAKOUT BOARD DURING WIRING. THESE PINS SHOULD <strong>NOT</strong> BE USED TO CREATE THE BASE MACHINE .HAL FILE.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_plasmac_to_a_base_machine_via_the_configurator">5. Installing PlasmaC To A Base Machine Via The Configurator</h2>
<div class="sectionbody">
<div class="paragraph"><p>By this point, the user NEEDS to have a fully tested and working base machine configuration without any connections to the plasma specific I/Os before proceeding. It is much more difficult to edit a base machine configuration after adding PlasmaC as pncconf and stepconf can no longer be used to help edit the configuration.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">DO <strong>NOT</strong> PROCEED UNTIL THE BASE MACHINE IS COMPLETE.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the user is using a <strong>Mesa Electronics THCAD</strong> card for arc voltage measurement, see <a href="plasmac-user-guide.html#mesa-thcad">Mesa THCAD</a> before proceeding.</td>
</tr></table>
</div>
<div class="paragraph" id="configurator"><p>Installing a PlasmaC configuration to a base machine is done from the Configurator.</p></div>
<div class="paragraph"><p>Enter the following command into a terminal window:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>python /usr/share/doc/linuxcnc/examples/sample-configs/by_machine/plasmac/configurator.py</code></pre>
</div></div>
<div class="sect2">
<h3 id="_configure">5.1. Configure</h3>
<div class="paragraph"><p>The selection window is now visible:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_configurator_home_new.png" alt="width=30%" />
</div>
</div>
<div class="paragraph"><p>Select <strong>New</strong> from the selection window, this will show an info dialog, select <strong>Continue</strong> and the New Configuration window will display.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">There will be different fields visible depending on the mode selected.</td>
</tr></table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_configurator_new.png" alt="width=50%" />
</div>
</div>
<div class="paragraph" id="configurator-table"><p>HAL connection examples in the following table show examples for both a parallel port config and a Mesa 7i96 config. Change the pin names as required to suit the breakout board configuration.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="50%" />
<col width="30%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Field</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Examples</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Machine Name</p></td>
<td align="left" valign="top"><p class="table">The new name for the machine. This will create a ~/linuxcnc/&lt;machine_name&gt; directory and a &lt;machine_name&gt;.ini file.<br />
                         "&lt;machine_name&gt;" describes the name entered into this field</p></td>
<td align="left" valign="top"><p class="table">plasma_table.ini.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">INI File</p></td>
<td align="left" valign="top"><p class="table">This is the .ini file that was created as a result of making a working and tested base machine configuration.</p></td>
<td align="left" valign="top"><p class="table">base.ini</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">HAL File</p></td>
<td align="left" valign="top"><p class="table">This is the .hal file that was created as a result of making a working and tested base machine configuration.</p></td>
<td align="left" valign="top"><p class="table">base.hal</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Mode</p></td>
<td align="left" valign="top"><p class="table">Select the required mode based on the following criteria:<br />
      0 - If using an external arc voltage input to calculate both Arc Voltage (for Torch Height Control) and Arc OK.<br />
      1 - If using both an external arc voltage input to calculate Arc Voltage (for Torch Height Control) and an external Arc OK input for Arc OK.<br />
      2 - If using both an external Arc OK input for Arc OK and an external up/down signals for Torch Height Control.</p></td>
<td align="left" valign="top"><p class="table">1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Arc Voltage</p></td>
<td align="left" valign="top"><p class="table">Required for Modes 0 and 1 only.<br />
             Refers to the input HAL pin the arc voltage signal to is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  encoder.0.velocity<br />
                                                                       <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.encoder.00.velocity</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Torch On</p></td>
<td align="left" valign="top"><p class="table">Required for All modes.<br />
                         Refers to the output HAL pin the torch on signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.0.pin-16-out<br />
                                                          <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.ssr.00.out-00</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Arc OK</p></td>
<td align="left" valign="top"><p class="table">Required for Modes 1 and 2 only.<br />
        Refers to the input HAL pin the Arc OK signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.0.pin-10-in-not<br />
                                                             <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.gpio.008.in</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Probe</p></td>
<td align="left" valign="top"><p class="table">Required if using an ohmic probe.<br />
             Refers to the input HAL pin the ohmic probe signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.0.pin-11-in<br />
                                                                <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.gpio.007.in</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Probe Enable</p></td>
<td align="left" valign="top"><p class="table">Required if using an ohmic probe.<br />
                    Refers to the output HAL pin the ohmic probe enable signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.1.pin-01-out<br />
                                                                              <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.ssr.00.out-01</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Float Switch</p></td>
<td align="left" valign="top"><p class="table">Required if using a float switch.<br />
              Refers to the input HAL pin the float switch signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.0.pin-12-in<br />
                                                                  <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.gpio.006.in</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Breakaway Switch</p></td>
<td align="left" valign="top"><p class="table">Required if using a breakaway switch.<br />
                  Refers to the input HAL pin the breakaway switch signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.0.pin-13-in<br />
                                                                          <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.gpio.005.in</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Move Up</p></td>
<td align="left" valign="top"><p class="table">Required for Mode 2 only.<br />
         Refers to the input HAL pin the move up signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.1.pin-10-in<br />
                                                               <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.gpio.004.in</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Move Down</p></td>
<td align="left" valign="top"><p class="table">Required for Mode 2 only.<br />
           Refers to the input HAL pin the move down signal is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.1.pin-11-in<br />
                                                                   <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.gpio.003.in</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Run Panel</p></td>
<td align="left" valign="top"><p class="table">Run Tab - Selecting this option places the PlasmaC run frame in a tab behind the preview tab.<br />
           Run Panel - Selecting this option places the PlasmaC run frame in a panel at the side of the GUI.<br />
           See <a href="plasmac-user-guide.html#run-panel">Run Panel</a> for an example of each.</p></td>
<td align="left" valign="top"><p class="table">Run Tab</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Scribe Arming</p></td>
<td align="left" valign="top"><p class="table">Required if using a scribe.<br />
               Refers to the the output HAL pin the scribe arming mechanism is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.1.pin-16-out<br />
                                             <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.ssr.00.out-02</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Scribe On</p></td>
<td align="left" valign="top"><p class="table">Required if using a scribe.<br />
              Refers to the output HAL pin the scribe power source is connected to.</p></td>
<td align="left" valign="top"><p class="table"><strong>Parallel Port Example:</strong>  parport.1.pin-16-out<br />
                                                <strong>Mesa 7i96 Example:</strong>  hm2_7i96.0.ssr.00.out-03</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PowerMax Comms</p></td>
<td align="left" valign="top"><p class="table">Required if using PowerMax serial communications.<br />
                Refers to the serial port to be used for communications.</p></td>
<td align="left" valign="top"><p class="table">/dev/ttyUSB0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If unsure of the HAL pin&#8217;s full name, the user may start LinuxCNC for the base machine and run <strong>HalShow</strong> for a full listing of all HAL pins.</td>
</tr></table>
</div>
<div class="paragraph"><p>Fill in the required entries to suit the machine wiring/breakout board configuration, click <strong>Create</strong> and a working PlasmaC configuration will be created in the following directory: ~/linuxcnc/configs/&lt;machine_name&gt;</p></div>
<div class="paragraph"><p>The newly created PlasmaC configuration can be run by entering the following command into a terminal window (<strong>change "&lt;machine_name&gt;" to the machine name entered into the PlasmaC configurator</strong>):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>linuxcnc ~/linuxcnc/configs/&lt;machine_name&gt;/&lt;machine_name&gt;.ini</code></pre>
</div></div>
<div class="paragraph"><p>After creating a new configuration some initial setup is required before using the PlasmaC component.</p></div>
</div>
<div class="sect2">
<h3 id="initial-setup">5.2. Initial Setup</h3>
<div class="paragraph"><p>The following heights diagram will help the user visualize the different heights involved in plasma cutting and how they are measured:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="images/plasmac_heights_diagram.png" alt="images/plasmac_heights_diagram.png" width="800" />
</div>
</div>
<div class="paragraph"><p>After running the command at the end of section 5.1, LinuxCNC should be running with the PlasmaC panels visible.</p></div>
<div class="paragraph"><p>Click on the Config tab to open the <a href="plasmac-user-guide.html#config-panel">Config Panel</a> and ensure every one of these settings is tailored to the machine.</p></div>
<div class="paragraph"><p>To set the Z axis DRO relative to the Z axis MINIMUM_LIMIT, the user should perform the following steps. It is important to understand that in PlasmaC, touching off the Z axis DRO has no effect on the Z axis position while running a G-Code program. These steps simply allow the user to more easily set the probe height as after performing the steps, the displayed Z axis DRO value will be relative to Z axis MINIMUM_LIMIT.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
The user should be familiar with the recommended <a href="#z_settings">Z Axis Settings</a>
</p>
</li>
<li>
<p>
Home the Z axis.
</p>
</li>
<li>
<p>
Ensure there is nothing below the torch then jog the Z axis down until it stops at the Z axis MINIMUM_LIMIT then click <strong>Touch Off</strong> with the Z axis selected to set the Z axis at zero offset.
</p>
</li>
<li>
<p>
Home the Z axis again.
</p>
</li>
</ol></div>
<div class="paragraph"><p>If the machine is equipped with a float switch then the user will need to set the offset in the Config Panel. This will be done by running a "Probe Test" cycle.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Check that the Probe Speed and the Probe Height in the Config Panel are correct. PlasmaC can probe at the full Z axis velocity so long as the machine has enough movement in the float switch to absorb any overrun. If the machine is suitable, the user could set the Probe Height to a value near the Z axis minimum and do all probing at full speed.
</p>
</li>
<li>
<p>
If the machine is not already homed and in the home position, Home the machine.
</p>
</li>
<li>
<p>
Place some material on the slats under the torch.
</p>
</li>
<li>
<p>
Press the Probe Test button.
</p>
</li>
<li>
<p>
The Z axis will probe down, find the material then move up to the specified Pierce Height as set by the currently selected material. The torch will wait in this position for the time set in the &lt;machine_name&gt;.ini file. The default probe test hold time is 30 seconds, this value may be edited in the &lt;machine_name&gt;.ini file. After this the torch will return to the starting height.
</p>
</li>
<li>
<p>
Measure the distance between the material and the tip of the torch while the torch is waiting at Pierce Height.
</p>
</li>
<li>
<p>
If the measurement is greater than the Pierce Height of the currently selected material, then reduce the "Float Travel" on the Config Panel by the difference between the measured value and the specified value. If the measurement is less than Pierce Height of the currently selected material, then increase the "Float Travel" on the Config Panel by the difference between the specified value and the measured value.
</p>
</li>
<li>
<p>
After the adjustments to the "Float Travel" have been made, repeat the process from #4 above until the measured distance between the material and the torch tip matches the Pierce Height of the currently selected material.
</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the amount of time between the torch contacting the material and when the torch moves up and comes to rest at the Pierce Height seems excessive, see <a href="plasmac-user-guide.html#probing">the probing section</a> for a possible solution.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">IF USING A <strong>Mesa Electronics THCAD</strong> THEN UP UNTIL NOW THE <strong>Voltage Scale</strong> VALUE WAS OBTAINED MATHEMATICALLY. IF THE USER INTENDS TO USE CUT VOLTAGES FROM A MANUFACTURE&#8217;S CUT CHART THEN IT WOULD BE ADVISABLE TO DO MEASUREMENTS OF ACTUAL VOLTAGES AND FINE TUNE THE <strong>Voltage Scale</strong> AND <strong>Voltage Offset</strong>.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">PLASMA CUTTING VOLTAGES CAN BE LETHAL, IF THE USER IS NOT EXPERIENCED IN DOING THESE MEASUREMENTS GET SOME QUALIFIED HELP.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="modify-config">5.3. Reconfigure An Existing PlasmaC Configuration</h3>
<div class="paragraph"><p>The Configurator may also be used to reconfigure an existing PlasmaC configuration to change settings instead of modifying files manually.</p></div>
<div class="paragraph"><p>The Configurator is only able to modify:</p></div>
<div class="ulist"><ul>
<li>
<p>
The HAL pins connecting PlasmaC to the machine.
</p>
</li>
<li>
<p>
The mode used by PlasmaC.
</p>
</li>
<li>
<p>
The position of the Run Panel in the GUI.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Reconfiguring a PlasmaC configuration is done from the Configurator which is located in the configuration directory.</p></div>
<div class="paragraph"><p>It is recommended that a <a href="plasmac-user-guide.html#plasmac-backup">backup</a> copy of the existing PlasmaC configuration is made before proceeding.</p></div>
<div class="paragraph"><p>To start the configurator enter the following command into a terminal window:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>python linuxcnc/&lt;the_users_configuration_directory&gt;/configurator.py</code></pre>
</div></div>
<div class="paragraph"><p>The selection window is now visible:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_configurator_home_used.png" alt="width=30%" />
</div>
</div>
<div class="paragraph"><p>Select <strong>Reconfigure</strong> from the selection window, this shows an info dialog, select <strong>Continue</strong> and the Reconfigure window will display:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_configurator_reconfigure.png" alt="width=40%" />
</div>
</div>
<div class="paragraph"><p>Select the &lt;machine_name&gt;.ini file of the PlasmaC configuration to reconfigure.</p></div>
<div class="paragraph"><p>If the user changes modes, the entry boxes will change depending on the currently selected mode.</p></div>
<div class="paragraph"><p>When all entries are correct, click <strong>Reconfigure</strong> and the user&#8217;s PlasmaC configuration will be reconfigured.</p></div>
<div class="paragraph"><p>Entry descriptions can be found <a href="plasmac-user-guide.html#configurator-table">here</a></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Machine Name and &lt;machine_name&gt;.hal File can not be modified.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_plasmac_setup_considerations">6. Other PlasmaC Setup Considerations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="lowpass">6.1. Lowpass Filter</h3>
<div class="paragraph"><p>The PlasmaC component has an built in lowpass filter that if used is applied to the <strong>plasmac.arc-voltage-in</strong> input pin to filter any noise that could cause erroneous voltage readings. The lowpass filter should only be used after using Halscope to determine the required frequency and whether the amplitude of the noise is large enough to cause any issues. For most plasma machines lowpass is not required and should not be used unless it is required.</p></div>
<div class="paragraph"><p>The HAL pin assigned to this filter is <strong>plasmac.lowpass-frequency</strong> and is set to 0 (disabled) by default. To apply a lowpass filter to the arc-voltage, the user would edit the following entry in the &lt;machine_name&gt;_connections.hal file in the machine&#8217;s configuration directory to add the appropriate cutoff frequency as measured in Hertz (Hz).</p></div>
<div class="paragraph"><p>For example:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>setp plasmac.lowpass-frequency 100</code></pre>
</div></div>
<div class="paragraph"><p>The above example would give a cutoff frequency of 100Hz.</p></div>
</div>
<div class="sect2">
<h3 id="_contact_debounce">6.2. Contact Debounce</h3>
<div class="paragraph"><p>Contact bounce from mechanical relays, switches, or external interference may cause some inconsistent behavior of the following switches:</p></div>
<div class="ulist"><ul>
<li>
<p>
Float Switch
</p>
</li>
<li>
<p>
Ohmic Probe
</p>
</li>
<li>
<p>
Breakaway Switch
</p>
</li>
<li>
<p>
Arc OK (for modes 1 &amp; 2)
</p>
</li>
</ul></div>
<div class="paragraph"><p>Due to the fact that the software is capable of sampling rates faster than the contact bounce period, it is possible that the software may see contact bounce as several changes in input states occurring in a very small time period, and incorrectly interpreting a very quick on-off of the input. One method of mitigating contact bounce is to "debounce" the input. To summarize debounce, as soon as the software sees an input with a debounce delay change states, it waits for a prescribed delay period before checking the state of the input again. After the debounce period the software will regard state changes as normal behavior of the input and react accordingly.</p></div>
<div class="paragraph"><p>Debounce periods can be changed by editing the appropriate debounce value in the &lt;machine_name&gt;_connections.hal file in the &lt;machine_name&gt; config folder.</p></div>
<div class="paragraph"><p>Each increment of delay adds one servo thread cycle to the debounce time. For example: given a servo thread period of 1000000 (measured in nano seconds), a debounce delay of 5 would equate to 5000000ns, or 5ms.</p></div>
<div class="paragraph"><p>For the Float and Ohmic switches this equates to a 0.001mm (0.00004") increase in the probed height result.</p></div>
<div class="paragraph"><p>It is recommended to keep the debounce values as low as possible while still achieving consistent results. Using <a href="http://linuxcnc.org/docs/2.8/html/hal/tutorial.html#_halscope">Halscope</a> to plot the inputs is a good way to establish the correct value.</p></div>
<div class="paragraph"><p>There are two versions of contact debouncing available in PlasmaC. The method used is determined by when the configuration was first created. There is no automatic update method available to convert from the original debounce setup to the alternate debounce setup as it is difficult to apply the necessary changes without understanding any manual edits that may have been made to the machine&#8217;s configuration files and potentially "breaking" a working configuration. If the user wishes to change from the original setup to the new setup, they must do so manually.</p></div>
<div class="sect3">
<h4 id="_debounce_for_plasmac_installations_using_v0_173_and_later">6.2.1. Debounce (For PlasmaC installations using v0.173 and later)</h4>
<div class="paragraph"><p>For PlasmaC installations using v0.173 (released 11 Sep 2020) and later, debounce is achieved by using the HAL <a href="http://linuxcnc.org/docs/2.8/html/man/man9/dbounce.9.html">dbounce component</a> which is a later alternative to the original debounce component. This new version allows for the loading and naming of individual debounce instances and is compatible with Twopass HAL file processing.</p></div>
<div class="paragraph"><p>All four signals above have an individual debounce component so the debounce periods can be catered individually to each input. Any changes made to these values in the &lt;machine_name&gt;_connections.hal file will not be overwritten by later updates of PlasmaC.</p></div>
<div class="paragraph"><p>The default delay for all four inputs is five servo thread periods. In most cases this value will work quite well. If any of the inputs do not use mechanical switches, it may be possible to either reduce or remove the delay for those inputs.</p></div>
<div class="paragraph"><p>If debounce is required for other equipment like home or limit switches etc then more dbounce components may added in any of the HAL files without any regard to the signals listed here.</p></div>
</div>
<div class="sect3">
<h4 id="_debounce_for_plasmac_installations_using_v0_172_and_earlier">6.2.2. Debounce (For PlasmaC installations using v0.172 and earlier)</h4>
<div class="paragraph"><p>For PlasmaC installations using v0.172 (released 10 Sep 2020) and earlier, debounce is achieved by using the HAL <a href="http://linuxcnc.org/docs/2.8/html/man/man9/debounce.9.html">debounce component</a>. If the user installed PlasmaC using a version before v0.173 (released 11 Sep 2020), and they wish to use the new debounce method, they will need to follow the directions in the <a href="plasmac-user-guide.html#changing-debounce-type">Changing Debounce Type</a> section.</p></div>
<div class="paragraph"><p>In a standard configuration created before this date, only the Float Switch, Ohmic Probe, and Breakaway Switch inputs are debounced and the single delay value applies to all three switches simultaneously. These inputs could separated and controlled individually by using an exclusive debounce group for each signal.</p></div>
<div class="paragraph"><p>If debounce is required for other equipment like home or limit switches then either more filters could be added to the existing group or another group could be added by editing the existing <em>loadrt debounce</em> line in the &lt;machine_name&gt;_connections.hal file.</p></div>
<div class="paragraph"><div class="title">To add an extra filter to the existing group:</div><p>Change the default line below:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>loadrt debounce cfg=3</code></pre>
</div></div>
<div class="paragraph"><p>to:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>loadrt debounce cfg=4</code></pre>
</div></div>
<div class="paragraph"><p>This would add a new filter named debounce.0.3 that could be used to debounce another switch input signal.</p></div>
<div class="paragraph"><div class="title">To add an extra group with one filter:</div><p>Change the default line below (and add the two additional lines):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>loadrt debounce cfg=3</code></pre>
</div></div>
<div class="paragraph"><p>to:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>loadrt debounce cfg=3,1
setp   debounce.1.delay n
addf   debounce.1 servo-thread</code></pre>
</div></div>
<div class="paragraph"><p>This would add a new group named debounce.1 with a new filter named debounce.1.0 having a delay of n servo cycles that could be used to debounce another switch input signal. The user will have to change "n" to the appropriate amount of delay for the new input.</p></div>
</div>
<div class="sect3">
<h4 id="changing-debounce-type">6.2.3. Changing Debounce Type</h4>
<div class="paragraph"><p>It is possible to manually change from the old debounce setup to the later debounce setup by editing the &lt;machine_name&gt;_connections.hal file. If this is done, the naming convention as used in <a href="https://github.com/LinuxCNC/linuxcnc/blob/2.8/configs/by_machine/plasmac/plasmac_connections.hal">this example connections.hal</a> file must be followed.</p></div>
<div class="paragraph"><p>It is also necessary to edit the &lt;machine_name&gt;.ini file to add the following change:</p></div>
<div class="listingblock">
<div class="content">
<pre><code># required for upgrades (DO NOT CHANGE)
LAST_MAJOR_UPGRADE      = 0.144</code></pre>
</div></div>
<div class="paragraph"><p>to:</p></div>
<div class="listingblock">
<div class="content">
<pre><code># required for upgrades (DO NOT CHANGE)
LAST_MAJOR_UPGRADE      = 0.144
DBOUNCE                 = 1</code></pre>
</div></div>
<div class="paragraph"><p>Failure to follow this procedure will lead to errors when loading LinuxCNC.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_desktop_launcher">6.3. Desktop Launcher</h3>
<div class="paragraph"><p>If a link to the launch the configuration was not created when creating the config, the user could create a desktop launcher to the config by right clicking on the desktop and selecting Create Launcher or similar. This will bring up a dialog to create a launcher. Give the icon a nice short name, enter anything for the command and click OK.</p></div>
<div class="paragraph"><p>After the launcher appears on the desktop, right click on it and then edit it with the user&#8217;s editor of choice. Edit the file so it looks similar to:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[Desktop Entry]
Comment=
Terminal=false
Name=LinuxCNC
Exec=sh -c "linuxcnc $HOME/linuxcnc/configs/&lt;machine_name&gt;/&lt;machine_name&gt;.ini"
Type=Application
Icon=/usr/share/pixmaps/linuxcncicon.png</code></pre>
</div></div>
<div class="paragraph"><p>If the user would like a terminal window to open behind the GUI window then change the Terminal line to:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Terminal=true</code></pre>
</div></div>
<div class="paragraph"><p>Displaying a terminal can be handy for error and information messages.</p></div>
</div>
<div class="sect2">
<h3 id="_plasmac_files">6.4. PlasmaC Files</h3>
<div class="paragraph"><p>After a successful PlasmaC installation, the following files are created in the configuration directory:</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Filename</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Function</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;machine_name&gt;.ini</p></td>
<td align="left" valign="top"><p class="table">A configuration file that includes the base system parameters, as well as various settings required by PlasmaC.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;machine_name&gt;.hal</p></td>
<td align="left" valign="top"><p class="table">A HAL connections file that includes the base system I/O HAL pin connections to LinuxCNC.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;machine_name&gt;_connections.hal</p></td>
<td align="left" valign="top"><p class="table">A HAL connections that includes  I/O HAL pin connections specific to PlasmaC.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;machine_name&gt;_material.cfg</p></td>
<td align="left" valign="top"><p class="table">This file is used to store the material settings from the Run Panel</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">postgui.tcl</p></td>
<td align="left" valign="top"><p class="table">A HAL file that is ran after the GUI has loaded for user customizing.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">tool.tbl</p></td>
<td align="left" valign="top"><p class="table">A tool table used to store offset information for additional tools (scribe, etc.) used by the PlasmaC configuration.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">&lt;machine_name&gt; is whatever name the user entered into the "Machine Name" field of the configurator
NOTE: Custom commands are allowed in &lt;machine_name&gt;_connections.hal and the postgui.hal files as they are not overwritten during updates.</td>
</tr></table>
</div>
<div class="paragraph"><p>In addition to the above files, the following links are created to files or directories in the source directory:</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Filename</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Function</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">test</p></td>
<td align="left" valign="top"><p class="table">A directory containing a test panel for simulation configurations.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">wizards</p></td>
<td align="left" valign="top"><p class="table">A directory containing the files relating to the shape library to support the Conversational feature within PlasmaC.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">configurator.py</p></td>
<td align="left" valign="top"><p class="table">A Python script used to configure a new PlasmaC configuration. It is also used to updates/re-configure an existing PlasmaC configuration.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">materialverter.py</p></td>
<td align="left" valign="top"><p class="table">A Python script used to convert tool libraries from various CAM software and populate the PlasmaC material file.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pmx_test.py</p></td>
<td align="left" valign="top"><p class="table">A Python script used to provide a panel to find the correct serial port and test communications between PlasmaC and a PowerMax power source.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">versions.html</p></td>
<td align="left" valign="top"><p class="table">A HTML file that will list the complete version and update history of PlasmaC.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Finally, the following directories are created:</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Folder</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Function</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">backup</p></td>
<td align="left" valign="top"><p class="table">A directory that contains backups of files that changed during updates to an existing installation and the original .hal and .ini files.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">plasmac</p></td>
<td align="left" valign="top"><p class="table">A directory that contains links to the PlasmaC source files.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>After running a new configuration for the first time the following files will be created in the configuration directory:</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Filename</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Function</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;machine_name&gt;_config.cfg</p></td>
<td align="left" valign="top"><p class="table">This file is used to store the configuration settings from the Config Panel</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;machine_name&gt;_run.cfg</p></td>
<td align="left" valign="top"><p class="table">This file is used to store the configuration settings from the Run Panel</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;machine_name&gt;_wizards.cfg</p></td>
<td align="left" valign="top"><p class="table">This file is used to store the configuration settings from the Conversational shape library</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">plasmac_stats.var</p></td>
<td align="left" valign="top"><p class="table">This file is used to store the saved cutting statistics</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The configuration files (&lt;machine_name&gt;.ini and &lt;machine_name&gt;.hal) that are created by PlasmaC are notated to explain the requirements to aid in manual manipulation of these configurations. They may be edited with any text editor.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The .cfg files are plain text and may be edited with any text editor.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_ini_file">6.5. INI File</h3>
<div class="paragraph"><p>PlasmaC requires some specific &lt;machine_name&gt;.ini file variables as follows:</p></div>
<div class="sect3">
<h4 id="_common">6.5.1. Common</h4>
<div class="paragraph" id="ini-mode"><p><strong>[PLASMAC]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>MODE                = 0 (use external arc voltage in for Arc Voltage)
                        (use external arc voltage in for Arc OK)
                    = 1 (use external arc voltage in for Arc Voltage)
                        (use external Arc OK in for Arc OK)
                    = 2 (Use external Arc OK in for Arc OK)
                        (use external up/down for THC)

CONFIG_DISABLE      = 0 (0=enable or 1=disable the PlasmaC Config Panel)
PAUSED-MOTION-SPEED = n (multiply cut-feed-rate by this value for paused motion speed)
TORCH-PULSE-TIME    = n (torch on time when manual pulse requested)
BUTTON_n_NAME       = &lt;NAME&gt; (the name of a custom user buttons)
BUTTON_n_CODE       = &lt;CODE&gt; (the code run by a custom user button)
BUTTON_n_IMAGE      = &lt;IMAGE&gt; (the image displayed by buttons 10~19)</code></pre>
</div></div>
<div class="paragraph"><p><strong>[FILTER]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>PROGRAM_EXTENSION       = .ngc (filter gcode files)
ngc                     = ./plasmac/plasmac_gcode.py
nc                      = ./plasmac/plasmac_gcode.py
tap                     = ./plasmac/plasmac_gcode.py</code></pre>
</div></div>
<div class="paragraph" id="rs274"><p><strong>[RS274NGC]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>RS274NGC_STARTUP_CODE = o&lt;metric_startup&gt; call (machine startup G-Code)
SUBROUTINE_PATH       = ./:./plasmac:../../nc_files/subroutines (./ must be in this path)
FEATURES              = 12 (for reading .ini and HAL variables)
USER_M_PATH           = ./:./plasmac (for M190 material change)</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">SEE <a href="plasmac-user-guide.html#path-tolerance">PATH TOLERANCE</a> FOR RS274NGC_STARTUP_CODE INFORMATION RELATED TO G64.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong>[HAL]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>TWOPASS = on (needed for multiple .hal files)
HALFILE = &lt;machine_name&gt;.hal (your base machine .hal file)
HALFILE = plasmac.tcl (the standard PlasmaC .hal file )
HALFILE = &lt;machine_name&gt;_connections.hal (PlasmaC connections to the machine)
HALFILE = HALUI   = halui (required)</code></pre>
</div></div>
<div class="paragraph"><p>The &lt;machine_name&gt;.hal file has <strong>num_spindles=[TRAJ]SPINDLES</strong> appended to the end of the <strong>loadrt motmod</strong> line to allow the addition of a <a href="plasmac-user-guide.html#scribe">scribe</a>, if required.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The user could place custom HAL commands in the &lt;machine_name&gt;_connections.hal file as this file is not overwritten by PlasmaC updates.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong>[TRAJ]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>SPINDLES = 3</code></pre>
</div></div>
<div class="paragraph"><p><strong>[AXIS_X]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>MAX_VELOCITY     = double the value in the corresponding joint
MAX_ACCELERATION = double the value in the corresponding joint
OFFSET_AV_RATIO  = 0.5</code></pre>
</div></div>
<div class="paragraph"><p><strong>[AXIS_Y]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>MAX_VELOCITY     = double the value in the corresponding joint
MAX_ACCELERATION = double the value in the corresponding joint
OFFSET_AV_RATIO  = 0.5</code></pre>
</div></div>
<div class="paragraph"><p><strong>[AXIS_Z]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>MIN_LIMIT        = the top of your slats or just below
MAX_VELOCITY     = double the value in the corresponding joint
MAX_ACCELERATION = double the value in the corresponding joint
OFFSET_AV_RATIO  = 0.5</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">PlasmaC uses the LinuxCNC External Offsets feature for all Z axis motion, and for moving the X and/or Y axis for a consumable change while paused. For more information on this feature, please read <a href="../motion/external-offsets.html#cha:external-offsets">External Axis Offsets</a> in the LinuxCNC documentation.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="axis-ini">6.5.2. Axis GUI Specific</h4>
<div class="paragraph"><p><strong>[PLASMAC]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>FONT        = sans 10 (valid font sizes are from 9 to 15 inclusive)
THEME       = Clearlooks (any installed theme, only for the plasmaC tabs)
WINDOW_SIZE = 0 (0 = minimum size to suit font, 1 = maximised, width x height = custom size)
AXIS_ORIENT = portrait</code></pre>
</div></div>
<div class="paragraph"><p>Defaults for the above parameters if they are not specified are:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>FONT        = sans 10
THEME       = current system theme
WINDOW_SIZE = minimum size to suit font
AXIS_ORIENT = landscape</code></pre>
</div></div>
<div class="paragraph"><p>Changing the FONT size changes the minimum window size. PlasmaC requires a larger window size than the standard Axis window. Window size varies depending on whether the user has chosen to view the Run Panel as a Tab or a Panel on the right side of the GUI. If using portrait mode then window height will vary depending on whether or not the user has a rotary axis. If the window doesn&#8217;t completely fit on the screen then the user will need to reduce the font size.</p></div>
<div class="paragraph"><p>Custom window size is specified as width x height e.g. 1600 x 900. Spaces are ignored but may be used for readability and <strong>x</strong> may be lower or upper case.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">WINDOW_SIZE has replaced MAXIMISED. For backwards compatibility these names are interchangeable.</td>
</tr></table>
</div>
<div class="paragraph" id="axis-display-section"><p><strong>[DISPLAY]</strong> Section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>TOOL_EDITOR       = tooledit x y
USER_COMMAND_FILE = plasmac_axis.py.py

EMBED_TAB_NAME    = Statistics
EMBED_TAB_COMMAND = gladevcp -c plasmac_stats -x &lt;XID&gt; -u ./plasmac/plasmac_stats.py -H ./plasmac/plasmac_stats.hal ./plasmac/plasmac_stats.glade

#use one of the next two

#run frame in tab behind preview
EMBED_TAB_NAME    = Plasma Run
EMBED_TAB_COMMAND = gladevcp -c plasmac_run -x &lt;XID&gt; -u ./plasmac/plasmac_run.py -H ./plasmac/plasmac_run.hal ./plasmac/plasmac_run_tab.glade

#run frame in panel on right side
#GLADEVCP = -c plasmac_run -u ./plasmac/plasmac_run.py -H ./plasmac/plasmac_run.hal ./plasmac/plasmac_run_panel.glade

EMBED_TAB_NAME    = Plasma Config
EMBED_TAB_COMMAND = gladevcp -c plasmac_config -x &lt;XID&gt; -u ./plasmac/plasmac_config.py -H ./plasmac/plasmac_config.hal ./plasmac/plasmac_config.glade

EMBED_TAB_NAME    = Extras
EMBED_TAB_COMMAND = gladevcp -c plasmac_wizards -x {XID} -u ./plasmac/plasmac_wizards.py ./plasmac/plasmac_wizards.glade</code></pre>
</div></div>
<div class="paragraph"><p>The Run Window can be displayed as either:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
A panel on the right side of the Axis GUI which is suitable for widescreen displays.
</p>
</li>
<li>
<p>
A tab behind the Preview tab which is suitable for 4:3 ratio displays.
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_gmoccapy_gui_specific">6.5.3. Gmoccapy GUI Specific</h4>
<div class="paragraph" id="gmoccapy-display-section"><p><strong>[DISPLAY]</strong> section</p></div>
<div class="listingblock">
<div class="content">
<pre><code>EMBED_TAB_NAME     = plasmac_buttons
EMBED_TAB_LOCATION = box_cooling
EMBED_TAB_COMMAND  = gladevcp -c plasmac_buttons -x &lt;XID&gt; -u ./plasmac/plasmac_buttons.py -H ./plasmac/plasmac_buttons.hal ./plasmac/plasmac_buttons.glade
EMBED_TAB_NAME     = plasmac_control
EMBED_TAB_LOCATION = box_spindle
EMBED_TAB_COMMAND  = gladevcp -c plasmac_control -x &lt;XID&gt; -u ./plasmac/plasmac_control.py -H ./plasmac/plasmac_control.hal ./plasmac/plasmac_control.glade
EMBED_TAB_NAME     = Statistics
EMBED_TAB_LOCATION = ntb_preview
EMBED_TAB_COMMAND  = gladevcp -c plasmac_stats -x &lt;XID&gt; -u ./plasmac/plasmac_stats.py -H ./plasmac/plasmac_stats.hal ./plasmac/plasmac_stats.glade
EMBED_TAB_NAME     = Plasma Run

#use one of the next two

#run panel in tab behind preview
EMBED_TAB_LOCATION  = ntb_preview
EMBED_TAB_COMMAND   = gladevcp -c plasmac_run -x &lt;XID&gt; -u ./plasmac/plasmac_run.py -H ./plasmac/plasmac_run.hal ./plasmac/plasmac_run_tab.glade

#run panel in panel on left side
#EMBED_TAB_LOCATION = box_left
#EMBED_TAB_COMMAND  = gladevcp -c plasmac_run -x &lt;XID&gt; -u ./plasmac/plasmac_run.py -H ./plasmac/plasmac_run.hal ./plasmac/plasmac_run_panel.glade

EMBED_TAB_NAME     = Plasma Config
EMBED_TAB_LOCATION = ntb_preview
EMBED_TAB_COMMAND  = gladevcp -c plasmac_config -x &lt;XID&gt; -u ./plasmac/plasmac_config.py -H ./plasmac/plasmac_config.hal ./plasmac/plasmac_config.glade
EMBED_TAB_NAME     = plasmac_monitor
EMBED_TAB_LOCATION = box_tool_and_code_info
EMBED_TAB_COMMAND  = gladevcp -c plasmac_monitor -x &lt;XID&gt; -u ./plasmac/plasmac_monitor.py -H ./plasmac/plasmac_monitor.hal ./plasmac/plasmac_monitor.glade

EMBED_TAB_NAME     = Extras
EMBED_TAB_LOCATION = ntb_preview
EMBED_TAB_COMMAND  = gladevcp -c plasmac_wizards -x {XID} -u ./plasmac/plasmac_wizards.py ./plasmac/plasmac_wizards.glade</code></pre>
</div></div>
<div class="paragraph"><p>The Run Window can be displayed as either:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
A panel on the left side of the Gmoccapy GUI which is suitable for widescreen displays.
</p>
</li>
<li>
<p>
A tab behind the Preview tab which is suitable for 4:3 ratio displays.
</p>
</li>
</ol></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_plasmac">7. Using PlasmaC</h2>
<div class="sectionbody">
<div class="paragraph"><p>Once PlasmaC is successfully installed, no Z axis motion is required to be part of the G-Code cut program. In fact, if any Z axis references are present in the cut program, the standard PlasmaC configuration will remove them during the program loading process.</p></div>
<div class="paragraph"><p>For reliable use of PlasmaC the user should <strong>NOT</strong> use any Z axis offsets other than the coordinate system offsets (G54-G59.3).</p></div>
<div class="paragraph"><p>Due to the way PlasmaC handles Z movements automatically, it is best to park the Z axis approximately 5mm (0.2") below the Z axis maximum limit (torch farthest away from the work piece) prior to performing any manual cuts or running any G-Code programs.</p></div>
<div class="sect2">
<h3 id="_plasmac_gui_panels">7.1. PlasmaC GUI Panels</h3>
<div class="paragraph"><p>PlasmaC makes several modifications to the GUI. Some additions are panels on permanent display and others are tabs behind the preview tab.</p></div>
<div class="paragraph"><p>Some functions/features are only used for particular modes and are not displayed if they are not required by the chosen PlasmaC mode.</p></div>
<div class="sect3">
<h4 id="config-panel">7.1.1. Config Panel</h4>
<div class="paragraph"><p>This panel is used to display configuration parameters that are modified infrequently.</p></div>
<div class="paragraph"><p>It is possible to disable this panel so machine settings cannot be modified by unauthorized personnel. This is achieved by setting the following variable in the &lt;machine_name&gt;.ini file:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[PLASMAC] CONFIG_DISABLE = 1</code></pre>
</div></div>
<div class="paragraph"><p>If it is necessary for authorized personnel to modify the configuration after disabling the Config Panel, A HAL pin named <strong>plasmac_config.config-disable</strong> can be set to 0 (zero) to enable the panel. This pin could be tied to a physical key-switch or similar on the cabinet so that only authorized personnel could enable the Config Panel to change settings.</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_config.png" alt="width=50%" />
</div>
</div>
<div class="paragraph"><p><strong><span class="underline">Probing</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Float Travel</p></td>
<td align="left" valign="top"><p class="table">This sets the amount of travel the float switch moves before completing the float switch circuit. This distance can be measured by using the Probe Test button, and the method described in <a href="plasmac-user-guide.html#initial-setup">Initial Setup</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Probe Speed</p></td>
<td align="left" valign="top"><p class="table">This sets the speed at which the torch will probe to find the material after it moves to the Probe Height.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Probe Height</p></td>
<td align="left" valign="top"><p class="table">This sets the height above the Z axis minimum limit that Probe Speed begins.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Probe Offset</p></td>
<td align="left" valign="top"><p class="table">This sets the distance above the material the torch will should go after a successful ohmic probe. It is mainly used to compensate for high probing speeds.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Retries</p></td>
<td align="left" valign="top"><p class="table">This sets the number of times PlasmaC will retry a failed ohmic probe before falling back to the float switch for material detection.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Skip IHS</p></td>
<td align="left" valign="top"><p class="table">This sets the distance threshold used to determine if an Initial Height Sense (probe) can be skipped for the current cut, see <a href="plasmac-user-guide.html#ihs-skip">IHS Skip</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the amount of time between the torch contacting the material and when the torch moves up and comes to rest at the Pierce Height seems excessive, see <a href="plasmac-user-guide.html#probing">the probing section</a> for a possible solution.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong><span class="underline">THC</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="10%" />
<col width="70%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Modes</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Delay</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">This sets the delay (in seconds) measured from the time the Arc OK signal is received until Torch Height Controller (THC) activates.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Threshold (V)</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">This sets the voltage variation allowed from the target voltage before for THC makes movements to correct the torch height.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PID P Gain (Speed)</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">This sets the Proportional gain for the THC PID loop. This roughly equates to how quickly the THC attempts to correct changes in height.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">VAD Threshold (%)</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">(Velocity Anti Dive) This sets the percentage of the current cut feed rate the machine can slow to before locking the THC to prevent torch dive.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Void Sense Override (%)</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">This sets the size of the change in cut voltage necessary to lock the THC to prevent torch dive (higher values need greater voltage change to lock THC).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PID I Gain</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">This sets the Integral gain for the THC PID loop. Integral gain is associated with the sum of errors in the system over time and is not always needed.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PID D Gain</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">This sets the Derivative gain for the THC PID loop. Derivative gain works to dampen the system and reduce over correction oscillations and is not always needed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">PID loop tuning is a complicated process and is outside the scope of this User Guide. There are many sources of information available to assist with understanding and tuning PID loops. If the THC is not making corrections fast enough, it is recommended to increase the P gain in small increments until the system operates favorably. Large P gain adjustments can result in over correction and oscillations.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong><span class="underline">Safety</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Safe Height</p></td>
<td align="left" valign="top"><p class="table">This sets the height above the material that the torch will retract to before executing rapid moves.<br />
                   If set to Zero then Z axis maximum height will be used for the safe height.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">Arc</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="10%" />
<col width="70%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Modes</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Fail Timeout</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">This sets the amount of time (in seconds) PlasmaC will wait between commanding a "Torch On" and receiving an Arc OK signal before timing out and displaying an error message.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Max. Starts</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">This sets the number of times PlasmaC will attempt to start the arc.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Retry Delay</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">This sets the time (in seconds) between an arc failure and another arc start attempt.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Voltage Scale</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">This sets the arc voltage input scale and is used to display the correct arc voltage.<br />
                                        For initial setup, see <a href="plasmac-user-guide.html#calibration-values">Calibration Values</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Voltage Offset</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">This sets the arc voltage offset and is used to display zero volts when there is zero arc voltage input.<br />
                    For initial setup, see <a href="plasmac-user-guide.html#calibration-values">Calibration Values</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Height Per Volt</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">This sets the distance the torch would need to move to change the arc voltage by one volt.<br />
                       Used for manual height manipulation only.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">OK High Volts</p></td>
<td align="left" valign="top"><p class="table">0</p></td>
<td align="left" valign="top"><p class="table">This sets the voltage threshold below which Arc OK signal is valid.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">OK Low Volts</p></td>
<td align="left" valign="top"><p class="table">0</p></td>
<td align="left" valign="top"><p class="table">This sets the voltage threshold above which the Arc OK signal is valid.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">When setting the OK Low Volts and OK High Volts in Mode 0, the cut voltage of a stable arc must be greater than the OK Low Volts value but lower than the OK High Volts value for PlasmaC to receive a valid Arc OK signal. To further clarify, to have a valid Arc OK, the arc voltage must fall between the two limits.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong><span class="underline">Motion</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Max. Speed</p></td>
<td align="left" valign="top"><p class="table">Displays the maximum velocity the Z axis is capable of (this is controlled by the &lt;machine_name&gt;.ini file).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Setup Speed</p></td>
<td align="left" valign="top"><p class="table">The Z axis velocity for setup moves (movements to Probe Height, Pierce Height, Cut Height, etc).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Setup Speed has no effect on THC speed which is capable of the velocity displayed in the Max. Speed field.</td>
</tr></table>
</div>
<div class="paragraph" id="scribe-config"><p><strong><span class="underline">Scribe</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Arm Delay</p></td>
<td align="left" valign="top"><p class="table">This sets the delay (in seconds) from the time the scribe command is received to the activation of the scribe. This allows the scribe to reach surface of the material before activating the scribe.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">On Delay</p></td>
<td align="left" valign="top"><p class="table">This sets the delay (in seconds) to allow the scribe mechanism to start before beginning motion.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">Spotting</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Threshold (V)</p></td>
<td align="left" valign="top"><p class="table">This sets the arc voltage at which the delay timer will begin.<br />
           0V starts the delay when the torch on signal is activated.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Time On (mS)</p></td>
<td align="left" valign="top"><p class="table">This sets the length of time (in milliseconds) the torch is on after threshold voltage is reached.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">Save &amp; Reload Buttons</span></strong></p></div>
<div class="paragraph"><p>The <strong>Save</strong> button will save the currently displayed parameters to the &lt;machine_name&gt;_config.cfg file.</p></div>
<div class="paragraph"><p>The <strong>Reload</strong> button will reload all the parameters from the &lt;machine_name&gt;_config.cfg file.</p></div>
<div class="paragraph" id="plasmac-version"><p>The <strong>Version</strong> label displays the current PlasmaC version.</p></div>
<div class="paragraph" id="plasmac-backup"><p>The <strong>Backup</strong> button will create a complete machine configuration backup for archiving or to aid in fault diagnosis. A compressed backup of the machine configuration will be saved in the user&#8217;s Linux home directory. The file name will be &lt;machine_name&gt;_&lt;version_info&gt;.tar.gz where &lt;machine_name&gt; is the machine name entered in the configurator, and &lt;version_info&gt; is the current PlasmaC version the user is on.</p></div>
</div>
<div class="sect3">
<h4 id="run-panel">7.1.2. Run Panel</h4>
<div class="paragraph"><p>This panel shows the parameters which are active for the current cut.</p></div>
<div class="paragraph"><p>There are two formats for this panel, a tab that sits behind the preview tab or a panel at the right side of the GUI. The formats are different but both provide the same functionality for controlling cut parameters.</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_run.png" alt="width=70%" />
</div>
</div>
<div class="paragraph"><p>See <a href="plasmac-user-guide.html#axis-display-section">Axis [DISPLAY] Section</a> or <a href="plasmac-user-guide.html#gmoccapy-display-section">Gmoccapy [DISPLAY] section</a> for information on how to change between the two formats in the &lt;machine_name&gt;.ini files. Alternatively, the user could run the configurator again to select a different option.</p></div>
<div class="paragraph"><p><strong><span class="underline">Cut Parameters</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Material</p></td>
<td align="left" valign="top"><p class="table">The top drop down menu is used to manually select the current material cut parameters. If there are no materials in the material file then only the default material will be displayed.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Kerf Width</p></td>
<td align="left" valign="top"><p class="table">This sets the kerf width for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">THC Enabled</p></td>
<td align="left" valign="top"><p class="table">This check box enables or disables the THC for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Pierce Height</p></td>
<td align="left" valign="top"><p class="table">This sets the pierce height for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Pierce Delay</p></td>
<td align="left" valign="top"><p class="table">This sets the pierce delay (in seconds) for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut Height</p></td>
<td align="left" valign="top"><p class="table">This sets the cut height for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut Feed Rate</p></td>
<td align="left" valign="top"><p class="table">This sets the cut feed rate for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut Amps</p></td>
<td align="left" valign="top"><p class="table">This sets the cut amperage for the currently selected material.<br />
          This is a visual indicator to the operator only, unless PowerMax communications are being used.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut Volts</p></td>
<td align="left" valign="top"><p class="table">This sets the cut voltage for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">P-Jump Height</p></td>
<td align="left" valign="top"><p class="table">This sets the Puddle Jump height for the currently selected material.<br />
          Typically used for thicker materials, Puddle Jump allows the torch to have an intermediate step between Pierce Height and Cut Height.<br />
          If set, the torch will proceed from Pierce Height to P-Jump Height for a period of time (P-Jump Delay) before proceeding to Cut Height to effectively "jump" over the molten puddle.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">P-Jump Delay</p></td>
<td align="left" valign="top"><p class="table">This sets the Puddle Jump delay (in seconds) for the currently selected material.<br />
         This value is mandatory if P-Jump Height is set as it sets the length of time the torch will stay at the P-Jump Height before proceeding to Cut Height.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Pause At End</p></td>
<td align="left" valign="top"><p class="table">This sets the amount of time (in seconds) the torch will stay on at the end of the cut before proceeding with the M5 command to turn off and raise the torch. For more information see <a href="plasmac-user-guide.html#pause-at-end">Pause At End Of Cut</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Gas Pressure</p></td>
<td align="left" valign="top"><p class="table">This sets the gas pressure for the currently selected material.<br />
              This setting is only valid if PowerMax communications are being used.<br />
              0 = Use the PowerMax&#8217;s automatic pressure mode.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut Mode</p></td>
<td align="left" valign="top"><p class="table">This sets the cut mode for the currently selected material.<br />
          This setting is only valid if PowerMax communications are being used.<br />
          1 = Normal<br />
          2 = CPA (Constant Pilot Arc)<br />
          3 = Gouge/Mark</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">THC</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="10%" />
<col width="70%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Modes</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">State</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table"><strong>Disabled</strong> = The THC is permanently off.<br />
             <strong>Auto</strong> = The THC status can be determined by the state of the "THC ENABLED" check box and/or controlled by the proper M codes in a running program.<br />
             <strong>Enabled</strong> = The THC will be on unless it is disabled by the proper M codes in a running program.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Use Auto Volts</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">Checked = The THC target voltage is ascertained by sampling the arc voltage after the THC Delay has expired.<br />
                    Unchecked = The THC target voltage is taken from the "Cut Volts" material parameter.<br /></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Velocity Anti Dive Enable (VAD)</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Checked = Velocity Anti-Dive is enabled.<br />
                  Unchecked = Velocity Anti-Dive is disabled.<br /></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Void Sense Enable</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">Checked = Void sensing is enabled.<br />
                      Unchecked = Void sensing is disabled.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">Ohmic Probe</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Probe Enable</p></td>
<td align="left" valign="top"><p class="table">This check box enables or disables the ohmic probe input.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the Ohmic Probe input is disabled, the Ohmic Probe LED will still show the status of the probe input, but the Ohmic Probe results will be ignored.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong><span class="underline">Single Cut</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">X Axis Length</p></td>
<td align="left" valign="top"><p class="table">This sets the X axis distance to travel for a single cut.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Y Axis Length</p></td>
<td align="left" valign="top"><p class="table">This sets the Y axis distance to travel for a single cut.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Start Cut Button</p></td>
<td align="left" valign="top"><p class="table">Press this button to commence a single cut.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">Cutting Mode</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Mesh Mode</p></td>
<td align="left" valign="top"><p class="table">This check box will enable or disable mesh mode for the cutting of expanded metal. This check box may be enabled or disabled at any time during normal cutting. Additionally this mode may be enabled or disabled via proper M codes in a running program.<br />
Mesh mode:<br />
- Will require an Arc OK signal to start machine motion.<br />
- Will disable the THC.<br />
- Will not stop machine motion if the Arc OK signal is lost.<br />
- Will automatically select CPA mode if PowerMax communications are being used.<br />
For more information see <a href="plasmac-user-guide.html#mesh-mode">Mesh Mode (expanded metal)</a>.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ignore Arc OK</p></td>
<td align="left" valign="top"><p class="table">This check box will determine if PlasmaC ignores the Arc OK signal. This check box may be enabled or disabled at any time during normal cutting. Additionally this mode may be enabled or disabled via proper M codes in a running program.<br />
Ignore Arc OK mode:<br />
- Will not require an Arc OK signal be received before starting machine motion after the "Torch On" signal is given.<br />
- Will disable the THC.<br />
- Will not stop machine motion if the Arc OK signal is lost.<br />
For more information see <a href="plasmac-user-guide.html#ignore-ok">Ignore Arc Ok</a>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">PowerMax Comms</span></strong></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This frame is only visible if a PM_PORT is configured in the [PLASMAC] section of the &lt;machine_name&gt;.ini file.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Enable</p></td>
<td align="left" valign="top"><p class="table">This check box will enable or disable the communications to a PowerMax.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Status</p></td>
<td align="left" valign="top"><p class="table">When PowerMax communications are enabled, this will display one of the following:<br />
<strong>Connecting</strong>, <strong>Connected</strong>, <strong>Comms Error</strong>, or <strong>Fault Code</strong>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>For more information, see the <a href="plasmac-user-guide.html#pm_comms">PowerMax Communications</a> section.</p></div>
<div class="paragraph" id="run-buttons"><p><strong><span class="underline">Run Settings</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Save</p></td>
<td align="left" valign="top"><p class="table">This button will bring up a dialog box with the following options:<br />
<strong>Material</strong> - This button will save the Cut Parameters for the material currently displayed.<br />
<strong>Settings</strong> - This button will save the THC, Ohmic Probe, Single Cut, Cutting Mode, and PowerMax Communications settings. It will not save the settings in the Cut Parameters section.<br />
<strong>Both</strong> - This button will save all of the settings displayed in the Run Panel.<br />
<strong>Cancel</strong> - This button will close the dialog box without saving.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Reload</p></td>
<td align="left" valign="top"><p class="table">This button will reload all of the displayed settings in the Run Panel, and will re-display the currently selected material. Regardless of the previously saved settings, if PowerMax communications are enabled before pressing Reload, they will remain enabled after.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">New</p></td>
<td align="left" valign="top"><p class="table">This button will allow a new material to be added to the material file. The user will be prompted for a material number and a material name, all other parameters will be read from the currently selected material. Once entered, PlasmaC will reload the material file and display the new material. The Cut Parameters for the new material will then need to be adjusted and saved.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Delete</p></td>
<td align="left" valign="top"><p class="table">This button is used to delete a material. After pressing it, the user will be prompted for a material number to be deleted, and prompted again to ensure the user is sure. After deletion, the material file will be reloaded and the drop down list will display the default material.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>An example of the Save dialog box is below:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_save_dialog.png" alt="width=20%" />
</div>
</div>
</div>
<div class="sect3">
<h4 id="monitor-panel">7.1.3. Monitor Panel</h4>
<div class="paragraph"><p>The Monitor Panel is used to display the status of various relevant I/O&#8217;s. Both Axis and Gmoccapy have similar Monitor Panels.</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_monitor.png" alt="width=40%" />
</div>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="27%" />
<col width="9%" />
<col width="63%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Modes</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Arc Voltage</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">Displays the actual arc voltage.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Arc OK</p></td>
<td align="left" valign="top"><p class="table">1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates the status of the Arc OK signal.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Torch On</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates the status of the Torch On output signal.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">THC Enabled</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates whether the THC will be enabled or disabled during a cut.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Ohmic Probe</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates that the probe has sensed the material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Float Switch</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates that the float switch is activated.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Breakaway</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates that the torch breakaway sensor is activated.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">THC Active</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates that the THC is actively controlling the Z axis.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">THC Up</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates that the THC is commanding the Z axis to raise.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">THC Down</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates that the THC is commanding the Z axis to lower.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">VAD Lock</p></td>
<td align="left" valign="top"><p class="table">0, 1, 2</p></td>
<td align="left" valign="top"><p class="table">Indicates that the THC is locked at the current height due to the cut velocity falling below the VAD Threshold percentage set in the Config Panel.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Void Sense Lock</p></td>
<td align="left" valign="top"><p class="table">0, 1</p></td>
<td align="left" valign="top"><p class="table">Indicates that the THC is locked due to a void being sensed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The Ohmic Probe LED will show the status of the probe input regardless of whether Ohmic Probe is enabled or disabled.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_button_panel">7.1.4. Button Panel</h4>
<div class="paragraph"><p>The Button Panel contains buttons useful for the operation of the machine.</p></div>
<div class="paragraph"><p>Both GUIs have a <strong>Torch Enable</strong> button which is permanent, all other buttons are <a href="plasmac-user-guide.html#custom-user-buttons">user programmable</a> in the &lt;machine_name&gt;.ini file. Axis has five user buttons and Gmoccapy has four user buttons.</p></div>
<div class="paragraph"><p>Axis button layout:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_buttons_a.png" alt="width=40%" />
</div>
</div>
<div class="paragraph"><p>Gmoccapy button layout:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_buttons_g.png" alt="width=10%" />
</div>
</div>
<div class="paragraph"><p>The <strong>Torch Disable/Enable</strong> button toggles between Enabling and Disabling the torch. This button defaults to "Torch Disabled" when PlasmaC is first run, and must be clicked to change it to "Torch Enabled" before material cutting can commence.</p></div>
<div class="paragraph"><p>If "Torch Disabled" is displayed by this button, then running a loaded program will cause the machine to run the cycle without firing the torch. This is sometimes referred to as a "dry run".</p></div>
</div>
<div class="sect3">
<h4 id="_control_panel">7.1.5. Control Panel</h4>
<div class="paragraph"><p>The Control Panel allows the user to pulse the torch for a desired period of time, manually override the height control, and manipulate the machine during paused motion at a desired speed. Both Axis and Gmoccapy are similar except the Gmoccapy Control Panel is integrated into the existing frame containing feed and rapid overrides.</p></div>
<div class="paragraph"><p>Once the machine is homed, <strong>Torch Pulse</strong> and <strong>Height Override</strong> are shown permanently in Idle and Run Modes. <strong>Paused Motion Speed</strong> will be enabled if the machine enters Paused Mode. Examples of the different states are shown below.</p></div>
<div class="paragraph"><p>Axis Control Panel:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_control_a.png" alt="width=40%" />
</div>
</div>
<div class="paragraph"><p>Gmoccapy Control Panel:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_control_g.png" alt="width=40%" />
</div>
</div>
<div class="paragraph"><p><strong><span class="underline">Torch Pulse</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Pulse</p></td>
<td align="left" valign="top"><p class="table">This button will pulse the torch.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Pulse Time Slider</p></td>
<td align="left" valign="top"><p class="table">This slider will set the amount of time (in seconds) that the torch remains on when pulsed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><span class="underline">Height Override</span></strong></p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Raise</p></td>
<td align="left" valign="top"><p class="table">Each press of this button will raise the height of the torch by the value set by the Height Per Volt field in the Arc frame of the Config Panel.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Lower</p></td>
<td align="left" valign="top"><p class="table">Each press of this button will lower the height of the torch by the value set by the Height Per Volt field in the Arc frame of the Config Panel.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Reset</p></td>
<td align="left" valign="top"><p class="table">This button will cancel any manual height override.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph" id="paused-motion-speed"><p><strong><span class="underline">Paused Motion Speed</span></strong></p></div>
<div class="paragraph"><p>In the event of a paused program, this interface allows X/Y motion to follow the programmed path in the reverse or forward direction.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Rev</p></td>
<td align="left" valign="top"><p class="table">In the event of a paused program, this button will move the machine in reverse along the programmed path until it reaches the last M3 command that was either executed or that PlasmaC was attempting to execute before the program became paused.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Motion Speed Slider</p></td>
<td align="left" valign="top"><p class="table">This slider will set the percentage of the current Cut Feed Rate shown in the Run Panel&#8217;s Cut Parameters section for the currently selected material.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Fwd</p></td>
<td align="left" valign="top"><p class="table">In the event of a paused program, this button will move the machine forward along the programmed path indefinitely until the program&#8217;s end, skipping over M3 commands.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>For advanced recovery from a failed cut see <a href="plasmac-user-guide.html#cut-recovery">cut recovery</a>.</p></div>
</div>
<div class="sect3">
<h4 id="_statistics_panel">7.1.6. Statistics Panel</h4>
<div class="paragraph"><p>The Statistics Panel provides statistics to allow for the tracking of consumable wear and job run times.</p></div>
<div class="paragraph"><p>These statistics are shown for the current job as well as the running total.</p></div>
<div class="paragraph"><p>Previous job statistics are reset once the next program is run.</p></div>
<div class="paragraph"><p>The total values may be reset either individually by clicking the corresponding "Reset" button, or they may all be reset together by clicking "Reset All".</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_stats.png" alt="width=60%" />
</div>
</div>
</div>
<div class="sect3">
<h4 id="_extras_panel">7.1.7. Extras Panel</h4>
<div class="paragraph"><p>The Extras Panel provides ten additional user-customizable buttons plus a button to bring up the Conversational dialog box. The Conversational shapes library enables the user to quickly program various simple shapes for quick cutting without the need for CAM software.</p></div>
<div class="paragraph"><p>See <a href="plasmac-user-guide.html#shape-library">conversational shape library</a> for detailed information on the Conversational feature.</p></div>
<div class="paragraph"><p>See <a href="plasmac-user-guide.html#custom-user-buttons">custom user buttons</a> for detailed information on custom user buttons.</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_extras.png" alt="width=60%" />
</div>
</div>
<div class="paragraph"><p>The Extras panel may be disabled by making the appropriate edits in the [DISPLAY] section of the &lt;machine_name&gt;.ini file. This will have no effect on the operation of the PlasmaC software.</p></div>
<div class="paragraph"><p>To disable the Extras Panel, change:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>EMBED_TAB_NAME          = Extras
EMBED_TAB_COMMAND       = gladevcp -c plasmac_wizards -x {XID} -u ./plasmac/plasmac_wizards.py ./plasmac/plasmac_wizards.glade</code></pre>
</div></div>
<div class="paragraph"><p>To:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>#EMBED_TAB_NAME          = Extras
#EMBED_TAB_COMMAND       = gladevcp -c plasmac_wizards -x {XID} -u ./plasmac/plasmac_wizards.py ./plasmac/plasmac_wizards.glade</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_mandatory_codes">7.2. Mandatory Codes</h3>
<div class="paragraph"><p>Aside from the preamble code, postamble code, and X/Y motion code, the only mandatory G-Code syntax for PlasmaC to run a G-Code program is <strong>M3 $0 S1</strong> to begin a cut and <strong>M5 $0</strong> to end a cut.</p></div>
<div class="paragraph"><p>If the user is using PlasmaC without <a href="plasmac-user-guide.html#multi-tool">multiple tools</a> enabled then it is permissible to use <strong>M3 S1</strong> in lieu of <strong>M3 $0 S1</strong> to begin a cutting job and <strong>M5</strong> in lieu of <strong>M5 $0</strong>.</p></div>
</div>
<div class="sect2">
<h3 id="_coordinates">7.3. Coordinates</h3>
<div class="paragraph"><p>See <a href="#z_settings">recommended Z axis</a> settings.</p></div>
<div class="paragraph"><p>Each time LinuxCNC (PlasmaC) is started Joint homing is required. This allows LinuxCNC (PlasmaC) to establish the known coordinates of each axis and set the soft limits to the values specified in the &lt;machine_name&gt;.ini file in order to prevent the machine from crashing into a hard stop during normal use.</p></div>
<div class="paragraph"><p>If the machine does not have home switches then the user needs to ensure that all axes are at the home coordinates specified in the &lt;machine_name&gt;.ini file before homing.</p></div>
<div class="paragraph"><p>If the machine has home switches then it will move to the specified home coordinates when the Joints are homed.</p></div>
<div class="paragraph"><p>Depending on the machine&#8217;s configuration there will either be a <strong>Home All</strong> button or each axis will need to be homed individually. Use the appropriate button/buttons to home the machine.</p></div>
<div class="paragraph"><p>As mentioned in the <a href="plasmac-user-guide.html#initial-setup">Initial Setup</a> section, it is recommended that the first time PlasmaC is used that the user ensure there is nothing below the torch then jog the Z axis down until it stops at the Z axis MINIMUM_LIMIT then click <strong>Touch Off</strong> with the Z axis selected to set the Z axis at zero offset. This should not need to be done again.</p></div>
<div class="paragraph"><p>Before starting a program, jog the Z axis up to approximately 5mm (0.196") from the top of travel (Z Axis MAXIMUM_LIMIT). Leave the Z axis at this position as PlasmaC will control all Z axis motion while running a program, and park the Z Axis in this position when the program completes.</p></div>
<div class="paragraph"><p>If the user intends to place the material in the exact same place on the table every time, the user could jog the X and Y axes to the machine to the corresponding X0 Y0 position as established by the CAM software and then <strong>Touch Off</strong> both axes with a zero offset.</p></div>
<div class="paragraph"><p>If the user intends to place the material randomly on the table then the user must <strong>Touch Off</strong> the X and Y axes at the appropriate position before starting the program.</p></div>
</div>
<div class="sect2">
<h3 id="path-tolerance">7.4. Path Tolerance</h3>
<div class="paragraph"><p>The provided <a href="plasmac-user-guide.html#rs274">RS274NGC_STARTUP_CODE</a> files: metric_startup.ngc and imperial_startup.ngc set the motion blending path tolerance with a G64 command P value to 0.1mm and 0.004" respectively. The P value corresponds to the amount the actual cut path followed by the machine may deviated from the programmed cut path before reducing velocity. If LinuxCNC (PlasmaC) receives an E-stop signal at any stage, the path tolerance will be set to the default (no P value) which will maintain the best possible speed and round corners off as a result. To prevent this, it is recommended that the path tolerance is set by placing the appropriate G64 command and P value in the header of each G-Code file.</p></div>
<div class="paragraph"><p>For Metric:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G64 P0.1</code></pre>
</div></div>
<div class="paragraph"><p>For Imperial:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G64 P0.004</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="paused-motion">7.5. Paused Motion</h3>
<div class="paragraph"><p>PlasmaC has the ability to allow the repositioning of the X and Y axes along the current cut path while the G-Code program is paused.</p></div>
<div class="paragraph"><p>In order to use this feature, LinuxCNC&#8217;s Adaptive Feed Control (M52) must be turned on (P1).</p></div>
<div class="paragraph"><p>To enable <strong>Paused Motion</strong> The preamble of the G-Code must contain the following line:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>M52 P1</code></pre>
</div></div>
<div class="paragraph"><p>To turn off <strong>Paused Motion</strong> at any point, use the following command:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>M52 P0</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="pause-at-end">7.6. Pause At End Of Cut</h3>
<div class="paragraph"><p>This feature can be used to allow the arc to "catch up" to the torch position to fully finish the cut. It is usually required for thicker materials and is especially useful when cutting stainless steel.</p></div>
<div class="paragraph"><p>Using this feature will cause all motion to pause at the end of the cut while the torch is still on. After the dwell time (in seconds) set by the <strong>Pause At End</strong> parameter in the Cut Parameters section of the Run Panel has expired, PlasmaC will proceed with the M5 command to turn off and raise the torch.</p></div>
</div>
<div class="sect2">
<h3 id="multi-tool">7.7. Multiple Tools</h3>
<div class="paragraph"><p>PlasmaC has the ability to allow the use of more than one tool when running a cut program. Multiple tools must be enabled in PlasmaC before they can be used. Valid tools are:</p></div>
<div class="ulist"><ul>
<li>
<p>
Plasma Torch - Used for normal Plasma cutting.
</p>
</li>
<li>
<p>
Scribe - Used for material engraving.
</p>
</li>
<li>
<p>
Plasma Torch - Used for spotting (creating dimples to aid in drilling).
</p>
</li>
</ul></div>
<div class="paragraph"><p>If multiple tools are enabled then a LinuxCNC tool number (designated by $n) is required to be in the <strong>M3</strong> command to select the correct tool to be used. Examples:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M3 $0 S1</strong> will select and start the plasma cutting tool.
</p>
</li>
<li>
<p>
<strong>M3 $1 S1</strong> will select and start the scribe.
</p>
</li>
<li>
<p>
<strong>M3 $2 S1</strong> will select and the plasma spotting tool.
</p>
</li>
</ul></div>
<div class="paragraph"><p>To enable the multiple tools feature the user will need to edit the following line in the &lt;machine_name&gt;_connections.hal file.</p></div>
<div class="paragraph"><p>from:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>setp plasmac.multi-tool 0</code></pre>
</div></div>
<div class="paragraph"><p>to:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>setp plasmac.multi-tool 1</code></pre>
</div></div>
<div class="paragraph"><p>In order to use multiple tools with a scribe, it is necessary for the user to add the X and Y axis offsets to the LinuxCNC tool table. The tool.tbl file is found in the &lt;machine_name&gt; config folder. Tool 0 is assigned to the Plasma Torch and Tool 1 is assigned to the scribe. Tools are selected with a <strong>Tn M6</strong> command, and then a <strong>G43 H0</strong> command is required to apply the offsets for the selected tool. It is important to note that the LinuxCNC tool table and tool commands only come into play if the user is using a <a href="plasmac-user-guide.html#scribe">scribe</a> in addition to a plasma torch. For more information, see <a href="plasmac-user-guide.html#scribe">scribe</a>.</p></div>
</div>
<div class="sect2">
<h3 id="velocity-reduction">7.8. Velocity Reduction</h3>
<div class="paragraph"><p>There is a HAL pin available named <strong>motion.analog-out-03</strong> that can be changed in G-Code with the <strong>M67 (Synchronized with Motion)/M68 (Immediate)</strong> commands. This pin will reduce the velocity to the percentage specified in the command.</p></div>
<div class="paragraph"><p>It is important to thoroughly understand the difference between <strong>Synchronized with Motion</strong> and <strong>Immediate</strong>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M67</strong> (Synchronized with Motion) - The actual change of the specified output (P2 (THC) for example) will happen at the beginning of the next motion command. If there is no subsequent motion command, the output changes will not occur. It is best practice to program a motion code (G0 or G1 for example) right after a M67.
</p>
</li>
<li>
<p>
<strong>M68</strong> (Immediate) - These commands happen immediately as they are received by the motion controller. Since these are not synchronized with motion, they will break blending. This means if these codes are used in the middle of active motion codes, the motion will pause to activate these commands.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Examples:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M67 E3 Q0</strong> would set the velocity to 100% of <strong>CutFeedRate</strong>.
</p>
</li>
<li>
<p>
<strong>M67 E3 Q40</strong> would set the velocity to 40% of <strong>CutFeedRate</strong>.
</p>
</li>
<li>
<p>
<strong>M67 E3 Q60</strong> would set the velocity to 60% of <strong>CutFeedRate</strong>.
</p>
</li>
<li>
<p>
<strong>M67 E3 Q100</strong> would set the velocity to 100% of <strong>CutFeedRate</strong>.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The minimum percentage allowed is 10%, values below this will be set to 10%.</p></div>
<div class="paragraph"><p>The maximum percentage allowed is 100%, values above this will be set to 100%.</p></div>
<div class="paragraph"><p>If the user intends to use this feature it would be prudent to add <strong>M68 E3 Q0</strong> to both the preamble and postamble of the G-Code program so the machine starts and ends in a known state.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">Another way of achieving the same result is to use <strong>F#&lt;_hal[plasmac.cut-feed-rate]</strong> with a multiplier.</td>
</tr></table>
</div>
<div class="paragraph"><p>For example:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>F[#&lt;_hal[plasmac.cut-feed-rate] * 0.6]</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content"><strong>G-CODE THC</strong> AND <strong>VELOCITY BASED THC</strong> ARE NOT ABLE TO BE USED IF <strong>CUTTER COMPENSATION</strong> IS IN EFFECT; AN ERROR MESSAGE WILL BE DISPLAYED.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">If Cut Feed Rate in the Run Panel is set to Zero then PlasmaC will use <strong>motion.requested-velocity</strong> (as set by a standard Feedrate call in the G-Code) for the THC calculations. This is not recommended as it is not a reliable way of implementing velocity based THC.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">All references to CutFeedRate refer to the <strong>Cut Feed Rate</strong> value displayed in the Run Panel.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="material-handling">7.9. Material Handling</h3>
<div class="paragraph"><p>Material handling uses a material file that was created for the machine configuration when the configurator was ran and allows the user to conveniently store known material settings for easy recall either manually or automatically via G Code. The resulting <a href="plasmac-user-guide.html#material-file">material file</a> is named <strong>&lt;machine_name&gt;_material.cfg</strong>.</p></div>
<div class="paragraph"><p>PlasmaC does not require the use of a material file. Instead, the user could change the cut parameters manually from the Run Panel. It is also not required to use the automatic material changes. If the user does not wish to use this feature they can simply omit the material change codes from the G-Code file.</p></div>
<div class="sect3">
<h4 id="material-file">7.9.1. Material File</h4>
<div class="paragraph"><p>Material numbers in the materials file do not need to be consecutive nor do they need to be in numerical order.</p></div>
<div class="paragraph"><p>The following variables are mandatory and an error message will appear if any are not found when the material file is loaded.</p></div>
<div class="ulist"><ul>
<li>
<p>
PIERCE_HEIGHT
</p>
</li>
<li>
<p>
PIERCE_DELAY
</p>
</li>
<li>
<p>
CUT_HEIGHT
</p>
</li>
<li>
<p>
CUT_SPEED
</p>
</li>
</ul></div>
<div class="paragraph"><p>The following variables are optional. If they are not detected or have no value assigned, they will be assigned a value of 0 and no error message will appear.</p></div>
<div class="ulist"><ul>
<li>
<p>
NAME
</p>
</li>
<li>
<p>
KERF_WIDTH
</p>
</li>
<li>
<p>
THC
</p>
</li>
<li>
<p>
PUDDLE_JUMP_HEIGHT
</p>
</li>
<li>
<p>
PUDDLE_JUMP_DELAY
</p>
</li>
<li>
<p>
CUT_AMPS
</p>
</li>
<li>
<p>
CUT_VOLTS
</p>
</li>
<li>
<p>
PAUSE_AT_END
</p>
</li>
<li>
<p>
GAS_PRESSURE
</p>
</li>
<li>
<p>
CUT_MODE
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">It is the responsibility of the operator to ensure that the variables are included if they are a requirement for the G-Code to be run.</td>
</tr></table>
</div>
<div class="paragraph"><p>The material file uses the following format:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[MATERIAL_NUMBER_1]
NAME                = name
KERF_WIDTH          = value
THC                 = value (0 = off, 1 = on)
PIERCE_HEIGHT       = value
PIERCE_DELAY        = value
PUDDLE_JUMP_HEIGHT  = value
PUDDLE_JUMP_DELAY   = value
CUT_HEIGHT          = value
CUT_SPEED           = value
CUT_AMPS            = value (for info only unless PowerMax communications is enabled)
CUT_VOLTS           = value (modes 0 &amp; 1 only, if not using auto voltage sampling)
PAUSE_AT_END        = value
GAS_PRESSURE        = value (only used for PowerMax communications)
CUT_MODE            = value (only used for PowerMax communications)</code></pre>
</div></div>
<div class="paragraph"><p>It is possible to add new material, delete material, or edit existing material from the <a href="plasmac-user-guide.html#run-buttons">Run Panel.</a> It is also possible to achieve this by using <a href="plasmac-user-guide.html#magic-comments">magic comments</a> in a g-Code file.</p></div>
<div class="paragraph"><p>The material file may be edited with a text editor while LinuxCNC is running. After any changes have been saved, press <strong>Reload</strong> in the Run Panel to reload the material file.</p></div>
</div>
<div class="sect3">
<h4 id="_manual_material_handling">7.9.2. Manual Material Handling</h4>
<div class="paragraph"><p>For manual material handling, the user would manually select the material from the materials list in the Run Panel before starting the G-Code program. In addition to selecting materials with materials list in the Run Panel, the user could use the MDI to change materials with the following command:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>M190 Pn</code></pre>
</div></div>
<div class="paragraph"><p>The following code is the minimum code necessary to have a successful cut using the manual material selection method:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>F#&lt;_hal[plasmac.cut-feed-rate]&gt;
M3 $0 S1
.
.
M5 $0</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Manual material handling will restrict the user to only one material for the entire job.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_automatic_material_handling">7.9.3. Automatic Material Handling</h4>
<div class="paragraph"><p>For automatic material handling, the user would add commands to their G-Code file which will enable PlasmaC to change the material automatically.</p></div>
<div class="paragraph"><p>The following codes may be used to allow PlasmaC to automatically change materials:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M190 Pn</strong> - Changes the currently displayed material to material number n.
</p>
</li>
<li>
<p>
<strong>M66 P3 L3 Q1</strong> - Adds a small delay (1 second in this example) to wait for PlasmaC to confirm that it successfully changed materials.
</p>
</li>
<li>
<p>
<strong>F#&lt;_hal[plasmac.cut-feed-rate]&gt;</strong> - Sets the cut feed rate to the feed rate shown in the Cut Parameter section of the Run Panel.
</p>
</li>
</ul></div>
<div class="paragraph"><p>For automatic material handling, the codes MUST be applied in the order shown. If a G-Code program is loaded which contains one or more material change commands then the first material will be displayed in the Run Panel as the program is loading. The following code is the minimum code necessary to have a successful cut using the automatic material selection method:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>M190 Pn
M66 P3 L3 Q1
F#&lt;_hal[plasmac.cut-feed-rate]&gt;
M3 $0 S1
.
.
M5 $0</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_materialverter">7.9.4. Materialverter</h4>
<div class="paragraph"><p>This application is used to convert existing tool tables into PlasmaC material files. It can also create a material file from manual user input to entry fields.</p></div>
<div class="paragraph"><p>At this stage the only conversions available are to tool tables from SheetCam and Fusion360.</p></div>
<div class="paragraph"><p>SheetCam tool tables are complete and the conversion is fully automatic. The SheetCam tool file must be in the SheetCam .tools format.</p></div>
<div class="paragraph"><p>Fusion360 tool tables do not have all of the required fields so the user will be prompted for missing parameters. The Fusion360 tool file must be in the Fusion360 .json format.</p></div>
<div class="paragraph"><p>If the user has a format from a different CAM software they would like converted, create a <strong>New Topic</strong> in the <a href="https://forum.linuxcnc.org/plasmac">PlasmaC forum</a> section of the <a href="https://forum.linuxcnc.org/">LinuxCNC forum</a> to request this addition.</p></div>
<div class="paragraph"><p>Materialverter may be run from a GUI file manager by double clicking on <strong>materialverter.py</strong> in the user&#8217;s configuration directory or may be run by entering the following command into a terminal window:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>python ~/linuxcnc/configs/&lt;machine_name&gt;/materialverter.py</code></pre>
</div></div>
<div class="paragraph"><p>This will bring up the Materialverter dialog:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_material_main.png" alt="width=30%" />
</div>
</div>
<div class="paragraph"><p>Select one of:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Manual</strong> - to manually create a new material file.
</p>
</li>
<li>
<p>
<strong>SheetCam</strong> - to convert a SheetCam tool file.
</p>
</li>
<li>
<p>
<strong>Fusion360</strong> - to convert a Fusion360 tool file.
</p>
</li>
</ul></div>
<div class="paragraph"><p>For SheetCam only, select whether the user requires a metric or imperial output file.</p></div>
<div class="paragraph"><p>To convert:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Select the Input File to be converted.
</p>
</li>
<li>
<p>
Select the Output File to write to. This would normally be ~/linuxcnc/configs/&lt;machine_name&gt;_material.cfg. If necessary, the user could select a different file and hand edit the &lt;machine_name&gt;_material.cfg file.
</p>
</li>
<li>
<p>
Click Create/Convert and the new material file will be created.
</p>
</li>
</ol></div>
<div class="paragraph"><p>For both a Manual creation or a Fusion360 conversion, a dialog will show with all available parameters displayed for input. Any entry marked with *** is mandatory and all other entries are optional depending on the user&#8217;s configuration needs.</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_material_dialogs.png" alt="width=40%" />
</div>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the user selects ~/linuxcnc/configs/&lt;machine_name&gt;_material.cfg and the file already exists, it will be overwritten.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="magic-comments">7.9.5. Materials Adding And Editing Via G-Code</h4>
<div class="paragraph"><p>It is possible to add new materials or edit existing materials by using "magic comments" in a G-Code file.</p></div>
<div class="paragraph"><p>Formatting rules are:</p></div>
<div class="ulist"><ul>
<li>
<p>
The entire comment must be in parentheses.
</p>
</li>
<li>
<p>
The beginning of the magic comment must be: <strong>(o=</strong>
</p>
</li>
<li>
<p>
The equals sign must immediately follow each parameter with no space.
</p>
</li>
<li>
<p>
The mandatory parameters must be in the magic comment (<strong>nu</strong> and <strong>na</strong> are not required for option 0).
</p>
</li>
<li>
<p>
There can be any number and type of magic comments in a G-Code file with the exception of option 0. If more than one option 0 comment is found in the G-Code file then only the last one found will be used.
</p>
</li>
<li>
<p>
If option 0 is to be used in addition to option 1 and/or option 2 then the option 0 comment must be the last one in the G-Code file.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The options are:</p></div>
<div class="tableblock">
<table rules="all"
width="75%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Option</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">0</p></td>
<td align="left" valign="top"><p class="table">Creates a temporary default material.<br />
     Material information added with this option will be discarded by a manual reload or a LinuxCNC restart.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">1</p></td>
<td align="left" valign="top"><p class="table">Adds a new material if the number specified does not exist.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">2</p></td>
<td align="left" valign="top"><p class="table">Overwrites an existing material if the number specified exists.<br />
     Adds a new material if the number specified does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Mandatory parameters are:</p></div>
<div class="tableblock">
<table rules="all"
width="75%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">o</p></td>
<td align="left" valign="top"><p class="table">Selects the option to be used.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">nu</p></td>
<td align="left" valign="top"><p class="table">Sets the material number (not required for option 0).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">na</p></td>
<td align="left" valign="top"><p class="table">Sets the material name (not required for option 0).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ph</p></td>
<td align="left" valign="top"><p class="table">Sets the pierce height.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pd</p></td>
<td align="left" valign="top"><p class="table">Sets the pierce delay.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ch</p></td>
<td align="left" valign="top"><p class="table">Sets the cut height.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">fr</p></td>
<td align="left" valign="top"><p class="table">Sets the feed rate.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Optional parameters are:</p></div>
<div class="tableblock">
<table rules="all"
width="75%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">kw</p></td>
<td align="left" valign="top"><p class="table">Sets the kerf width.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">th</p></td>
<td align="left" valign="top"><p class="table">Sets the THC status (0=disabled, 1=enabled).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ca</p></td>
<td align="left" valign="top"><p class="table">Sets the cut amps.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cv</p></td>
<td align="left" valign="top"><p class="table">Sets the cut voltage.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">pe</p></td>
<td align="left" valign="top"><p class="table">Sets the pause at end delay.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">gp</p></td>
<td align="left" valign="top"><p class="table">Sets the gas pressure (PowerMax).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">cm</p></td>
<td align="left" valign="top"><p class="table">Sets the cut mode (PowerMax).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">jh</p></td>
<td align="left" valign="top"><p class="table">Sets the puddle jump height.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">jd</p></td>
<td align="left" valign="top"><p class="table">Sets the puddle jump delay.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>A complete example:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>(o=1, nu=2, na=5mm Mild Steel 40A, ph=3.1, pd=0.1, ch=0.75, fr=3000, kw=0.5, th=1, ca=45, cv=110, pe=0.1, gp=5, cm=1, jh=0, jd=0)</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="thc">7.10. THC (Torch Height Controller)</h3>
<div class="paragraph"><p>The THC can be controlled from the THC frame of the <a href="plasmac-user-guide.html#run-panel">Run Panel</a>.</p></div>
<div class="paragraph"><p>The THC can also be enabled or disabled directly from the G-Code program provided that THC is not disabled in the THC section of the <a href="plasmac-user-guide.html#run-panel">Run Panel</a>.</p></div>
<div class="paragraph"><p>PlasmaC uses a control voltage which is dependent on the state of the Use Auto Volts checkbox in the Run Panel:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
If <strong>Use Auto Volts</strong> is checked then the actual cut voltage is sampled after the cut begins. To allow the arc voltage to stabilize, PlasmaC waits for the amount of time displayed in the Delay field of the THC section of the <a href="plasmac-user-guide.html#config-panel">config panel</a> before sampling the voltage. The sampled voltage is then used as the target voltage to adjust the height of the torch.
</p>
</li>
<li>
<p>
If <strong>Use Auto Volts</strong> is not checked then the voltage displayed as Cut Volts in the Cut Parameters section of the Run Panel is used as the target voltage to adjust the height of the torch.
</p>
</li>
</ol></div>
<div class="paragraph"><p>The THC does not become active until the velocity reaches 99.9% of the <strong>CutFeedRate</strong>.</p></div>
<div class="paragraph"><p><strong><span class="underline">G-Code THC</span></strong></p></div>
<div class="paragraph"><p>THC may be disabled and enabled directly from G-Code, provided the THC is not disabled in the Run Panel, by setting or resetting the <strong>motion.digital-out-02</strong> pin with the M-Codes M62-M65:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M62 P2</strong> will disable THC (Synchronized with Motion)
</p>
</li>
<li>
<p>
<strong>M63 P2</strong> will enable THC (Synchronized with Motion)
</p>
</li>
<li>
<p>
<strong>M64 P2</strong> will disable THC (Immediately)
</p>
</li>
<li>
<p>
<strong>M65 P2</strong> will enable THC (Immediately)
</p>
</li>
</ul></div>
<div class="paragraph"><p>It is important to thoroughly understand the difference between <strong>Synchronized with Motion</strong> and <strong>Immediate</strong>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M62 and M63</strong> (Synchronized with Motion) - The actual change of the specified output (P2 (THC) for example) will happen at the beginning of the next motion command. If there is no subsequent motion command, the output changes will not occur. It is best practice to program a motion code (G0 or G1 for example) right after a M62 or M63.
</p>
</li>
<li>
<p>
<strong>M64 and M65</strong> (Immediate) - These commands happen immediately as they are received by the motion controller. Since these are not synchronized with motion, they will break blending. This means if these codes are used in the middle of active motion codes, the motion will pause to activate these commands.
</p>
</li>
</ul></div>
<div class="paragraph" id="velocity_thc"><p><strong><span class="underline">Velocity Based THC</span></strong></p></div>
<div class="paragraph"><p>If the cut velocity falls below a percentage of <strong>CutFeedRate</strong> (as defined by the VAD Threshold % value in the THC frame of the Config Panel) the THC will be locked until the cut velocity returns to at least 99.9% of <strong>CutFeedRate</strong>. This will be made apparent by the <strong>THC Velocity Lock</strong> indicator illuminating in the <a href="plasmac-user-guide.html#monitor-panel">Monitor Panel</a>.</p></div>
<div class="paragraph"><p>Velocity based THC prevents the torch height being changed when velocity is reduced for a sharp corner or a small hole.</p></div>
<div class="paragraph"><p>It is important to note that <a href="plasmac-user-guide.html#velocity-reduction">Velocity Reduction</a> affects the Velocity Based THC in the following ways:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
If Velocity Reduction is invoked in the middle of the cut, the THC will be locked.
</p>
</li>
<li>
<p>
The THC will remain locked until the velocity reduction is canceled by returning it to a value that is above the <strong>VAD Threshold</strong>, and the torch actually reaches 99.9% of the <strong>CutFeedRate</strong>.
</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="cutter-compensation">7.11. Cutter Compensation</h3>
<div class="paragraph"><p>LinuxCNC (PlasmaC) has the ability to automatically adjust the cut path of the current program by the amount specified in Kerf Width of the selected material&#8217;s Cut Parameters. This is helpful if the G-Code is programmed to the nominal cut path and the user will be running the program on different thickness materials to help ensure consistently sized parts.</p></div>
<div class="paragraph"><p>To use cutter compensation the user will need to use G41.1, G42.1 and G40 with the kerf width HAL pin:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>G41.1 D#&lt;_hal[plasmac_run.kerf-width-f]&gt;</strong> : offsets torch to the left of the programmed path
</p>
</li>
<li>
<p>
<strong>G42.1 D#&lt;_hal[plasmac_run.kerf-width-f]&gt;</strong> : offsets torch to the right of the programmed path
</p>
</li>
<li>
<p>
<strong>G40</strong> turns the cutter compensation off
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">IF <strong>CUTTER COMPENSATION</strong> IS IN EFFECT <strong>G-CODE THC</strong>, <strong>VELOCITY BASED THC</strong> AND <strong>OVERCUT</strong> ARE NOT ABLE TO BE USED; AN ERROR MESSAGE WILL BE DISPLAYED.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="ihs-skip">7.12. Initial Height Sense (IHS) Skip</h3>
<div class="paragraph"><p>IHS may be skipped in one of two different ways:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
If the THC is disabled then the IHS skip will occur if the start of the cut is less than <strong>Skip IHS</strong> distance from the last successful probe.
</p>
</li>
<li>
<p>
If the THC is enabled then the IHS skip will occur if the start of the cut is less than <strong>Skip IHS</strong> distance from the end of the last cut.
</p>
</li>
</ol></div>
<div class="paragraph"><p>A value of zero for <strong>Skip IHS</strong> will disable IHS skipping.</p></div>
<div class="paragraph"><p>Any errors encountered during a cut will disable IHS skipping for the next cut if <strong>Skip IHS</strong> is enabled.</p></div>
</div>
<div class="sect2">
<h3 id="probing">7.13. Probing</h3>
<div class="paragraph"><p>Probing may be done with either ohmic sensing or a float switch. It is also possible to combine the two methods, in which case the float switch will provide a fallback to ohmic probing.</p></div>
<div class="paragraph"><p>If the machine&#8217;s torch does not support ohmic probing, the user could have a separate probe next to the torch. In this case the user would extend the probe below the torch. The probe must NOT extend more than the minimum Cut Height below the torch and the Z axis offset distance needs to be entered as the <strong>ohmic-probe-offset</strong> in the Config Panel.</p></div>
<div class="paragraph"><p>Probing setup is done in the Probing frame of the Config Panel. Probing speed is controlled in the Motion frame of the Config Panel.</p></div>
<div class="paragraph"><p>PlasmaC can probe at the full Z axis velocity so long as the machine has enough movement in the float switch to absorb any overrun. If the machine&#8217;s float switch travel is suitable, the user could set the Probe Height to near the Z axis MINIMUM_LIMIT and do all probing at full speed.</p></div>
<div class="paragraph"><p>Some float switches can exhibit a large switching hysteresis which shows up in the probing sequence as an excessive time to complete the final probe up.</p></div>
<div class="ulist"><ul>
<li>
<p>
This time may be decreased by changing the speed of the final probe up.
</p>
</li>
<li>
<p>
This speed defaults to 0.001mm (0.000039") per servo cycle.
</p>
</li>
<li>
<p>
It is possible to increase this speed by up to a factor of 10 by adding the following line to the &lt;machine_name&gt;_connections.hal file:
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>setp plasmac.probe-final-speed n</code></pre>
</div></div>
<div class="paragraph"><p>where n is a value from 1-10. It is recommended to keep this value as low as possible.</p></div>
<div class="paragraph"><p>Using this feature will change the final height slightly and will require thorough probe testing to confirm the final height.</p></div>
<div class="paragraph"><p>This speed value affects ALL probing so if the user uses ohmic probing and the user changes this speed value then the user will need to probe test to set the require offset to compensate for this speed change as well as the float travel.</p></div>
<div class="paragraph"><p>The reliability of this feature will only be as good as the repeatability of the float switch.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Probe Height refers to the height above the Z axis MINIMUM_LIMIT.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="cut-types">7.14. Cut Types</h3>
<div class="paragraph"><p>PlasmaC allows two different cut modes:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<strong>Pierce and Cut</strong> - runs the loaded G-Code program to pierce then cut.
</p>
</li>
<li>
<p>
<strong>Pierce Only</strong> - converts the loaded G-Code program and then runs the program to pierce the material at the <strong>M3 S1</strong> or <strong>M3 $0 S1</strong> command positions only. Scribe (<strong>M3 $1 S1</strong>) and Spotting (<strong>M3 $2 S1</strong>) commands will be ignored and no pierce will take place in those locations.
</p>
</li>
</ol></div>
<div class="paragraph"><p><strong>Pierce Only</strong> mode is useful for thick materials which may produce enough dross on the material surface from piercing to interfere with the torch while cutting. This enables the entire sheet to be pierced and cleaned off before cutting.</p></div>
<div class="paragraph"><p>This also enables near-end-of-life consumables to be used for piercing and then they can be swapped out for good consumables to be used while cutting.</p></div>
<div class="paragraph"><p>There are two ways of enabling this feature:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Utilize the default <a href="plasmac-user-guide.html#button-cut">custom user button</a> to toggle between the cut types.
</p>
</li>
<li>
<p>
Adding the following line to the G-Code program before the first cut to enable <strong>Pierce Only</strong> mode for the current file:
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><code>#&lt;pierce-only&gt; = 1</code></pre>
</div></div>
<div class="paragraph"><p>If using a custom user button is utilized then PlasmaC will automatically reload the file when the cut type is toggled.</p></div>
</div>
<div class="sect2">
<h3 id="_hole_cutting_intro">7.15. Hole Cutting - Intro</h3>
<div class="paragraph"><p>It is recommended that any holes to be cut have a diameter no less than one and a half times the thickness of the material to be cut.</p></div>
<div class="paragraph"><p>It is also recommended that holes with a diameter of less than 32mm (1.26") are cut at 60% of the feed rate used for profile cuts. This should also lock out THC due to velocity constraints.</p></div>
<div class="paragraph"><p>PlasmaC can utilize G-Code commands usually set by a CAM Post Processor (PP) to aid in hole cutting or if the user does not have a PP or the user&#8217;s PP does not support these methods then PlasmaC can automatically adapt the G-Code to suit. This automatic mode is disabled by default.</p></div>
<div class="paragraph"><p>There are three methods available for improving the quality of small holes:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<strong>Velocity Reduction</strong> - Reducing the velocity to approximately 60% of the <strong>CutFeedRate</strong>.
</p>
</li>
<li>
<p>
<strong>Arc Dwell (<a href="plasmac-user-guide.html#pause-at-end">Pause At End</a>)</strong> - Keeping the torch on for a short time at the end of the hole while motion is stopped to allow the arc to catch up.
</p>
</li>
<li>
<p>
<strong>Overcut</strong> - Turning the torch off at the end of the hole then continue along the path.
</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If both <strong>Arc Dwell</strong> and <strong>Overcut</strong> are active at the same time then <strong>Overcut</strong> will take precedence.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content"><strong>OVERCUT</strong> IS NOT ABLE TO BE USED IF CUTTER COMPENSATION IS IN EFFECT; AN ERROR MESSAGE WILL BE DISPLAYED.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_hole_cutting">7.16. Hole Cutting</h3>
<div class="paragraph"><p>G-Code commands can be set up by either by a CAM Post Processor (PP) or by hand coding.</p></div>
<div class="paragraph" id="hole-cutting-velocity-reduction"><p><strong><span class="underline">Hole Cutting Velocity Reduction</span></strong></p></div>
<div class="paragraph"><p>If cutting a hole requires a reduced velocity then the user would use the following command to set the velocity: <strong>M67 E3 Qnn</strong> where nn is the percentage of the velocity desired. For example, <strong>M67 E3 Q60</strong> would set the velocity to 60% of the current material&#8217;s <strong>CutFeedRate</strong>.</p></div>
<div class="paragraph"><p>See the <a href="plasmac-user-guide.html#velocity_thc">Velocity Based THC</a> section.</p></div>
<div class="paragraph"><p>Sample code:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G21 (metric)
G64 P0.005
M52 P1 (allow paused motion)
F#&lt;_hal[plasmac.cut-feed-rate]&gt; (feed rate from cut parameters)
G0 X10 Y10
M3 $0 S1 (start cut)
G1 X0
M67 E3 Q60 (reduce feed rate to 60%)
G3 I10 (the hole)
M67 E3 Q0 (restore feed rate to 100%)
M5 $0 (end cut)
G0 X0 Y0
M2 (end job)</code></pre>
</div></div>
<div class="paragraph"><p><strong><span class="underline">Arc Dwell (Pause At End)</span></strong></p></div>
<div class="paragraph"><p>This method can be invoked by setting the <a href="plasmac-user-guide.html#pause-at-end">Pause At End</a> parameter in the Cut Parameters frame of the <a href="plasmac-user-guide.html#run-panel">Run Panel</a>.</p></div>
<div class="paragraph" id="overcut"><p><strong><span class="underline">Overcut</span></strong></p></div>
<div class="paragraph"><p>The torch can be turned off at the end of the hole by setting the <strong>motion.digital-out-03</strong> pin with the M-Codes <strong>M62 (Synchronized with Motion)</strong> or <strong>M64 (Immediate)</strong>. After turning the torch off it is necessary to allow the torch to be turned on again before beginning the next cut by resetting the <strong>motion.digital-out-03</strong> pin with the M-Codes <strong>M63</strong> or <strong>M65</strong>, this will be done automatically by the PlasmaC G-Code parser if it reaches an M5 command without seeing a <strong>M63 P3</strong> or <strong>M65 P3</strong>.</p></div>
<div class="paragraph"><p>After the torch is turned off the hole path will be followed for a default length of 4mm (0.157"). This distance may be specified by adding <strong>#&lt;oclength&gt; = n</strong> to the G-Code file.</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M62 P3</strong> will turn the torch off (Synchronized with Motion)
</p>
</li>
<li>
<p>
<strong>M63 P3</strong> will allow the torch to be turned on (Synchronized with Motion)
</p>
</li>
<li>
<p>
<strong>M64 P3</strong> will turn the torch off (Immediately)
</p>
</li>
<li>
<p>
<strong>M65 P3</strong> will allow the torch to be turned on (Immediately)
</p>
</li>
</ul></div>
<div class="paragraph"><p>It is important to thoroughly understand the difference between <strong>Synchronized with motion</strong> and <strong>Immediate</strong>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M62 and M63</strong> (Synchronized with Motion) - The actual change of the specified output (P2 (THC) for example) will happen at the beginning of the next motion command. If there is no subsequent motion command, the output changes will not occur. It is best practice to program a motion code (G0 or G1 for example) right after a M62 or M63.
</p>
</li>
<li>
<p>
<strong>M64 and M65</strong> (Immediate) - These commands happen immediately as they are received by the motion controller. Since these are not synchronized with motion, they will break blending. This means if these codes are used in the middle of active motion codes, the motion will pause to activate these commands.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Sample code:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G21 (metric)
G64 P0.005
M52 P1 (allow paused motion)
F#&lt;_hal[plasmac.cut-feed-rate]&gt; (feed rate from cut parameters)
G0 X10 Y10
M3 $0 S1 (start cut)
G1 X0
M67 E3 Q60 (reduce feed rate to 60%)
G3 I10 (the hole)
M62 P3 (turn torch off)
G3 X0.8 Y6.081 I10 (continue motion for 4mm)
M63 P3 (allow torch to be turned on)
M67 E3 Q0 (restore feed rate to 100%)
M5 $0 (end cut)
G0 X0 Y0
M2 (end job)</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="hole-cutting">7.17. Hole Cutting - Automatic</h3>
<div class="paragraph"><p>PlasmaC has the ability to automatically modify the G-Code to reduce the velocity and/or apply <strong>Overcut</strong> which can be useful when cutting holes.</p></div>
<div class="paragraph"><p>The default hole size for PlasmaC hole sensing is 32mm (1.26"). It is possible to change this value with the following command in a G-Code file:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>#&lt;h_diameter&gt; = nn</strong> - To set a diameter (nn) in the same units system as the rest of the G-Code file.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The default velocity for PlasmaC small holes is 60% of the current feed rate. It is possible to change this value with the following command in a G-Code file:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>#&lt;h_velocity&gt; = nn</strong> - to set the percentage (nn) of the current feed rate required.
</p>
</li>
</ul></div>
<div class="paragraph"><p>PlasmaC Hole Sensing is disabled by default. It can be enabled/disabled by using the following G-Code parameters to select the desired hole sensing mode:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>#&lt;holes&gt; = 0</strong> - Causes PlasmaC to disable hole sensing if it was previously enabled.
</p>
</li>
<li>
<p>
<strong>#&lt;holes&gt; = 1</strong> - Causes PlasmaC to reduce the speed of holes less than 32mm (1.26") to 60% of <strong>CutFeedRate</strong>.
</p>
</li>
<li>
<p>
<strong>#&lt;holes&gt; = 2</strong> - Causes PlasmaC to <a href="plasmac-user-guide.html#overcut">Overcut</a> the hole in addition to the velocity changes in setting 1.
</p>
</li>
<li>
<p>
<strong>#&lt;holes&gt; = 3</strong> - Causes PlasmaC to reduce the speed of holes less than 32mm (1.26") and arcs less than 16mm (0.63") to 60% of <strong>CutFeedRate</strong>.
</p>
</li>
<li>
<p>
<strong>#&lt;holes&gt; = 4</strong> - Causes PlasmaC to <a href="plasmac-user-guide.html#overcut">Overcut</a> the hole in addition to the velocity change in setting 3.
</p>
</li>
</ul></div>
<div class="paragraph"><p><strong><span class="underline">Arc Dwell (Pause At End)</span></strong></p></div>
<div class="paragraph"><p>This feature can be used in addition to setting the desired hole sensing mode via the appropriate G-Code parameter by setting the <a href="plasmac-user-guide.html#pause-at-end">Pause At End</a> parameter in the Cut Parameters frame of the <a href="plasmac-user-guide.html#run-panel">Run Panel</a>.</p></div>
<div class="paragraph"><p><strong><span class="underline">Overcut</span></strong></p></div>
<div class="paragraph"><p>If Hole Sensing modes 2 or 4 are active, PlasmaC will overcut the hole in addition to the velocity changes associated with modes 1 and 3.</p></div>
<div class="paragraph"><p>The default overcut length for PlasmaC hole sensing is 4mm (0.157"). It is possible to change this value with the following command in a G-Code file:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>#&lt;oclength&gt; = nn</strong> to specify an overcut length (nn) in the same units system as the rest of the G-Code file.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Sample code:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G21 (metric)
G64 P0.005
M52 P1 (allow paused motion)
F#&lt;_hal[plasmac.cut-feed-rate]&gt; (feed rate from cut parameters)
#&lt;holes&gt; = 2 (overcut for holes)
#&lt;oclength&gt; = 6.5 (optional, 6.5mm overcut length)
G0 X10 Y10
M3 $0 S1 (start cut)
G1 X0
G3 I10 (the hole)
M5 $0 (end cut)
G0 X0 Y0
M2 (end job)</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">It is OK to have multiple and mixed hole commands in a single G-Code file.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="_single_cut">7.18. Single Cut</h3>
<div class="paragraph"><p>A single cut is a single unidirectional cutting move often used to cut a sheet into smaller pieces prior to running a G-Code program.</p></div>
<div class="paragraph"><p>The machine needs to be homed before commencing a single cut.</p></div>
<div class="paragraph"><p>A single cut will commence from the machines current X/Y position.</p></div>
<div class="paragraph"><p><strong><span class="underline">Automatic Single Cut</span></strong></p></div>
<div class="paragraph"><p>This is the preferred method. The parameters for this method are entered in the Run Panel.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Jog to the required X/Y start position.<br />
</p>
</li>
<li>
<p>
Set required Cut Feed Rate in Cut Parameters of the Run Panel.<br />
</p>
</li>
<li>
<p>
Enter the length of the cut along the X and/or Y axes.<br />
</p>
</li>
<li>
<p>
Press the <strong>Start Cut</strong> button and the cut will commence.
</p>
</li>
</ol></div>
<div class="paragraph"><p><strong><span class="underline">Pendant Single Cut</span></strong></p></div>
<div class="paragraph"><p>If the machine is equipped with a pendant that can start and stop the spindle plus jog the X and Y axes, the user can manually perform a single cut.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Jog to the required X/Y start position.<br />
</p>
</li>
<li>
<p>
Set the required feed rate with the Jog Speed slider.<br />
</p>
</li>
<li>
<p>
Start the cut process by starting the spindle.<br />
</p>
</li>
<li>
<p>
After probing the torch will fire.<br />
</p>
</li>
<li>
<p>
When the Arc OK is received the machine can be jogged along the cut line using the jog buttons.<br />
</p>
</li>
<li>
<p>
When the cut is complete stop the spindle.<br />
</p>
</li>
<li>
<p>
The torch will turn off and the Z axis will return to the starting position.
</p>
</li>
</ol></div>
<div class="paragraph"><p><strong><span class="underline">Manual Single Cut In Axis</span></strong></p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Jog to the required X/Y start position.<br />
</p>
</li>
<li>
<p>
Set the required feed rate with the Jog Speed slider.<br />
</p>
</li>
<li>
<p>
Start the procedure by pressing <strong>F9</strong>.<br />
</p>
</li>
<li>
<p>
After probing the torch will fire.<br />
</p>
</li>
<li>
<p>
When the Arc OK is received the machine can be jogged along the cut line using the jog keys.<br />
</p>
</li>
<li>
<p>
When the cut is complete press <strong>F9</strong> or <strong>Esc</strong>.<br />
</p>
</li>
<li>
<p>
The torch will turn off and the Z axis will return to the starting position.
</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the torch flames out during cutting, the user must still press <strong>F9</strong> or <strong>Esc</strong> to end the cut. This clears the Z offsets and returns the torch to the starting position.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong><span class="underline">Manual Single Cut In Gmoccapy</span></strong></p></div>
<div class="paragraph"><p>If the user wishes to use the keyboard jogging keys then enable keyboard shortcuts in the Hardware tab of the Settings page, otherwise the GUI jog buttons must be used.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Jog to the required X/Y start position.<br />
</p>
</li>
<li>
<p>
Set the required feed rate with the Jog Speed slider.<br />
</p>
</li>
<li>
<p>
Enter MDI mode.<br />
</p>
</li>
<li>
<p>
Start the procedure by entering <strong>M3 S1</strong>.<br />
</p>
</li>
<li>
<p>
Enter Manual mode.<br />
</p>
</li>
<li>
<p>
After probing the torch will fire.<br />
</p>
</li>
<li>
<p>
When the Arc OK is received the machine can be jogged along the cut line using the GUI jog buttons (or jog keys if keyboard shortcuts are enabled).<br />
</p>
</li>
<li>
<p>
When the cut is complete press <strong>Esc</strong>.<br />
</p>
</li>
<li>
<p>
The torch will turn off and the Z axis will return to the starting position.
</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the torch flames out during cutting, the user must still press <strong>F9</strong> or <strong>Esc</strong> to end the cut. This clears the Z offsets and returns the torch to the starting position.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="mesh-mode">7.19. Mesh Mode (Expanded Metal Cutting)</h3>
<div class="paragraph"><p>PlasmaC is capable of cutting of expand (mesh) metal provided the machine has a pilot arc torch and it is capable of Constant Pilot Arc (CPA) mode.</p></div>
<div class="paragraph"><p><strong>Mesh Mode</strong> disables the THC and also ignores a lost Arc OK signal during a cut. It can be selected by checking the <strong>Mesh Mode</strong> check button in the Cutting Mode section of the Run Panel.</p></div>
<div class="paragraph"><p>If the machine has <a href="plasmac-user-guide.html#pm_comms">RS485</a> communications enabled with a Hypertherm PowerMax plasma cutter, selecting <strong>Mesh Mode</strong> will disable the <strong>Cut Mode</strong> spinbutton in the Cut Parameters section of the Run Panel and it will select cut mode 2 (CPA). When <strong>Mesh Mode</strong> is disabled, the <strong>Cut Mode</strong> spinbutton will be re-enabled and the original cut mode will be restored.</p></div>
<div class="paragraph"><p>It is also possible to start a <strong>Mesh Mode</strong> cut without receiving an Arc OK signal by checking the <strong>Ignore Arc OK</strong> check button in the Cutting Mode section of the Run Panel.</p></div>
<div class="paragraph"><p>Both <strong>Mesh Mode</strong> and <strong>Ignore Arc OK</strong> can be enabled/disabled at any time during a job.</p></div>
</div>
<div class="sect2">
<h3 id="ignore-ok">7.20. Ignore Arc OK</h3>
<div class="paragraph"><p><strong>Ignore Arc OK</strong> mode disables the THC, will begin a cut without requiring an Arc OK signal, and will ignore a lost Arc OK signal during a cut.</p></div>
<div class="paragraph"><p>This mode can be selected by:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Checking the <strong>Ignore Arc OK</strong> check button in the Cutting Mode section of the Run Panel.<br />
</p>
</li>
<li>
<p>
Setting HAL pin <strong>motion.digital-out-01</strong> to 1 via G-Code.
</p>
<div class="ulist"><ul>
<li>
<p>
<strong>M62 P1</strong> will enable <strong>Ignore Arc OK</strong> (Synchronized with Motion)
</p>
</li>
<li>
<p>
<strong>M63 P1</strong> will disable <strong>Ignore Arc OK</strong> (Synchronized with Motion)
</p>
</li>
<li>
<p>
<strong>M64 P1</strong> will enable <strong>Ignore Arc OK</strong> (Immediately)
</p>
</li>
<li>
<p>
<strong>M65 P1</strong> will disable <strong>Ignore Arc OK</strong> (Immediately)
</p>
</li>
</ul></div>
</li>
</ol></div>
<div class="paragraph"><p>It is important to thoroughly understand the difference between <strong>Synchronized with motion</strong> and <strong>Immediate</strong>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>M62 and M63</strong> (Synchronized with Motion) - The actual change of the specified output (P2 (THC) for example) will happen at the beginning of the next motion command. If there is no subsequent motion command, the output changes will not occur. It is best practice to program a motion code (G0 or G1 for example) right after a M62 or M63.
</p>
</li>
<li>
<p>
<strong>M64 and M65</strong> (Immediate) - These commands happen immediately as they are received by the motion controller. Since these are not synchronized with motion, they will break blending. This means if these codes are used in the middle of active motion codes, the motion will pause to activate these commands.
</p>
</li>
</ul></div>
<div class="paragraph"><p>This mode may also be used in conjunction with <strong>Mesh Mode</strong> if the user doesn&#8217;t require an Arc OK signal to begin the cut.</p></div>
<div class="paragraph"><p>Both <strong>Mesh Mode</strong> and <strong>Ignore Arc OK</strong> can be enabled/disabled at any time during a job.</p></div>
</div>
<div class="sect2">
<h3 id="cut-recovery">7.21. Cut Recovery</h3>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_cut_recovery.png" alt="width=40%" />
</div>
</div>
<div class="paragraph"><p>This feature will produce a dialog box that will allow the torch to be moved away from the cut path during a <a href="plasmac-user-guide.html#paused-motion">paused motion</a> event in order to position the torch over a scrap portion of the material being cut so that the cut restarts with a minimized arc-divot. This feature is only available from a user-programmed button (named Cut-Recovery by default) in the Extras panel and may only be clicked while motion is paused.</p></div>
<div class="paragraph"><p>It is preferable to make torch position adjustments from the point at which paused motion occurred, however if moving along the cut path is necessary prior to setting the new start point, the user may use the paused motion controls (Rev, Fwd, and a jog-speed slider) at the top of the dialog box. Once the user is satisfied with the positioning of the torch along the cut path, moving off the cut path is achieved by pressing the direction buttons. Each press of the direction button will move the torch a distance equivalent to the <strong>Kerf Width</strong> parameter of the currently selected material.</p></div>
<div class="paragraph"><p>The moment the torch has been moved off the cut path, the paused motion controls (Rev, Fwd, and a jog-speed slider) at the top of the dialog box will become disabled.</p></div>
<div class="paragraph"><p>Once the torch position is satisfactory, press Resume Cut or the GUI’s Resume button (Pause symbol) and the cut will resume from the new position and travel the shortest distance to the original paused motion location. The dialog box will close when the torch returns to the original paused motion location.</p></div>
<div class="paragraph"><p>Pressing Cancel (or the X in the title bar) will cause the torch to move back to where it was positioned when the motion became paused and the dialog box will close.</p></div>
</div>
<div class="sect2">
<h3 id="shape-library">7.22. Conversational Shape Library</h3>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_conversational.png" alt="width=40%" />
</div>
</div>
<div class="paragraph"><p>The <strong>Conversational Shape Library</strong> consists of several basic shapes and functions to assist the user with generating quick G-Code at the machine to cut simple shapes quickly. This feature is started by clicking the <strong>Conversational</strong> button found in the Extras tab.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The Conversational Library is not meant to be a CAD/CAM replacement as there are limitations to what can be achieved.</td>
</tr></table>
</div>
<div class="paragraph"><p>Blank entries in the shape input boxes will use the current setting at the time the G-Code was generated. For example, if <strong>X start</strong> was left blank then the current X axis position would be used.</p></div>
<div class="paragraph"><p>All lead-ins and lead-outs are arcs except for:</p></div>
<div class="ulist"><ul>
<li>
<p>
Small holes
</p>
</li>
<li>
<p>
Stars
</p>
</li>
</ul></div>
<div class="paragraph"><p>The cut order will occur in the same order as the shape was built.</p></div>
<div class="paragraph"><p>Pressing <strong>Return</strong> on the keyboard while editing parameters will automatically show the preview of the shape if there are enough parameters entered to create the shape. Clicking any of the available check boxes will do the same.</p></div>
<div class="paragraph"><p>The button functions are as follows:</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Name</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">New</p></td>
<td align="left" valign="top"><p class="table">Removes the current G-Code file and load a blank G-Code file.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Save</p></td>
<td align="left" valign="top"><p class="table">Opens a dialog allowing the current shape to be saved as a G-Code file.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Settings</p></td>
<td align="left" valign="top"><p class="table">Allows the changing of the global settings.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Quit</p></td>
<td align="left" valign="top"><p class="table">Closes the Conversational Panel. All edits will be discarded.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Send</p></td>
<td align="left" valign="top"><p class="table">Closes the Conversational Panel and load the current shape into LinuxCNC (PlasmaC). If the last edit was not added then it will be discarded.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Preview</p></td>
<td align="left" valign="top"><p class="table">Displays a preview of the current shape provided the required information is present.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Continue</p></td>
<td align="left" valign="top"><p class="table">This button is used for lines and arcs only. Allows another segment to be added to the current segment/segments.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Add</p></td>
<td align="left" valign="top"><p class="table">Stores the current shape into the current job.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Undo</p></td>
<td align="left" valign="top"><p class="table">Reverts to the previously stored state. If there have been no edits since the last store, it will stay at the current state.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>If there is a G-Code file loaded in LinuxCNC (PlasmaC) when the Conversational Panel is opened, that code will be imported into the conversational as the first shape of the job. If this code is not required then it can be removed by pressing the New button.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">All distances are in machine units relative to the current User Coordinate System and all angles are in degrees.</td>
</tr></table>
</div>
<div class="sect3">
<h4 id="_settings">7.22.1. Settings</h4>
<div class="paragraph"><p>Global settings for the shape library can be set by pressing the <strong>Settings</strong> button in the Conversational Panel. This will display all of the available settings parameters that are used for G-Code program creation. These include:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Preamble</strong>
</p>
</li>
<li>
<p>
<strong>Postamble</strong>
</p>
</li>
<li>
<p>
<strong>Origin (Center or Bottom Left)</strong>
</p>
</li>
<li>
<p>
<strong>Lead-in length</strong>
</p>
</li>
<li>
<p>
<strong>Lead-out length</strong>
</p>
</li>
<li>
<p>
<strong>Small hole diameter</strong>
</p>
</li>
<li>
<p>
<strong>Small hole speed</strong>
</p>
</li>
<li>
<p>
<strong>Window Size</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>Any internal circle that has a diameter less than <strong>Small hole diameter</strong> is classified as a small hole and will have a straight lead-in with a length that is the lesser of either the radius of the hole or the specified lead-in length. It will also have its feed rate set to <strong>Small hole speed</strong>.</p></div>
<div class="paragraph"><p>Pressing the <strong>Save</strong> button will save all the settings as displayed and will change the window size to the displayed size.</p></div>
<div class="paragraph"><p>After saving the user may press <strong>Quit</strong> or they may click on any shape to start the Conversational process.</p></div>
</div>
<div class="sect3">
<h4 id="_lines_and_arcs">7.22.2. Lines And Arcs</h4>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_conversational_line.png" alt="width=5%" />
</div>
</div>
<div class="paragraph"><p>Lines and arcs have an additional option in that they may be strung together to create a complex shape.</p></div>
<div class="paragraph"><p>There are two line types and three arc types available:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<strong>Line</strong> given a start point and an end point.
</p>
</li>
<li>
<p>
<strong>Line</strong> given a start point, length, and angle.
</p>
</li>
<li>
<p>
<strong>Arc</strong> given a start point, way point, and end point.
</p>
</li>
<li>
<p>
<strong>Arc</strong> given a start point, end point, and radius.
</p>
</li>
<li>
<p>
<strong>Arc</strong> given a start point, length, angle, and radius.
</p>
</li>
</ol></div>
<div class="paragraph"><p>To use lines and arcs:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Select Lines and Arcs.
</p>
</li>
<li>
<p>
Select the type of line or arc to create.
</p>
</li>
<li>
<p>
Enter the desired parameters.
</p>
</li>
<li>
<p>
Press <strong>Preview</strong> to see the shape.
</p>
</li>
<li>
<p>
If satisfied with the shape press <strong>Continue</strong>.
</p>
</li>
<li>
<p>
Change the line or arc type if needed and continue this procedure until the shape is complete.
</p>
</li>
<li>
<p>
Press <strong>Send</strong> to send the G-Code file to LinuxCNC (PlasmaC) for cutting.
</p>
</li>
</ol></div>
<div class="paragraph"><p>If the user wishes to create a closed shape, they will need to create any required lead-in as the first segment of the shape. If a lead-out is required it will need to be the last segment of the shape.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">At this stage there is no automatic option for a lead-in/lead-out creation if the shape is closed.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_single_shape">7.22.3. Single Shape</h4>
<div class="paragraph"><p>The following shapes are available for creation:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_conversational_shapes.png" alt="width=75%" />
</div>
</div>
<div class="paragraph"><p>To create a shape:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Select the shape to create. The available parameters will be displayed.
</p>
</li>
<li>
<p>
Enter the appropriate values and press <strong>Preview</strong> to display the shape.
</p>
</li>
<li>
<p>
If the shape is not correct, edit the values and press <strong>Preview</strong> and the new shape will be displayed. Repeat until satisfied with the shape.
</p>
</li>
<li>
<p>
Press <strong>Add</strong> to add the shape to the G-Code file.
</p>
</li>
<li>
<p>
Press <strong>Send</strong> to send the G-Code file to LinuxCNC (PlasmaC) for cutting.
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_group_of_shapes">7.22.4. Group Of Shapes</h4>
<div class="paragraph"><p>Multiple shapes can be added together to create a complex group.</p></div>
<div class="paragraph"><p>The cut order of the group is determined by the order in which the individual shapes are added to the group.</p></div>
<div class="paragraph"><p>Once a shape is added to the group it cannot be edited or removed.</p></div>
<div class="paragraph"><p>Groups cannot have shapes removed, only added to.</p></div>
<div class="paragraph"><p>To create a group of shapes:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Create the first shape as in <strong>Single Shape</strong>.
</p>
</li>
<li>
<p>
Press <strong>Add</strong> and the shape will be added to the group.
</p>
</li>
<li>
<p>
If the user wishes to add another version of the same shape then edit the required parameters and press <strong>Add</strong> when satisfied with the shape.
</p>
</li>
<li>
<p>
If the user wishes to add a different shape, select that shape and create it as in <strong>Single Shape</strong>.
</p>
</li>
<li>
<p>
Repeat until all the required shapes to complete the group have been added.
</p>
</li>
<li>
<p>
Press <strong>Send</strong> to send the G-Code file to LinuxCNC (PlasmaC) for cutting.
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_rotate">7.22.5. Rotate</h4>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_conversational_rotate.png" alt="width=5%" />
</div>
</div>
<div class="paragraph"><p>The rotate feature will rotate the current code displayed in the Preview tab, this can be a single shape, a group or an imported G-Code file.</p></div>
<div class="paragraph"><p>Arrays created via Conversational may be rotated, however arrays that have been imported cannot be rotated.</p></div>
<div class="paragraph"><p>Rotation will not work on G-Code that is mathematically calculated, the values need to be specified.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Create a shape, a group, or use the imported G-Code file.
</p>
</li>
<li>
<p>
Press <strong>Rotate</strong> to open the rotate dialog.
</p>
</li>
<li>
<p>
Enter the appropriate values in the rotate dialog and press <strong>Preview</strong> to display the rotated code.
</p>
</li>
<li>
<p>
If the rotation is not correct, edit the values and press <strong>Preview</strong> and the new rotated code will be shown. Repeat until satisfied with the rotated code.
</p>
</li>
<li>
<p>
Press <strong>Add</strong> to complete the procedure.
</p>
</li>
<li>
<p>
Press <strong>Send</strong> to send the G-Code file to LinuxCNC (PlasmaC) for cutting.
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_array">7.22.6. Array</h4>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_conversational_array.png" alt="width=5%" />
</div>
</div>
<div class="paragraph"><p>An array can be created from a shape, a group or an imported G-Code file.</p></div>
<div class="paragraph"><p>Arrays created with Conversational may be arrayed but imported arrays cannot be arrayed.</p></div>
<div class="paragraph"><p>The cut order of an array is from the left column to the right column, starting at the bottom row and ending at the top row.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Create a shape, a group, or use the imported G-Code file.
</p>
</li>
<li>
<p>
Press <strong>Array</strong> to open the array dialog.
</p>
</li>
<li>
<p>
Enter the appropriate values in the array dialog and press <strong>Preview</strong> to display the array.
</p>
</li>
<li>
<p>
If the array is not correct, edit the values and press <strong>Preview</strong> and the new array will be shown. Repeat until satisfied with the array.
</p>
</li>
<li>
<p>
Press <strong>Add</strong> to complete the procedure.
</p>
</li>
<li>
<p>
Press <strong>Send</strong> to send the G-Code file to LinuxCNC (PlasmaC) for cutting.
</p>
</li>
</ol></div>
</div>
<div class="sect3">
<h4 id="_saving_a_job">7.22.7. Saving A Job</h4>
<div class="paragraph"><p>The current job displayed in the Preview Panel may be saved at any time by using the bottom <strong>Save</strong> button. If the G-Code has been sent to LinuxCNC (PlasmaC) and the Conversational dialog box has closed, the user may still save the G-Code file from the GUI. Alternatively, the user could click the Conversational button in the Extras tab which will reload the job, at which time they can press the <strong>Save</strong> button.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="scribe">7.23. Scribe</h3>
<div class="paragraph"><p>A scribe may be operated by PlasmaC in addition to the plasma torch. This ability is disabled by default so as not to adversely affect existing configurations. To enable scribing, see the <a href="plasmac-user-guide.html#multi-tool">Multiple Tools</a> section for guidance in editing the &lt;machine_name&gt;_connections.hal file.</p></div>
<div class="paragraph"><p>Using a scribe requires the use of the LinuxCNC tool table. Tool 0 is assigned to the plasma torch and Tool 1 is assigned to the scribe. The scribe X and Y axes offsets from the plasma torch need to be entered into the LinuxCNC tool table. This is done by editing the tool table via the main GUI, or by editing the <strong>tool.tbl</strong> file in the <strong>&lt;machine_name&gt;</strong> configuration directory. This will be done after the scribe can move to the work piece to help determine the appropriate offset.</p></div>
<div class="paragraph"><p>The plasma torch offsets for X and Y will always be zero. The tools are selected by the <strong>Tn M6</strong> command followed by a <strong>G43 H0</strong> command which is required to apply the offsets. The tool is then started with a <strong>M3 $n S1</strong> command. For <strong>n</strong>, use 0 for torch cutting or 1 for scribing.</p></div>
<div class="paragraph"><p>If the user has not yet assigned the HAL pins for the scribe in the Configurator then they will need to do so by invoking the <a href="plasmac-user-guide.html#modify-config">reconfigure</a> mode of the Configurator.</p></div>
<div class="paragraph"><p>There are two HAL output pins used to operate the scribe, the first pin is used to arm the scribe which moves the scribe to the surface of the material. After the <a href="plasmac-user-guide.html#scribe-config">Arm Delay</a> has elapsed, the second pin is used to start the scribe. After the <a href="plasmac-user-guide.html#scribe-config">On Delay</a> has elapsed, motion will begin.</p></div>
<div class="paragraph"><p>Using PlasmaC after enabling the scribe requires the selection of either the torch or the scribe in each G-Code file as a LinuxCNC tool.</p></div>
<div class="paragraph"><p>The next step is to open the tool table editor in the GUI or edit <strong>tool.tbl</strong> in the <strong>&lt;machine_name&gt;</strong> configuration directory and enter the X and Y axes offsets. These are the distances in X and Y the scribe is away from the torch as measured from the center of the torch nozzle. In most cases, if the user is standing at the front of the machine and the scribe is to the right of the torch, a positive X offset would be required. Similarly, if the scribe is to the rear of the torch, a positive Y offset would be required. The offsets for the torch should always be zero.</p></div>
<div class="paragraph"><p>The final step is to set the <a href="plasmac-user-guide.html#scribe-config">scribe delays</a> required:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<strong>Arm Delay</strong> - allows time for the scribe to descend to the surface of the material.
</p>
</li>
<li>
<p>
<strong>On Delay</strong> - allows time for the scribe to start before motion begins.
</p>
</li>
</ol></div>
<div class="paragraph"><p>Save the parameters in the Config tab.</p></div>
<div class="paragraph"><p>After the above directions are completed, the scribe may be tested manually by issuing a <strong>M3 $1 S1</strong> command in the MDI input. The user may find it helpful to use this method to scribe a small divot and then try to pulse the torch in the same location to align the offsets between the scribe and the torch.</p></div>
<div class="paragraph"><p>To use the scribe from G-Code:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>...
M52 P1 (paused motion on)
F#&lt;_hal[plasmac.cut-feed-rate]&gt;
T1 M6 (select scribe)
G43 H0 (apply offsets for current tool)
M3 $1 S1 (start the scribe)
.
M5 $1 (stop the scribe)
.
T0 M6 (select torch)
G43 H0 (apply offsets for current tool)
G0 X0 Y0 (parking position)
M5 $-1 (end all)</code></pre>
</div></div>
<div class="paragraph"><p>It is a good idea to switch back to the torch at the end of the program before the final rapid parking move so the machine is always in the same state at idle.</p></div>
<div class="paragraph"><p>The user can switch between the torch and the scribe any number of times during a program by using the appropriate G-Codes.</p></div>
<div class="paragraph"><p>Issuing <strong>M3 S1</strong> (without $n) will cause the machine to behave as if an <strong>M3 $0 S1</strong> had been issued and issuing <strong>M5</strong> (without $n) will cause the machine to behave as if an <strong>M5 $0</strong> had been issued. This will control the torch firing by default in order to provide backward compatibility for previous G-Code files.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">If there is an existing manual tool change parameter set in the &lt;machine_name&gt;.hal file then PlasmaC will convert it to an automatic tool change.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="spotting">7.24. Spotting</h3>
<div class="paragraph"><p>To achieve spotting to mark the material prior to drilling etc., PlasmaC can pulse the torch for a short duration to mark the spot to drill.</p></div>
<div class="paragraph"><p>Spotting can be configured by following these steps:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Set the arc voltage threshold in the Spotting section of the <a href="plasmac-user-guide.html#config-panel">Config Panel</a>. Setting the voltage threshold to zero will cause the delay timer to begin immediately upon starting the torch. Setting the voltage threshold above zero will cause the delay timer to begin when the arc voltage reaches the threshold voltage.
</p>
</li>
<li>
<p>
Set the <strong>Time On</strong> in the Spotting section of the <a href="plasmac-user-guide.html#config-panel">Config Panel</a>. When the <strong>Time On</strong> timer has elapsed, the torch will turn off. Times are adjustable from 0 to 9999 milliseconds.
</p>
</li>
</ol></div>
<div class="paragraph"><p>The torch is then turned on in G-Code with the <strong>M3 $2 S1</strong> command which selects the plasma torch as a spotting tool.</p></div>
<div class="paragraph"><p>To enable spotting, see <a href="plasmac-user-guide.html#multi-tool">multiple tools</a>.</p></div>
<div class="paragraph"><p>LinuxCNC (PlasmaC) requires some motion between any <strong>M3</strong> and <strong>M5</strong> commands. For this reason, a minimal movement at a high speed is required to be programmed.</p></div>
<div class="paragraph"><p>An example G-Code is:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G21 (metric)
F99999 (high feed rate)
.
.
G0 X10 Y10
M3 $2 S1 (spotting on)
G91 (relative distance mode)
G1 X0.000001
G90 (absolute distance mode)
M5 $2 (spotting off)
.
.
G0 X0 Y0
G90
M2</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The <strong>high feed rate</strong> of 99999 is to ensure that the motion is at the machine&#8217;s highest feed rate.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">SOME PLASMA CUTTERS WILL NOT BE SUITABLE FOR THIS FEATURE.<br />
IT IS RECOMMENDED THAT THE USER CARRY OUT SOME TEST SPOTTING TO ENSURE THAT THE PLASMA CUTTER IS CAPABLE OF UTILIZING THIS FEATURE.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="pm_comms">7.25. Hypertherm PowerMax Communications</h3>
<div class="paragraph"><p>Communications can be established with a Hypertherm PowerMax plasma cutter that has a RS485 port. This feature enables the setting of <strong>Cut Mode</strong>, <strong>Cutting Amperage</strong> and <strong>Gas Pressure</strong> automatically from the <strong>Cut Parameters</strong> of the material file.</p></div>
<div class="paragraph"><p>If <strong>Gas Pressure</strong> is set to Zero then the PowerMax will automatically calculate the required pressure from the <strong>Cut Mode</strong>, <strong>Cut Current</strong>, torch type, and torch length.</p></div>
<div class="paragraph"><p>Changing the cutting mode will set the gas pressure to zero causing the machine to use its automatic gas pressure mode.</p></div>
<div class="paragraph"><p>The maximum and minimum values of these parameters are read from the plasma cutter and the related spin-buttons in the Cut Parameters are then limited by these values. Gas pressure can not be changed from zero until communications have been established.</p></div>
<div class="paragraph"><p>This feature is enabled by setting the correct port name for the PM_PORT variable in the [PLASMAC] section of the &lt;machine_name&gt;.ini file. If the PM_PORT variable is not set in the &lt;machine_name&gt;.ini file then the widgets associated with this feature will not be visible.</p></div>
<div class="paragraph"><p>Example showing enabling the Hypertherm PowerMax Communications on USB0:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>[PLASMAC]
PM_PORT = /dev/ttyusb0</code></pre>
</div></div>
<div class="paragraph"><p>If the user is unsure of the name of the port, there is a python script in the configuration directory that will show all available ports and can also be used to test communications with the plasma unit prior to enabling this feature in the PlasmaC GUI.</p></div>
<div class="paragraph"><p>To use the test script enter the following command into a terminal window:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>python ~/&lt;user_name&gt;/linuxcnc/configs/&lt;the_user_config&gt;/pmx_test.py</code></pre>
</div></div>
<div class="paragraph"><p>The gas pressure units display (psi or bar) is determined by the data received during initial setup of the communication link and is then shown next to the Gas Pressure spinbutton on the Run Panel.</p></div>
<div class="paragraph"><p>The PowerMax machine will go into remote mode after communications have been established and may only be controlled remotely (via the PlasmaC GUI) at this point. The connection can be validated by observing the PowerMax display.</p></div>
<div class="paragraph"><p>To switch the PowerMax back to local mode the user can either:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Disable PowerMax Comms from the Run panel
</p>
</li>
<li>
<p>
Close LinuxCNC which will put the PowerMax into local mode during shutdown.
</p>
</li>
<li>
<p>
Turn the PowerMax off for 30 seconds and then power it back on.
</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">If PowerMax communications is active then selecting <a href="plasmac-user-guide.html#mesh-mode">Mesh Mode</a> will automatically select CPA mode on the PowerMax unit.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">To use the PowerMax communications feature it is necessary to have the python pyserial module installed.<br />
If pyserial is not installed an error message will be displayed.</td>
</tr></table>
</div>
<div class="paragraph"><p>To install pyserial, enter the following command into a terminal window:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>sudo apt install python-serial</code></pre>
</div></div>
<div class="paragraph"><p>A typical <a href="plasmac-user-guide.html#rs485_connections">connection diagram</a> is shown in the appendix of this document as well as confirmed working interfaces.</p></div>
</div>
<div class="sect2">
<h3 id="_error_messages">7.26. Error Messages</h3>
<div class="paragraph"><p>There are a number of error messages printed by PlasmaC to inform the user of faults as they occur. The messages can be split into two groups, <strong>Critical</strong> and <strong>Warning</strong>.</p></div>
<div class="sect3">
<h4 id="_critical_errors">7.26.1. Critical Errors</h4>
<div class="paragraph"><p>Critical Errors will cause the running program to pause, and the operator will need to clear the cause of the error before proceeding.</p></div>
<div class="paragraph"><p>If the error was received during cutting then forward or reverse motion is allowed while the machine is paused to enable the user to reposition the machine prior to resuming the cut.</p></div>
<div class="paragraph"><p>When the error is cleared the program may be resumed.</p></div>
<div class="paragraph"><p>These errors indicate the corresponding sensor was activated during cutting:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>breakaway switch activated program is paused</strong>
</p>
</li>
<li>
<p>
<strong>float switch activated program is paused</strong>
</p>
</li>
<li>
<p>
<strong>ohmic probe activated program is paused</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>These errors indicate the corresponding sensor was activated before probing commenced:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ohmic probe detected before probing program is paused</strong>
</p>
</li>
<li>
<p>
<strong>float switch detected before probing program is paused</strong>
</p>
</li>
<li>
<p>
<strong>breakaway switch detected before probing program is paused</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>The Arc OK signal was lost during cutting motion, before the <strong>M5</strong> command was reached:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>valid arc lost program is paused</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>The Z axis reached the bottom limit before the work piece was detected:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>bottom limit reached while probing down program is paused</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>The work piece is too high for any safe rapid removes:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>material too high for safe traverse program is paused</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>One of these values in Cut Parameters in the Run Panel is invalid (For example: if they are set to zero):</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>invalid pierce height or invalid cut height or invalid cut volts program is paused</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>No arc has been detected after attempting to start the number of times indicated by Arc Start Attempts in the Config Panel:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>no arc detected after &lt;n&gt;d start attempts program is paused</strong>
</p>
</li>
<li>
<p>
<strong>no arc detected after &lt;n&gt;d start attempts manual cut is stopped</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>THC has caused the bottom limit to be reached while cutting:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>bottom limit reached while THC moving down program is paused</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>THC has caused the top limit to be reached while cutting:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>top limit reached while THC moving up program is paused</strong>
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_warning_errors">7.26.2. Warning errors</h4>
<div class="paragraph"><p>Warning errors will not pause a running program and are informational only.</p></div>
<div class="paragraph"><p>These errors indicate the corresponding sensor was activated before a probe test commenced:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>ohmic probe detected before probing probe test aborted</strong>
</p>
</li>
<li>
<p>
<strong>float switch detected before probing probe test aborted</strong>
</p>
</li>
<li>
<p>
<strong>breakaway switch detected before probing probe test aborted</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>This indicates that probe contact was lost before probing up to find the zero point:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>probe trip error while probing</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>This indicates the bottom limit was reached during a probe test:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>bottom limit reached while probe testing</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>This indicates that the safe height has been reduced due to THC raising the Z axis during cutting:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>safe traverse height has been reduced</strong>
</p>
</li>
</ul></div>
<div class="paragraph"><p>This indicates that the value for the Arc Voltage was invalid (NAN or INF) when PlasmaC launched.</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>invalid arc-voltage-in</strong>
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="update-plasmac">7.27. Updating PlasmaC</h3>
<div class="paragraph"><p>PlasmaC update notices are posted at: <a href="https://forum.linuxcnc.org/plasmac/37233-plasmac-updates">https://forum.linuxcnc.org/plasmac/37233-plasmac-updates</a></p></div>
<div class="paragraph"><p><strong>Users are strongly encouraged to create a Username and subscribe to the above thread to receive update notices.</strong></p></div>
<div class="sect3">
<h4 id="_standard_update">7.27.1. Standard Update</h4>
<div class="paragraph"><p>For a standard ISO installation, LinuxCNC will only be updated when a new minor release has been released. PlasmaC will then automatically update its configuration the first time it is run after a LinuxCNC update.</p></div>
<div class="paragraph"><p>LinuxCNC is normally updated by entering the following commands into a terminal window (one at a time):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>sudo apt update
sudo apt dist-upgrade</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_continuous_update">7.27.2. Continuous Update</h4>
<div class="paragraph"><p>Enhancements and bug fixes will not be available on a standard installation until a new minor release of LinuxCNC has been released. If the user wishes to update whenever a new PlasmaC version has been pushed, they could use the LinuxCNC Buildbot repository rather than the standard LinuxCNC repository by following the instructions at: <a href="http://buildbot.linuxcnc.org/">http://buildbot.linuxcnc.org/</a></p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plasmac_advanced_topics">8. PlasmaC Advanced Topics</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="custom-user-buttons">8.1. Custom User Buttons</h3>
<div class="paragraph"><p>There are buttons available in the PlasmaC GUI that are programmable by adding commands in the &lt;machine_name&gt;.ini file. The number of buttons varies by whether the user chose to use PlasmaC with Axis or Gmoccapy.</p></div>
<div class="paragraph"><p>Five buttons are available in the main window of the Axis GUI, numbered 1-5 from left to right.</p></div>
<div class="paragraph"><p>Four buttons are available in the main window of the Gmoccapy GUI, numbered 1-4 from top to bottom.</p></div>
<div class="paragraph"><p>There are an additional ten buttons available in the Extras panel, numbered 10-19 from top left to bottom right.</p></div>
<div class="paragraph"><p>All &lt;machine_name&gt;.ini file settings for the buttons are found in the [PLASMAC] section.</p></div>
<div class="sect3">
<h4 id="_button_names">8.1.1. Button Names</h4>
<div class="paragraph"><p>The text that appears on the button is set the following way:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_NAME = HAL Show</code></pre>
</div></div>
<div class="paragraph"><p>Where n is the button number and <strong>HAL Show</strong> is the text.</p></div>
<div class="paragraph"><p>For text on multiple lines in the Axis GUI, split the text with a \</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_NAME = HAL\Show</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_button_code">8.1.2. Button Code</h4>
<div class="paragraph"><p>Buttons can run <a href="plasmac-user-guide.html#button-cmds">External Commands</a>, <a href="plasmac-user-guide.html#button-code">G-Code</a> or any of six special functions, <a href="plasmac-user-guide.html#button-toggle">Toggle HAL Pin</a>, <a href="plasmac-user-guide.html#button-probe">Probe Test</a>, <a href="plasmac-user-guide.html#button-ohmic">Ohmic Test</a>, <a href="plasmac-user-guide.html#button-cut">Cut Type</a>, <a href="plasmac-user-guide.html#button-consumables">Change Consumables</a>, or <a href="plasmac-user-guide.html#button-touchoff">Touch Off X &amp; Y</a>.</p></div>
<div class="paragraph"><p>In addition to this, buttons 10-19 in the Extras panel can run the special functions <a href="plasmac-user-guide.html#button-recovery">Cut Recovery</a>, <a href="plasmac-user-guide.html#button-load">Load G-Code</a> program as well as display a custom image instead of the button name.</p></div>
<div class="paragraph" id="button-cmds"><p><strong><span class="underline">External Commands</span></strong></p></div>
<div class="paragraph"><p>To run an external command, the command is preceded by a % character.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = %halshow</code></pre>
</div></div>
<div class="paragraph" id="button-code"><p><strong><span class="underline">G-Code</span></strong></p></div>
<div class="paragraph"><p>To run G-Code, just enter the code to be run.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = G0 X100</code></pre>
</div></div>
<div class="paragraph"><p>To run an existing subroutine.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = o&lt;my_subroutine&gt; call</code></pre>
</div></div>
<div class="paragraph"><p>&lt;machine_name&gt;.ini file variables can be entered by using {} (a space must be placed after the })</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = G0 X{JOINT_0 HOME} Y1
BUTTON_n_CODE = G53 G0 Z[{AXIS_Z MAX_LIMIT} - 1.001]</code></pre>
</div></div>
<div class="paragraph"><p>Multiple codes can be run by separating the codes with a \ symbol. The exception is the special commands which are required to be a single command per button.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = G0 X0 Y0 \ G1 X5 \ G1 Y5</code></pre>
</div></div>
<div class="paragraph"><p>External commands and G-Code may be mixed on the same button.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = %halshow \ g0x.5y.5 \ %halmeter</code></pre>
</div></div>
<div class="paragraph" id="button-toggle"><p><strong><span class="underline">Toggle HAL Pin</span></strong></p></div>
<div class="paragraph"><p>The following code will allow the user to use a button to invert the current state of a HAL bit pin (this code is required to be used as a single command and may only control one HAL bit pin per button):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = toggle-halpin my-hal-pin-name</code></pre>
</div></div>
<div class="paragraph"><p>After setting the code, upon clicking, the button will turn green, invert the pin state, and stay "latched" until it is clicked again. Clicking again will return the button to the original color and invert the pin state.</p></div>
<div class="paragraph" id="button-probe"><p><strong><span class="underline">Probe Test</span></strong></p></div>
<div class="paragraph"><p>PlasmaC will begin a probe and when the material is detected, the Z axis will rise to the Pierce Height currently displayed in the Cut Parameters section of the Run Panel. PlasmaC will then wait in this state for the time specified (in seconds) before returning the Z axis to the starting position. An example of a 30 second delay is below.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = probe-test 30</code></pre>
</div></div>
<div class="paragraph" id="button-ohmic"><p><strong><span class="underline">Ohmic Test</span></strong></p></div>
<div class="paragraph"><p>PlasmaC will enable the Ohmic Probe Enable output signal and if the Ohmic Probe input is sensed, the LED indicator in the Monitor Panel will light. The main purpose of this is to allow a quick test for a shorted torch tip.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = ohmic-test</code></pre>
</div></div>
<div class="paragraph" id="button-cut"><p><strong><span class="underline">Cut Type</span></strong></p></div>
<div class="paragraph"><p>This button if selected will toggle between the two <a href="plasmac-user-guide.html#cut-types">cut types</a>, Pierce and Cut (default cutting mode) or Pierce Only.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = cut-type</code></pre>
</div></div>
<div class="paragraph" id="button-consumables"><p><strong><span class="underline">Change Consumables</span></strong></p></div>
<div class="paragraph"><p>Pressing this button moves the torch to the specified coordinates when the machine is paused to allow the user easy access to change the torch consumables.</p></div>
<div class="paragraph"><p>Valid entries are Xnnn Ynnn Fnnn. Feed Rate (F) is mandatory and at least one of the X or Y coordinates are required.</p></div>
<div class="paragraph"><p>The X and Y coordinates are in absolute machine coordinates. If X or Y are missing then the current coordinate for that axis will be used.</p></div>
<div class="paragraph"><p>There are three methods to return to the previous coordinates:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Press the Change Consumables button again - the torch will return to the original coordinates and the machine will wait in this position for the user to resume the program.
</p>
</li>
<li>
<p>
Resume the program - the torch to return to the original coordinates and the program will resume.
</p>
</li>
<li>
<p>
Stop the program - the torch to return to the original coordinates and the program will abort.
</p>
</li>
</ol></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = change-consumables X10 Y10 F1000</code></pre>
</div></div>
<div class="paragraph" id="button-touchoff"><p><strong><span class="underline">Touch Off X &amp; Y</span></strong></p></div>
<div class="paragraph"><p>Buttons 1-19 are capable of touching off (zeroing) the X and Y axes and moving Z to an appropriate height for the start of a g-code program run.</p></div>
<div class="paragraph"><p>If the user is using the Axis GUI, they may also add a command to run a routine that will reload the program, clear the live plot, and re-zoom the preview window. This will allow the user to easily see where the new zero coordinates are with respect to the currently loaded G-Code program.</p></div>
<div class="paragraph"><p>To set the X and Y axes to zero:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G10 L20 P0 X0 Y0</code></pre>
</div></div>
<div class="paragraph"><p>To move the Z axis away from the MAXIMUM_LIMIT by a small amount to prepare for cutting (5.0mm in the following example):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G53 G0 Z[{AXIS_Z MAX_LIMIT} - 5.0]</code></pre>
</div></div>
<div class="paragraph"><p>To refresh the preview window (Axis GUI only):</p></div>
<div class="listingblock">
<div class="content">
<pre><code>%halcmd setp axisui.refresh 1</code></pre>
</div></div>
<div class="paragraph"><p>Combined to perform all 3 tasks:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>G10 L20 P0 X0 Y0 \ G53 G0 Z[{AXIS_Z MAX_LIMIT} - 5.0] \ %halcmd setp axisui.refresh 1</code></pre>
</div></div>
<div class="paragraph" id="button-recovery"><p><strong><span class="underline">Cut Recovery</span></strong></p></div>
<div class="paragraph"><p>Pressing this button brings up the <a href="plasmac-user-guide.html#cut-recovery">cut recovery</a> dialog which will allow the user to move the torch off of the cut path to find a suitable piece of material to restart the cut from. This function is only available from the Extras panel and the button is only valid while paused.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = cut-recovery</code></pre>
</div></div>
<div class="paragraph" id="button-load"><p><strong><span class="underline">Load</span></strong></p></div>
<div class="paragraph"><p>Buttons 10-19 in the Extras Panel are able to load a G-Code program by using the following format:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_CODE = load path/to/G-Code.ngc</code></pre>
</div></div>
<div class="paragraph"><p>The path is relative to the directory specified by <strong>PROGRAM_PREFIX</strong> in the &lt;machine_name&gt;.ini file. This is usually ~/linuxcnc/nc_files. For example: If the user&#8217;s G-Code file was in a subdirectory of the <strong>PROGRAM_PREFIX</strong> directory named <strong>plasma</strong> then the entry would be <strong>plasma/G-Code.ngc</strong>.</p></div>
</div>
<div class="sect3">
<h4 id="_button_image">8.1.3. Button Image</h4>
<div class="paragraph"><p>Buttons 10-19 in the Extras Panel are able to display an image instead of text. If an image is specified then this will take precedence and the image will be displayed instead of the button name.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>BUTTON_n_IMAGE = path/to/image.png</code></pre>
</div></div>
<div class="paragraph"><p>The path is relative to the configuration directory, so if the image was in a sub-directory of the configuration directory named <strong>images</strong> then the entry would be <strong>images/image.png</strong>.</p></div>
<div class="paragraph"><p>All images are displayed in a 60 x 60 format.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_test_panel">8.2. Test Panel</h3>
<div class="paragraph"><p>There is a directory named <strong>test</strong> in the machine&#8217;s configuration folder which has a simple Test Panel and associated python file which can be used to test the example configuration as referenced in the &lt;machine_name&gt;.ini file.</p></div>
<div class="paragraph"><p>If the user wishes to use this in a sim configuration then the user will need to create a link to this directory and edit the &lt;machine_name&gt;.ini file to suit.</p></div>
</div>
<div class="sect2">
<h3 id="_tuning_void_sensing">8.3. Tuning Void Sensing</h3>
<div class="paragraph"><p>Void sensing may be further tuned by adjusting the required number of consecutive times that the threshold has been exceeded before applying the void lock to the THC.</p></div>
<div class="paragraph"><p>The parameter for adjusting this is named plasmac.kerf-errors-max and the default value is 2. To change this value, add the parameter and the required value to the &lt;machine_name&gt;_connections.hal file. The following example would set the required number of consecutive times to exceed the threshold to 3:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>setp plasmac.kerf-error-max 3</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_lost_arc_delay">8.4. Lost Arc Delay</h3>
<div class="paragraph"><p>Some plasma power sources/machine configurations may lose the Arc OK signal either momentarily during a cut, or permanently near the end of a cut causing PlasmaC to pause the program and report a "valid arc lost" error. There is a HAL pin named <strong>plasmac.arc-lost-delay</strong> that may be used to set a delay (in seconds) that will prevent a paused program/error if the lost Arc OK signal is regained, or the <strong>M5</strong> command is reached before the set delay period expires.</p></div>
<div class="paragraph"><p>The following code would set a delay of 0.1 seconds:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>setp plasmac.arc-lost-delay 0.1</code></pre>
</div></div>
<div class="paragraph"><p>It is recommended that the user set this parameter in the &lt;machine_name&gt;_connections.hal file.</p></div>
<div class="paragraph"><p>This setting should only be used if the user experiences the above symptoms. It should also be noted that the user could use the appropriate <a href="plasmac-user-guide.html#ignore-ok">Ignore Arc OK</a> G-Code commands to achieve a similar result.</p></div>
</div>
<div class="sect2">
<h3 id="_plasmac_state_outputs">8.5. PlasmaC State Outputs</h3>
<div class="paragraph"><p>PlasmaC has a HAL pin named <strong>plasmac.state-out</strong> which can be used to interface with user-coded components to provide PlasmaC&#8217;s current state.</p></div>
<div class="paragraph"><p>The different states PlasmaC could encounter are as follows:</p></div>
<div class="tableblock">
<table rules="all"
width="25%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>State</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">0</p></td>
<td align="left" valign="top"><p class="table">IDLE</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">1</p></td>
<td align="left" valign="top"><p class="table">PROBE_HEIGHT</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">2</p></td>
<td align="left" valign="top"><p class="table">PROBE_DOWN</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">3</p></td>
<td align="left" valign="top"><p class="table">PROBE_UP</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">4</p></td>
<td align="left" valign="top"><p class="table">ZERO_HEIGHT</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">5</p></td>
<td align="left" valign="top"><p class="table">PIERCE_HEIGHT</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">6</p></td>
<td align="left" valign="top"><p class="table">TORCH_ON</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">7</p></td>
<td align="left" valign="top"><p class="table">ARC_OK</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">8</p></td>
<td align="left" valign="top"><p class="table">PIERCE_DELAY</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">9</p></td>
<td align="left" valign="top"><p class="table">PUDDLE_JUMP</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">10</p></td>
<td align="left" valign="top"><p class="table">CUT_HEIGHT</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">11</p></td>
<td align="left" valign="top"><p class="table">CUT</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">12</p></td>
<td align="left" valign="top"><p class="table">PAUSE_AT_END</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">13</p></td>
<td align="left" valign="top"><p class="table">SAFE_HEIGHT</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">14</p></td>
<td align="left" valign="top"><p class="table">MAX_HEIGHT</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">15</p></td>
<td align="left" valign="top"><p class="table">FINISH</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">16</p></td>
<td align="left" valign="top"><p class="table">TORCHPULSE</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">17</p></td>
<td align="left" valign="top"><p class="table">PAUSED_MOTION</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">18</p></td>
<td align="left" valign="top"><p class="table">OHIMC_TEST</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">19</p></td>
<td align="left" valign="top"><p class="table">PROBE_TEST</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">20</p></td>
<td align="left" valign="top"><p class="table">SCRIBING</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">21</p></td>
<td align="left" valign="top"><p class="table">CONSUMABLE_CHANGE_ON</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">22</p></td>
<td align="left" valign="top"><p class="table">CONSUMABLE_CHANGE_OFF</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">23</p></td>
<td align="left" valign="top"><p class="table">CUT_RECOVERY_ON</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">24</p></td>
<td align="left" valign="top"><p class="table">CUT_RECOVERY_OFF</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">25</p></td>
<td align="left" valign="top"><p class="table">DEBUG</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>The DEBUG state is for testing purposes only and will not normally be encountered.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix">9. Appendix</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_example_configurations">9.1. Example Configurations</h3>
<div class="paragraph"><p>There are example configuration files for both the Axis and Gmoccapy GUIs which use the PlasmaC HAL component to simulate plasma cutting machines.</p></div>
<div class="ulist"><ul>
<li>
<p>
metric_plasmac.ini
</p>
</li>
<li>
<p>
imperial_plasmac.ini
</p>
</li>
</ul></div>
<div class="paragraph"><p>If the user has copied any example configs to the ~/linuxcnc/configs directory then they are able to be updated by running the Configurator in Update mode. This will replace any copied PlasmaC system file with a link to the latest version the user has updated to.</p></div>
</div>
<div class="sect2">
<h3 id="_ngc_samples">9.2. NGC Samples</h3>
<div class="paragraph"><p>There are some sample G-Code files in nc_files/plasmac.</p></div>
</div>
<div class="sect2">
<h3 id="_change_type_of_linuxcnc_installation">9.3. Change Type Of LinuxCNC Installation</h3>
<div class="paragraph"><p>Before changing the type of installation, the existing PlasmaC installation needs to be updated to the latest version. If PlasmaC is not at the latest version then changing the installation type may corrupt the existing PlasmaC configuration.</p></div>
<div class="paragraph"><p>It is recommended that a <a href="plasmac-user-guide.html#plasmac-backup">backup</a> copy of the existing PlasmaC configuration is made before proceeding.</p></div>
<div class="paragraph"><p>If the user has changed the type of LinuxCNC installation from a Package installation to a Run In Place or vice versa the user will need to run the Configurator from the new LinuxCNC installation directory, NOT from the ~/linuxcnc/configs directory. This is required to reset the file links for the correct installation type.</p></div>
<div class="paragraph"><p>Enter the following command into a terminal window do one of the following:</p></div>
<div class="paragraph"><p>Reset to a new Package installation:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>python /usr/share/doc/linuxcnc/examples/sample-configs/by_machine/plasmac/configurator.py</code></pre>
</div></div>
<div class="paragraph"><p>Reset to a new Run In Place installation:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>python ~/linuxcnc-dev/configs/by_machine/plasmac/configurator.py</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_plasmac_specific_g_codes">9.4. PlasmaC Specific G-Codes</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Code</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Begin <a href="plasmac-user-guide.html#multi-tool">cut</a></p></td>
<td align="left" valign="top"><p class="table">M3 $0 S1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">End <a href="plasmac-user-guide.html#multi-tool">cut</a></p></td>
<td align="left" valign="top"><p class="table">M5 $0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Begin <a href="plasmac-user-guide.html#scribe">scribe</a></p></td>
<td align="left" valign="top"><p class="table">M3 $1 S1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">End <a href="plasmac-user-guide.html#scribe">scribe</a></p></td>
<td align="left" valign="top"><p class="table">M5 $1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Begin <a href="plasmac-user-guide.html#spotting">center spot</a></p></td>
<td align="left" valign="top"><p class="table">M3 $2 S1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">End <a href="plasmac-user-guide.html#spotting">center spot</a></p></td>
<td align="left" valign="top"><p class="table">M5 $2</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">End all the above</p></td>
<td align="left" valign="top"><p class="table">M5 $-1</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Select a <a href="plasmac-user-guide.html#material-handling">material</a></p></td>
<td align="left" valign="top"><p class="table">M190 Pn<br />
    n denotes the material number</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Wait for <a href="plasmac-user-guide.html#material-handling">material</a> change confirmation</p></td>
<td align="left" valign="top"><p class="table">M66 P3 L3 Qn<br />
    n is delay time (in seconds)
    This value may need to be increased for very
    large material files</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Set feed rate from <a href="plasmac-user-guide.html#material-handling">material</a></p></td>
<td align="left" valign="top"><p class="table">F#&lt;_hal[plasmac.cut-feed-rate]&gt;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Enable <a href="plasmac-user-guide.html#ignore-ok">Ignore Arc OK</a></p></td>
<td align="left" valign="top"><p class="table">M62 P1 (synchronized with motion)<br />
    M64 P1 (immediate)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Disable <a href="plasmac-user-guide.html#ignore-ok">Ignore Arc OK</a></p></td>
<td align="left" valign="top"><p class="table">M63 P1 (synchronized with motion)<br />
    M65 P1 (immediate)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Disable <a href="plasmac-user-guide.html#thc">THC</a></p></td>
<td align="left" valign="top"><p class="table">M62 P2 (synchronized with motion)<br />
    M64 P2 (immediate)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Enable <a href="plasmac-user-guide.html#thc">THC</a></p></td>
<td align="left" valign="top"><p class="table">M63 P2 (synchronized with motion)<br />
    M65 P2 (immediate)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Disable <a href="plasmac-user-guide.html#overcut">Torch</a></p></td>
<td align="left" valign="top"><p class="table">M62 P3 (synchronized with motion)<br />
    M64 P3 (immediate)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Enable <a href="plasmac-user-guide.html#overcut">Torch</a></p></td>
<td align="left" valign="top"><p class="table">M63 P3 (synchronized with motion)<br />
    M65 P3 (immediate)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Set <a href="plasmac-user-guide.html#velocity_thc">velocity</a> to a percentage of feed rate</p></td>
<td align="left" valign="top"><p class="table">M67 E3 Qn (synchronized with motion)<br />
    M68 E3 Qn (immediate)<br />
    n is the percentage to set<br />
    10 is the minimum, below this will be set to 100%<br />
    100 is the maximum, above this will be set to 100%
    <strong>It is recommended to have M68 E3 Q0 in preamble and postamble</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cutter <a href="plasmac-user-guide.html#cutter-compensation">compensation</a> - left of path</p></td>
<td align="left" valign="top"><p class="table">G41.1 D#&lt;_hal[plasmac_run.kerf-width-f]&gt;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cutter <a href="plasmac-user-guide.html#cutter-compensation">compensation</a> - right of path</p></td>
<td align="left" valign="top"><p class="table">G42.1 D#&lt;_hal[plasmac_run.kerf-width-f]&gt;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cutter <a href="plasmac-user-guide.html#cutter-compensation">compensation</a> off</p></td>
<td align="left" valign="top"><p class="table">G40<br />
    <strong>Note that M62 through M68 are invalid while cutter compensation is on</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut <a href="plasmac-user-guide.html#hole-cutting">holes</a> at 60% feed rate</p></td>
<td align="left" valign="top"><p class="table">#&lt;holes&gt; = 1<br />
    for holes less than 32mm (1.26") diameter</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut <a href="plasmac-user-guide.html#hole-cutting">holes</a> at 60% feed rate,<br />
turn torch off at hole end,<br />
continue hole path for overcut</p></td>
<td align="left" valign="top"><p class="table">#&lt;holes&gt; = 2<br />
    for holes less than 32mm (1.26") diameter
    overcut length = 4mm (0.157")</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut <a href="plasmac-user-guide.html#hole-cutting">holes</a> and arcs at 60% feed rate</p></td>
<td align="left" valign="top"><p class="table">#&lt;holes&gt; = 3<br />
    for holes less than 32mm (1.26") diameter<br />
    for arcs less than 16mm (0.63") radius</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut <a href="plasmac-user-guide.html#hole-cutting">holes</a> and arcs at 60% feed rate,<br />
turn torch off at hole end,<br />
continue hole path for overcut</p></td>
<td align="left" valign="top"><p class="table">#&lt;holes&gt; = 4<br />
    for holes less than 32mm (1.26") diameter<br />
    for arcs less than 16mm (0.63") radius<br />
    overcut length = 4mm (0.157")</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Specify <a href="plasmac-user-guide.html#hole-cutting">hole</a> diameter for<br />
#&lt;holes&gt; = 1-4</p></td>
<td align="left" valign="top"><p class="table">#&lt;h_diameter&gt; = n (n is the diameter, use the same units system as the rest of the G-Code file)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Specify <a href="plasmac-user-guide.html#hole-cutting">hole</a> velocity for<br />
#&lt;holes&gt; = 1-4</p></td>
<td align="left" valign="top"><p class="table">#&lt;h_velocity&gt; = n (n is the percentage, set the percentage of the current feed rate)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Specify <a href="plasmac-user-guide.html#overcut">overcut</a> length</p></td>
<td align="left" valign="top"><p class="table">#&lt;oclength&gt; = n (n is the length, use the same units system as the rest of the G-Code file)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Specify <a href="plasmac-user-guide.html#cut-types">pierce-only</a> mode</p></td>
<td align="left" valign="top"><p class="table">#&lt;pierce-only&gt; = n (n is the mode, 0=normal cut mode, 1=pierce only mode)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Create or edit materials.<br />
options:<br />
1 - Create temporary default<br />
2 - Add if not existing<br />
3 - Overwrite if existing else add new<br /></p></td>
<td align="left" valign="top"><p class="table">mandatory parameters:<br />
    (o=&lt;option&gt;, nu=&lt;nn&gt;, na=&lt;ll&gt;, ph=&lt;nn&gt;, pd=&lt;nn&gt;, ch=&lt;nn&gt;, fr=&lt;nn&gt;)<br />
    optional parameters:<br />
    (kw=&lt;nn&gt;, th=&lt;nn&gt;, ca=&lt;nn&gt;, cv=&lt;nn&gt;, pe=&lt;nn&gt;, gp=&lt;nn&gt;, cm=&lt;nn&gt;, jh=&lt;nn&gt;, jd=&lt;nn&gt;)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_plasmac_gcode_examples">9.5. PlasmaC Gcode Examples</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Description</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Example</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Select material and do a normal cut</p></td>
<td align="left" valign="top"><p class="table">M190 P3<br />
    M66 P3 L3 Q1<br />
    F#&lt;_hal[plasmac.cut-feed-rate]&gt;<br />
    M3 $0 S1<br />
    .<br />
    .<br />
    M5 $0</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Set velocity to 100% of CutFeedRate</p></td>
<td align="left" valign="top"><p class="table">M67 E3 Q0 or M67 E3 Q100</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Set velocity to 60% of CutFeedRate</p></td>
<td align="left" valign="top"><p class="table">M67 E3 Q60</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Set velocity to 40% of CutFeedRate</p></td>
<td align="left" valign="top"><p class="table">M67 E3 Q40</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut a hole with 60% reduced speed using velocity setting</p></td>
<td align="left" valign="top"><p class="table">G21 (metric)<br />
    G64 P0.05<br />
    M52 P1 (allow paused motion)<br />
    F#&lt;_hal[plasmac.cut-feed-rate]&gt;<br />
    G0 X10 Y10<br />
    M3 $0 S1 (start cut)<br />
    G1 X0<br />
    M67 E3 Q60 (reduce feed rate to 60%)<br />
    G3 I10 (the hole)<br />
    M67 E3 Q100 (restore feed rate to 100%)<br />
    M5 $0 (end cut)<br />
    G0 X0 Y0<br />
    M2 (end job)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut a hole with 60% reduced speed using the #&lt;holes&gt; command</p></td>
<td align="left" valign="top"><p class="table">G21 (metric)<br />
    G64 P0.05<br />
    M52 P1 (allow paused motion)<br />
    #&lt;holes&gt; = 1 (velocity reduction for holes)<br />
    F#&lt;_hal[plasmac.cut-feed-rate]&gt;<br />
    G0 X10 Y10<br />
    M3 $0 S1 (start cut)<br />
    G1 X0<br />
    G3 I10 (the hole)<br />
    M5 $0 (end cut)<br />
    G0 X0 Y0<br />
    M2 (end job)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut a hole with overcut using torch disable</p></td>
<td align="left" valign="top"><p class="table">G21 (metric)<br />
    G64 P0.05<br />
    M52 P1 (allow paused motion)<br />
    F#&lt;_hal[plasmac.cut-feed-rate]&gt;<br />
    G0 X10 Y10<br />
    M3 $0 S1 (start cut)<br />
    G1 X0<br />
    M67 E3 Q60 (reduce feed rate to 60%)<br />
    G3 I10 (the hole)<br />
    M62 P3 (turn torch off)<br />
    G3 X0.8 Y6.081 I10 (continue motion for 4mm)<br />
    M63 P3 (allow torch to be turned on)<br />
    M67 E3 Q0 (restore feed rate to 100%)<br />
    M5 $0 (end cut)<br />
    G0 X0 Y0<br />
    M2 (end job)<br /></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut a hole with overcut using the #&lt;holes&gt; command</p></td>
<td align="left" valign="top"><p class="table">G21 (metric)<br />
    G64 P0.05<br />
    M52 P1 (allow paused motion)<br />
    #&lt;holes&gt; = 2 (overcut for holes)<br />
    F#&lt;_hal[plasmac.cut-feed-rate]&gt;<br />
    G0 X10 Y10<br />
    M3 $0 S1 (start cut)<br />
    G1 X0<br />
    G3 I10 (the hole)<br />
    M5 $0 (end cut)<br />
    G0 X0 Y0<br />
    M2 (end job)<br /></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Cut a hole with 6.5mm overcut using the #&lt;holes&gt; command</p></td>
<td align="left" valign="top"><p class="table">G21 (metric)<br />
    G64 P0.05<br />
    M52 P1 (allow paused motion)<br />
    #&lt;holes&gt; = 2 (overcut for holes)<br />
    &lt;oclength&gt; = 6.5 (6.5mm overcut length)<br />
    F&lt;_hal[plasmac.cut-feed-rate]&gt;<br />
    G0 X10 Y10<br />
    M3 $0 S1 (start cut)<br />
    G1 X0<br />
    G3 I10 (the hole)<br />
    M5 $0 (end cut)<br />
    G0 X0 Y0<br />
    M2 (end job)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Select scribe and select torch at end of scribing</p></td>
<td align="left" valign="top"><p class="table">.<br />
    .<br />
    M52 P1 (paused motion on)<br />
    F#&lt;_hal[plasmac.cut-feed-rate]&gt;<br />
    T1 M6 (select scribe)<br />
    G43 H0 (apply offsets)<br />
    M3 $1 S1 (start plasmac with scribe)<br />
    .<br />
    .<br />
    T0 M6 (select torch)<br />
    G43 H0 (apply offsets)<br />
    G0 X0 Y0 (parking position)<br />
    M5 $1 (end)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Hole center spotting.<br /></p></td>
<td align="left" valign="top"><p class="table">(Requires a small motion command or nothing happens)<br />
    G21 (metric)<br />
    F99999 (high feed rate)<br />
    G0 X10 Y10<br />
    M3 $2 S1 (spotting on)<br />
    G91 (relative distance mode)<br />
    G1 X0.000001<br />
    G90 (absolute distance mode)<br />
    M5 $2 (spotting off)<br />
    G0 X0 Y0<br />
    G90<br />
    M2<br /></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Create temporary default material</p></td>
<td align="left" valign="top"><p class="table">(o=1, nu=2, na=5mm Mild Steel 40A, ph=3.1, pd=0.1, ch=0.75, fr=3000)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Edit material, if not existing create a new one</p></td>
<td align="left" valign="top"><p class="table">(o=3, nu=2, na=5mm Mild Steel 40A, ph=3.1, pd=0.1, ch=0.75, fr=3000, kw=1.0)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="mesa-thcad">9.6. Mesa THCAD</h3>
<div class="paragraph"><p>The Mesa THCAD is the most common way of obtaining the arc voltage from a plasma cutter. The THCAD may be used for parallel port configurations or for configurations using Mesa Electronics hardware.</p></div>
<div class="paragraph"><p>The preferred method is to setup the required parameters for the THCAD in the &lt;machine_name&gt;_connections.hal file.</p></div>
<div class="sect3">
<h4 id="_parallel_port_config">9.6.1. Parallel Port Config</h4>
<div class="paragraph"><p>An example parallel port config using a <a href="http://linuxcnc.org/docs/html/man/man9/encoder.9.html">software encoder</a>.</p></div>
<div class="paragraph"><p>THCAD jumper settings <strong>UNIPOLAR</strong> and <strong>F/64</strong></p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If the user&#8217;s computer has good latency then they may be able to use <strong>F/32</strong></td>
</tr></table>
</div>
<div class="listingblock">
<div class="content">
<pre><code>loadrt encoder num_chan=1
setp encoder.0.counter−mode 1
setp encoder.0.position−scale -1
addf encoder.update-counters base-thread
addf encoder.capture-position servo-thread
net arc-voltage-raw parport.1.pin-04-in encoder.0.phase-A</code></pre>
</div></div>
<div class="paragraph"><p>The user then needs to note that the <strong>Arc Voltage HAL Pin</strong> entry in the PlasmaC Configurator will be:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>encoder.0.velocity</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_mesa_7i96_config">9.6.2. Mesa 7i96 Config:</h4>
<div class="paragraph"><p>An example Mesa 7i96 config using the onboard hardware encoder is shown below. Other Mesa hardware will be similar but with a different board identifiers.</p></div>
<div class="paragraph"><p>THCAD jumper settings <strong>UNIPOLAR</strong> and <strong>F/32</strong></p></div>
<div class="listingblock">
<div class="content">
<pre><code>setp  hm2_7i96.0.encoder.00.scale -1
setp  hm2_7i96.0.encoder.00.filter 1
setp  hm2_7i96.0.encoder.00.counter-mode 1</code></pre>
</div></div>
<div class="paragraph"><p>The user then needs to note that the <strong>Arc Voltage HAL Pin</strong> entry in the PlasmaC Configurator will be:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>hm2_7i96.0.encoder.00.velocity</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">There is a <a href="plasmac-user-guide.html#lowpass">lowpass filter</a> available which may be useful if using a THCAD and there is a lot of noise on the returned arc voltage.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_obtaining_the_divider_ratio">9.6.3. Obtaining The Divider Ratio</h4>
<div class="paragraph"><p><strong><span class="underline">THCAD-10</span></strong></p></div>
<div class="paragraph"><p>If connecting to a plasma CNC port then the divider ratio is selected from the plasma machine.</p></div>
<div class="paragraph"><p>If connecting to the plasma machines full arc voltage then a common setup is to use a 1 Megohm resistor from arc negative to THCAD negative and a 1 Megohm resistor from arc positive to THCAD positive. This gives a full scale reading of 210V. The THCAD can handle over-voltages up to 500V indefinitely.</p></div>
<div class="paragraph"><p>To get the divider ratio use (R1 + R2 + 100000) / 100000. An example with the above resistance values would be: (1000000 + 1000000 + 100000) / 100000, giving a ratio of 21.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">IF THE USER IS USING A HF START PLASMA POWER SUPPLY THEN EACH OF THESE RESISTANCES SHOULD BE MADE UP OF SEVERAL HIGH VOLTAGE RESISTORS.</td>
</tr></table>
</div>
<div class="paragraph"><p><strong><span class="underline">THCAD-300</span></strong></p></div>
<div class="paragraph"><p>This is connected to the plasma machines full arc voltage and the divider ratio = 1</p></div>
</div>
<div class="sect3">
<h4 id="calibration-values">9.6.4. Calibration Values</h4>
<div class="paragraph"><p>These values are used to obtain starting values for Voltage Offset and Voltage Scale in the Config Panel.</p></div>
<div class="paragraph"><p>They are located on the rear of the THCAD via a calibration sticker showing:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>    THCAD-nnn

 0V  121.1 kHz
 5V  925.3 kHz</code></pre>
</div></div>
<div class="paragraph"><p>or similar values, these are the frequencies generated by the THCAD for 0 volts and full scale volts respectively.</p></div>
<div class="paragraph"><p>The <strong>Voltage Scale</strong> and <strong>Voltage Offset</strong> can now be calculated manually, as shown below, or by using <a href="https://jscalc.io/calc/NTr5QDX6WgMThBVb">this online calulator</a>.</p></div>
<div class="paragraph"><p><strong><span class="underline">Voltage Scale</span></strong></p></div>
<div class="paragraph"><p>Use the formula:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>Divider_Ratio / ((THCAD_Full_Scale_Frequency - THCAD_0V_Frequency) / THCAD_Frequency_Divider / THCAD_Full_Scale_Voltage)</code></pre>
</div></div>
<div class="paragraph"><p>This result will be used for setting <strong>Voltage Scale</strong> in the Config Panel when setting up the configuration.</p></div>
<div class="paragraph"><p>THCAD-10 example with a jumper setting of F/32 would be:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>21 / ((925300 - 121100) / 32 / 10) = 0.00835613</code></pre>
</div></div>
<div class="paragraph"><p>For the calculation above, 21 comes from the divider calculation example, 32 is the jumper setting <strong>F/32</strong>, and 10 is the full scale reading of the THCAD card itself.</p></div>
<div class="paragraph"><p>THCAD-300 example would be:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>1 / ((925300 - 121100) / 32 / 300) = 0.01193732</code></pre>
</div></div>
<div class="paragraph"><p>For our calculation above, 1 is the divider ratio, 32 is the jumper setting <strong>F/32</strong>, and 300 is the full scale reading of the THCAD card itself.</p></div>
<div class="paragraph"><p><strong><span class="underline">Voltage Offset</span></strong></p></div>
<div class="paragraph"><p>Use the formula:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>THCAD_0V_Frequency / THCAD_Frequency_Divider</code></pre>
</div></div>
<div class="paragraph"><p>This result will be used for setting <strong>Voltage Offset</strong> in the Config Panel when setting up the configuration.</p></div>
<div class="paragraph"><p>The THCAD-10 and THCAD-300 examples above would be:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>121100 / 32 = 3784.375</code></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="rs485_connections">9.7. RS485 Connections</h3>
<div class="paragraph"><p>Hypertherm RS485 Wiring Diagram (wire colors inside the Hypertherm in parentheses):</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><strong>Connection at Machine Pin #</strong></p></td>
<td align="left" valign="top"><p class="table"><strong>Connection at Breakout Board</strong></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>1</strong> - Tx+ (Red)</p></td>
<td align="left" valign="top"><p class="table">-&gt;RXD+</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>2</strong> - Tx- (Black)</p></td>
<td align="left" valign="top"><p class="table">-&gt;RXD-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>3</strong> - Rx+ (Brown)</p></td>
<td align="left" valign="top"><p class="table">-&gt;T/R+</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>4</strong> - Rx- (White)</p></td>
<td align="left" valign="top"><p class="table">-&gt;T/R-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><strong>5</strong> - GND (Green)</p></td>
<td align="left" valign="top"><p class="table">-&gt;GND</p></td>
</tr>
</tbody>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_rs485_pmx.png" alt="images/plasmac_rs485_pmx.png" />
</div>
</div>
<div class="paragraph"><p>RS485 interfaces that are known to work:</p></div>
<div class="paragraph"><p>DTECH DT-5019 USB to RS485 converter adapter:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_rs485_dtech.png" alt="images/plasmac_rs485_dtech.png" />
</div>
</div>
<div class="paragraph"><p>The following is necessary to convert a motherboard Serial connection or Serial card (RS232) to RS485:</p></div>
<div class="paragraph"><p>DTECH RS232 to RS485 converter:</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_rs485_converter.png" alt="images/plasmac_rs485_converter.png" />
</div>
</div>
<div class="paragraph"><p>Serial card example (Sunnix SER5037A PCI Card shown with Breakout Board):</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_rs485_sunnix.png" alt="images/plasmac_rs485_sunnix.png" />
</div>
</div>
</div>
<div class="sect2">
<h3 id="reed-arc-ok">9.8. Arc OK With A Reed Relay</h3>
<div class="paragraph"><p>An effective and very reliable method of obtaining an Arc OK signal from a plasma power supply without a CNC port is to mount a reed relay inside a non-conductive tube and wrap and secure three turns of the work lead around the tube.</p></div>
<div class="paragraph"><p>This assembly will now act as a relay that will switch on when current is flowing through the work lead which only occurs when a cutting arc has been established.</p></div>
<div class="paragraph"><p>This will require that PlasmaC be operated in Mode 1 rather than Mode 0. See the <a href="plasmac-user-guide.html#ini-mode">INI File</a> and <a href="plasmac-user-guide.html#plasmac-mode">PlasmaC Modes</a> sections for more information.</p></div>
<div class="imageblock">
<div class="content">
<img src="images/plasmac_reed_arc_ok.png" alt="images/plasmac_reed_arc_ok.png" />
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_support">10. Support</h2>
<div class="sectionbody">
<div class="paragraph"><p>Online help and support is available from the <a href="https://forum.linuxcnc.org/plasmac">PlasmaC section</a> of the <a href="https://forum.linuxcnc.org/">LinuxCNC Forum</a>.</p></div>
<div class="paragraph"><p>The user can create a compressed file containing the complete machine configuration to aid in fault diagnosis by pressing following the directions in the <a href="plasmac-user-guide.html#plasmac-backup">backup</a> section. The resulting file is suitable for attaching to a post on the LinuxCNC Forum to help the community diagnose specific issues.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-11-24 07:38:35 MST
</div>
</div>
</body>
</html>
