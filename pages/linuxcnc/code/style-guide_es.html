<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title>Estilo de codificación</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>Estilo de codificación</h1>
<div id="toc">
  <div id="toctitle">Tabla de contenidos</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Este capítulo describe el estilo de código fuente preferido por el equipo LinuxCNC.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_no_provoque_daños">1. No provoque daños</h2>
<div class="sectionbody">
<div class="paragraph"><p>Al realizar pequeñas ediciones en el código en un estilo diferente al
descrito a continuación, observe el estilo de codificación local. Cambios rápidos de un
estilo de codificación a otro disminuye la legibilidad del código.</p></div>
<div class="paragraph"><p>Nunca verifique el código después de ejecutar "sangría" en él. Los cambios de espacios en blanco
introducidos por la sangría hacen que sea más difícil seguir el
historial de revisión del archivo.</p></div>
<div class="paragraph"><p>No use un editor que realice cambios innecesarios en los espacios en blanco (por ejemplo,
reemplaza 8 espacios con un tabulador en una línea no modificada,
o ajuste de texto en líneas no modificadas de otra manera)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_tabulaciones">2. Tabulaciones</h2>
<div class="sectionbody">
<div class="paragraph"><p>Una tabulación siempre corresponde a 8 espacios. No escriba código que
se muestra correctamente solo con una configuración de tabulación diferente.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_sangría">3. Sangría</h2>
<div class="sectionbody">
<div class="paragraph"><p>Use 4 espacios por nivel de sangría. Combinando 8 espacios en un tabulador
es aceptable pero no requerido.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_colocación_de_llaves">4. Colocación de llaves</h2>
<div class="sectionbody">
<div class="paragraph"><p>Ponga la llave de apertura al final de la línea y la llave de cierre al principio:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>x<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// hacer algo apropiado</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>La llave de cierre está en una línea propia, excepto en los casos en que
sea seguida por una continuación de la misma declaración, es decir, un <em>while</em>
en una declaración do o un <em>else</em> en una declaración if, así:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">do</span></span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// algo importante</span></span>
<span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">while</span></span> <span style="color: #990000">(</span>x <span style="color: #990000">&gt;</span> <span style="color: #993399">0</span><span style="color: #990000">);</span></tt></pre></div></div>
<div class="paragraph"><p>y</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>x <span style="color: #990000">==</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// Haz una cosa</span></span>
<span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>x <span style="color: #990000">&lt;</span> y<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// haz otra cosa</span></span>
<span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// hacer una tercera cosa</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Esta colocación de llaves también minimiza el número de
líneas vacías (o casi vacias), lo que permite una mayor cantidad de código o comentarios
visible a la vez en un terminal de un tamaño fijo.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_nombrado">5. Nombrado</h2>
<div class="sectionbody">
<div class="paragraph"><p>C es un lenguaje espartano, y así debería ser tu nombrado. A diferencia de Modula-2
y Pascal, los programadores C no usan nombres pomposos como
ThisVariableIsATemporaryCounter. Un programador de C llamaría eso
variable <em>tmp</em>, que es mucho más fácil de escribir y no mas
difícil de comprender.</p></div>
<div class="paragraph"><p>Sin embargo, los nombres descriptivos para las variables globales son imprescindibles. Llamar a una
función global <em>foo</em> es un crimen.</p></div>
<div class="paragraph"><p>Las variables GLOBALES (para usarlas solo si <strong>realmente</strong> se precisan) necesitan
tener nombres descriptivos, al igual que las funciones globales. Si
tiene una función que cuenta el número de usuarios activos, debe
 llame a eso <em>count_active_users()</em> o similar, <strong>no</strong> debe llamarla
<em>cntusr()</em>.</p></div>
<div class="paragraph"><p>Codificar el tipo de una función en el nombre (llamada notación húngara)
no tiene sentido; el compilador conoce los tipos de todos modos y
puede verificarlos, y solo confunde al programador. No es de extrañar que
Microsoft haga programas con errores.</p></div>
<div class="paragraph"><p>Los nombres de variables LOCALES deben ser cortos y escuetos. Si usted tiene
algún contador entero de bucles aleatorio, probablemente debería llamarse <em>i</em>.
Llamarlo <em>loop_counter</em> no es productivo, si no hay posibilidad de
ser mal entendido. Del mismo modo, <em>tmp</em> puede ser casi cualquier tipo de
variable que se utiliza para mantener un valor temporal.</p></div>
<div class="paragraph"><p>Si tiene miedo de mezclar sus nombres de variables locales, tiene
otro problema, que se llama síndrome de desequilibrio de la hormona del crecimiento funcional.
Ver el siguiente capítulo.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_funciones">6. Funciones</h2>
<div class="sectionbody">
<div class="paragraph"><p>Las funciones deben ser cortas y fáciles, y hacer una sola cosa.
Deben caber en una o dos pantallas de texto (el tamaño de pantalla ISO/ANSI
es 80x24, como todos sabemos), hacer una cosa y hacerla bien.</p></div>
<div class="paragraph"><p>La longitud máxima de una función es inversamente proporcional a la
complejidad y nivel de sangría de esa función. Por tanto, si tiene una
función conceptualmente simple que es solo un largo (pero simple)
switch-case, donde tienes que hacer muchas cosas pequeñas para muchos casos
diferentes, está bien tener una función más larga.</p></div>
<div class="paragraph"><p>Sin embargo, si tiene una función compleja y sospecha que un
estudiante de primer año de secundaria no superdotado no podría siquiera
entender de qué se trata la función, debe respetar los
límites máximos más de cerca. Use funciones de ayuda con
nombres descriptivos (puede pedirle al compilador que los incorpore si
piensa que es crítico para el rendimiento, y probablemente hará un mejor trabajo
que el suyo).</p></div>
<div class="paragraph"><p>Otra medida de la función es el número de variables locales.
No deben exceder de 5-10, o algo estás haciendo mal. Repensar la
función, y dividirla en pedazos más pequeños. Un cerebro humano generalmente puede
realizar un seguimiento de aproximadamente 7 cosas diferentes, cualquier cosa más y
se confunde. Sabes que eres brillante, pero tal vez te gustaría
entender lo que hiciste dentro de 2 semanas.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_comentarios">7. Comentarios</h2>
<div class="sectionbody">
<div class="paragraph"><p>Los comentarios son buenos, pero también existe el peligro de comentar en exceso.
NUNCA intente explicar CÓMO funciona su código en un comentario; es mucho mejor
escribir el código para que el <strong>funcionamiento</strong> sea obvio, y es un desperdicio de
tiempo explicar un código mal escrito.</p></div>
<div class="paragraph"><p>En general, busque que sus comentarios digan QUÉ hace su código, no
CÓMO. Un comentario en recuadro que describe la función, el valor de retorno y quién
lo llama colocado encima del cuerpo es bueno. Además, trate de evitar poner
comentarios dentro del cuerpo de una función; si la función es tan compleja que
necesita comentar partes por separado, probablemente debería volver a leer la
sección de funciones de nuevo. Puede hacer pequeños comentarios para anotar o advertir
sobre algo particularmente inteligente (o feo), pero trate de evitar el exceso.
En su lugar, coloque los comentarios al frente de la función, diciéndoles a las personas
lo que hace, y posiblemente POR QUÉ lo hace.</p></div>
<div class="paragraph"><p>Si se utilizan comentarios /* Fix me */ en la línea, por favor, por favor,
decir por qué algo necesita ser reparado. Cuando se ha realizado un cambio en la
parte afectada del código, elimine el comentario o modifíquelo para
indicar que se ha realizado un cambio y necesita pruebas.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_scripts_de_shell_y_makefiles">8. Scripts de Shell y Makefiles</h2>
<div class="sectionbody">
<div class="paragraph"><p>No todos tienen las mismas herramientas y paquetes instalados. Algunas personas
usan vi, otros emacs: algunos incluso evitan tener cualquiera de estos paquetes
instalados, prefiriendo un editor de texto liviano como nano o el
construido en Midnight Commander.</p></div>
<div class="paragraph"><p>gawk versus mawk - Nuevamente, no todos tendrán gawk instalado, mawk
es casi una décima parte del tamaño y, sin embargo, se ajusta al Posix AWK
estándar. Si se necesita algún comando específico de gawk oscuro que mawk
no proporciona, el script se romperá para algunos usuarios. Lo mismo
se aplicaría a mawk. En resumen, use la invocación genérica awk en
preferencia a gawk o mawk.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_convenciones_de_c">9. Convenciones de C++</h2>
<div class="sectionbody">
<div class="paragraph"><p>Los estilos de codificación de C++ siempre terminan en acalorados debates (un poco
como los argumentos de emacs versus vi). Una cosa es cierta, sin embargo;
el estilo común utilizado por todos los que trabajan en un proyecto conduce a la uniformidad y
a código legible</p></div>
<div class="paragraph"><p>Convenciones de nomenclatura: las constantes #define o enumeraciones
debe estar en mayúscula. Justificación: hace que sea más fácil detectar
constantes de tiempo de compilación en el código fuente. p.ej. EMC_MESSAGE_TYPE</p></div>
<div class="paragraph"><p>Las clases y los espacios de nombres deben poner en mayúscula la primera letra de cada palabra
y evitar guiones bajos. Justificación: identifica clases, constructores y
destructores. p.ej. GtkWidget</p></div>
<div class="paragraph"><p>Los métodos (o nombres de funciones) deben seguir las recomendaciones C anteriores
y no debe incluir el nombre de la clase. Justificación: mantiene un
estilo común en fuentes C y C++. p.ej. get_foo_bar()</p></div>
<div class="paragraph"><p>Sin embargo, los métodos booleanos son más fáciles de leer si evita los guiones bajos
y use un prefijo <em>is</em> (no debe confundirse con los métodos que manipulan
un booleano). Justificación: identifica el valor de retorno como VERDADERO o FALSO y
nada más. p.ej. isOpen, isHomed</p></div>
<div class="paragraph"><p>NO use <em>Not</em> en un nombre booleano, solo conduce a confusión
al hacer pruebas lógicas. p.ej. isNotOnLimit o is_not_on_limit son MALOS.</p></div>
<div class="paragraph"><p>Los nombres de las variables deben evitar el uso de mayúsculas y guiones bajos
a excepción de nombres locales o privados. El uso de variables globales debería
evitarse tanto como sea posible. Justificación: aclara cuáles son
variables y cuales son métodos. Ej. Público: axislimit. Ej. Privado: maxvelocity_</p></div>
<div class="paragraph"><p>Convenciones de nomenclatura de métodos específicos</p></div>
<div class="paragraph"><p>Los términos get y set deben usarse donde se accede a un atributo
directamente. Justificación: indica el propósito de la función o método.
p.ej. get_foo set_bar</p></div>
<div class="paragraph"><p>Para los métodos que involucran atributos booleanos, se prefiere set y reset.
Justificación: como arriba. p.ej. set_amp_enable reset_amp_fault</p></div>
<div class="paragraph"><p>Los métodos intensivos en matemáticas deben usar el cálculo como prefijo. Razón fundamental:
mostrar que es computacionalmente intensivo y acaparará la CPU. p.ej.
compute_PID</p></div>
<div class="paragraph"><p>Las abreviaturas en los nombres deben evitarse siempre que sea posible.
la excepción es para nombres de variables locales. Justificación: claridad del código. p.ej.
se prefiere pointer a ptr, compute a cmp, o compare a  (de nuevo) cmp.</p></div>
<div class="paragraph"><p>Las enumeraciones y otras constantes pueden tener como prefijo un nombre de tipo común
p.ej. enum COLOR{COLOR_RED, COLOR_BLUE};</p></div>
<div class="paragraph"><p>Se debe evitar el uso excesivo de macros y defines.
Se prefieren métodos o funciones. Justificación: mejora el proceso de depuración.</p></div>
<div class="paragraph"><p>Los declaraciones include de archivos de encabezado deben incluirse en la parte superior de un
archivo fuente y no disperso por todo el cuerpo. Deberían estar
ordenados y agrupados por su posición jerárquica dentro del sistema
con los archivos de bajo nivel incluidos primero. Las rutas de archivos include
NUNCA deben ser absolutas; use el flag del compilador -I en su lugar. Razón fundamental:
Los encabezados pueden no estar en el mismo lugar en todos los sistemas.</p></div>
<div class="paragraph"><p>Los punteros y las referencias deben tener su símbolo de referencia junto al
nombre de la variable y no junto al nombre del tipo. Justificación: Reduce la confusión.
p.ej. float *x o int &amp;i</p></div>
<div class="paragraph"><p>Las pruebas implícitas para cero no deben usarse excepto para variables booleanas.
p.ej. if (spindle_speed != 0) NO if (spindle_speed)</p></div>
<div class="paragraph"><p>Solo las declaraciones de control de bucle deben incluirse en una construcción for().
p.ej. sum = 0; for (i = 0; i &lt; 10; i++) { sum += value[i]; }</p></div>
<div class="paragraph"><p>NO for (i = 0, sum =0; i &lt; 10; i++) sum += value[i];</p></div>
<div class="paragraph"><p>Del mismo modo, deben evitarse las declaraciones ejecutables en condicionales. p.ej.
if (fd = open(nombre_archivo) es malo.</p></div>
<div class="paragraph"><p>Deben evitarse las declaraciones condicionales complejas - Introducir
variables booleanas temporales en su lugar.</p></div>
<div class="paragraph"><p>Los paréntesis deben usarse en abundancia en las expresiones matemáticas.
No confíe en la precedencia del operador cuando un paréntesis adicional aclararía las
cosas.</p></div>
<div class="paragraph"><p>Nombres de archivo: las fuentes y los encabezados de C++ usan la extensión .cc y .hh. El uso
de .c y .h están reservados para C. Los encabezados son para clases, métodos,
y declaraciones de estructuras, no para código (a menos que se declaren las funciones
inline).</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_estándares_de_codificación_de_python">10. Estándares de codificación de Python</h2>
<div class="sectionbody">
<div class="paragraph"><p>Utilice el estilo <a href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a> para
Código de Python</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_estándares_de_codificación_comp">11. Estándares de codificación comp</h2>
<div class="sectionbody">
<div class="paragraph"><p>En la parte de declaración de un archivo .comp, comience cada declaración en
la primera columna. Insertar líneas en blanco adicionales cuando ayuden a agrupar items relacionados.</p></div>
<div class="paragraph"><p>En la parte del código de un archivo .comp, siga el estilo de codificación C normal.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-11-24 07:38:35 MST
</div>
</div>
</body>
</html>
