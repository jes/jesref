<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title>Interfaz de Python</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>Interfaz de Python</h1>
<div id="toc">
  <div id="toctitle">Tabla de contenidos</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph" id="cha:python-interface"><p>Esta documentación describe el módulo python <em>linuxcnc</em>, que proporciona
una API Python para LinuxCNC.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_el_módulo_linuxcnc_python">1. El módulo linuxcnc Python</h2>
<div class="sectionbody">
<div class="paragraph"><p>Las interfaces de usuario controlan la actividad de LinuxCNC enviando
mensajes NML al controlador de tareas LinuxCNC y supervisan los resultados
observando la estructura de estado de LinuxCNC, así como el canal de informe de errores.</p></div>
<div class="paragraph"><p>El acceso programático a NML es a través de una API de C ++; sin embargo, la mayoría
partes importantes de la interfaz NML para LinuxCNC también están disponibles para
programas de Python a través del módulo <code>linuxcnc</code>.</p></div>
<div class="paragraph"><p>Más allá de la interfaz NML para los canales de comando, estado y error,
el módulo <code>linuxcnc</code> también contiene:</p></div>
<div class="ulist"><ul>
<li>
<p>
soporte para leer valores de archivos ini
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_patron_de_uso_de_la_interfaz_nml_linuxcnc">2. Patron de uso de la interfaz NML LinuxCNC</h2>
<div class="sectionbody">
<div class="paragraph"><p>El patrón general para el uso de <code>linuxcnc</code> es, en lineas generales, así:</p></div>
<div class="ulist"><ul>
<li>
<p>
importar el módulo <code>linuxcnc</code>
</p>
</li>
<li>
<p>
establecer conexiones a los canales NML de comandos, estado y errores según sea necesario
</p>
</li>
<li>
<p>
sondear el canal de estado, ya sea periódicamente o según sea necesario
</p>
</li>
<li>
<p>
antes de enviar un comando, determinar desde el estado si está en
  uno correcto para hacerlo (por ejemplo, no tiene sentido enviar un
  comando <em>Ejecutar</em> si la tarea está en el estado ESTOP o el intérprete no está inactivo)
</p>
</li>
<li>
<p>
envíar el comando utilizando uno de los métodos del canal de comandos <code>linuxcnc</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p>Para recuperar mensajes del canal de errores, sondee el canal de errores
periódicamente y procese los mensajes recuperados.</p></div>
<div class="ulist"><ul>
<li>
<p>
sondear el canal de errores, ya sea periódicamente o según sea necesario
</p>
</li>
<li>
<p>
imprimir cualquier mensaje de error y explore el código de excepción
</p>
</li>
</ul></div>
<div class="paragraph"><p><code>linuxcnc</code> también define el tipo de excepción Python <code>error</code> para admitir informes de errores.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_lectura_del_estado_de_linuxcnc">3. Lectura del Estado de LinuxCNC</h2>
<div class="sectionbody">
<div class="paragraph"><p>Aquí hay un fragmento de Python para explorar el contenido del
objeto <code>linuxcnc.stat</code> que contiene más de 80 valores (correr mientras
linuxcnc se está ejecutando para valores típicos):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># -*- coding: utf-8 -*-</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> sys
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc
<span style="font-weight: bold"><span style="color: #0000FF">try</span></span><span style="color: #990000">:</span>
    s <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">stat</span></span><span style="color: #990000">()</span> <span style="font-style: italic"><span style="color: #9A1900"># crea una conexión al canal de estado</span></span>
    s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">poll</span></span><span style="color: #990000">()</span> <span style="font-style: italic"><span style="color: #9A1900"># obtener valores actuales</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">except</span></span> linuxcnc<span style="color: #990000">.</span>error<span style="color: #990000">,</span> detail<span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #0000FF">print</span></span> <span style="color: #FF0000">"error"</span><span style="color: #990000">,</span> detail
    sys<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">exit</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> x <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="font-weight: bold"><span style="color: #000000">dir</span></span><span style="color: #990000">(</span>s<span style="color: #990000">):</span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #0000FF">not</span></span> x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">startswith</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"_"</span><span style="color: #990000">):</span>
        <span style="font-weight: bold"><span style="color: #0000FF">print</span></span> x<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #000000">getattr</span></span><span style="color: #990000">(</span>s<span style="color: #990000">,</span>x<span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>Linuxcnc usa la ruta de compilacion predeterminada para el archivo de configuración
NML a menos que se sobreescriba; vea <a href="python-interface_es.html#python:reading-ini-values">lectura valores de archivo ini</a> para un ejemplo.</p></div>
<div class="sect2">
<h3 id="_atributos_en_linuxcnc_stat">3.1. Atributos en linuxcnc.stat</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>acceleration</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
aceleración predeterminada, refleja la entrada ini [TRAJ]DEFAULT_ACCELERATION.
</p>
</dd>
<dt class="hdlist1">
<strong>active_queue</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Número de mezclas en motion.
</p>
</dd>
<dt class="hdlist1">
<strong>actual_position</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
posición de trayectoria actual, (x y z a b c u v w), en unidades máquina.
</p>
</dd>
<dt class="hdlist1">
<strong>adaptive_feed_enabled</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
estado de anulación de avance adaptativo (0/1).
</p>
</dd>
<dt class="hdlist1">
<strong>ain</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
valor actual de los pines de entrada analógica.
</p>
</dd>
<dt class="hdlist1">
<strong>angular_units</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
unidades angulares de máquina para grados, refleja el valor ini [TRAJ]ANGULAR_UNITS.
</p>
</dd>
<dt class="hdlist1">
<strong>aout</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
valor actual de los pines de salida analógica.
</p>
</dd>
<dt class="hdlist1">
<strong>axes</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
número de ejes derivado del valor ini [TRAJ]COORDINATES.
</p>
</dd>
<dt class="hdlist1">
<strong>axis</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de diccionarios)</em> -
reflejando los valores actuales del eje. Ver
<a href="python-interface_es.html#sec:the-axis-dictionary">El diccionario del eje</a>.
</p>
</dd>
<dt class="hdlist1">
<strong>axis_mask</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
máscara de eje disponible según lo definido por [TRAJ]COORDINATES en el archivo ini.
Devuelve la suma de los ejes X = 1, Y = 2, Z = 4, A = 8, B = 16, C = 32, U = 64,
V = 128, W = 256.
</p>
</dd>
<dt class="hdlist1">
<strong>block_delete</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
el estado actual de eliminar bloque.
</p>
</dd>
<dt class="hdlist1">
<strong>command</strong>
</dt>
<dd>
<p>
<em>(devuelve cadena)</em> -
comando actualmente en ejecución.
</p>
</dd>
<dt class="hdlist1">
<strong>current_line</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
línea actualmente en ejecución.
</p>
</dd>
<dt class="hdlist1">
<strong>current_vel</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
velocidad actual en unidades de usuario por segundo.
</p>
</dd>
<dt class="hdlist1">
<strong>cycle_time</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
período de hilo
</p>
</dd>
<dt class="hdlist1">
<strong>debug</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
bandera de depuración desde el archivo ini.
</p>
</dd>
<dt class="hdlist1">
<strong>delay_left</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
tiempo restante en el comando dwell (G4), segundos.
</p>
</dd>
<dt class="hdlist1">
<strong>din</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de enteros)</em> -
valor actual de los pines de entrada digital.
</p>
</dd>
<dt class="hdlist1">
<strong>distance_to_go</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
distancia restante del movimiento actual, según lo informado por el planificador de trayectoria.
</p>
</dd>
<dt class="hdlist1">
<strong>dout</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de enteros)</em> -
valor actual de los pines de salida digital.
</p>
</dd>
<dt class="hdlist1">
<strong>dtg</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
distancia restante del movimiento actual para cada eje, según lo informado por el planificador de trayectoria.
</p>
</dd>
<dt class="hdlist1">
<strong>echo_serial_number</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
El número de serie del último comando completado enviado por una UI
a task. Todos los comandos llevan un número de serie. Una vez que el comando
ha sido ejecutado, su número de serie se refleja en <code>echo_serial_number</code>.
</p>
</dd>
<dt class="hdlist1">
<strong>enabled</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
bandera de habilitacion de planificador de trayectoria.
</p>
</dd>
<dt class="hdlist1">
<strong>estop</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Devuelve STATE_ESTOP o no.
</p>
</dd>
<dt class="hdlist1">
<strong>exec_state</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
estado de ejecución task. Uno de EXEC_ERROR, EXEC_DONE,
EXEC_WAITING_FOR_MOTION, EXEC_WAITING_FOR_MOTION_QUEUE,
EXEC_WAITING_FOR_IO, EXEC_WAITING_FOR_MOTION_AND_IO,
EXEC_WAITING_FOR_DELAY, EXEC_WAITING_FOR_SYSTEM_CMD,
EXEC_WAITING_FOR_SPINDLE_ORIENTED.
</p>
</dd>
<dt class="hdlist1">
<strong>feed_hold_enabled</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
habilitar la bandera para retención de alimentación.
</p>
</dd>
<dt class="hdlist1">
<strong>feed_override_enabled</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
habilitar bandera para ajuste de alimentación.
</p>
</dd>
<dt class="hdlist1">
<strong>feedrate</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
ajuste de avance actual, 1.0 = 100%.
</p>
</dd>
<dt class="hdlist1">
<strong>file</strong>
</dt>
<dd>
<p>
<em>(devuelve cadena)</em> -
nombre de archivo gcode cargado actualmente, con ruta.
</p>
</dd>
<dt class="hdlist1">
<strong>flood</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Estado de inundación, FLOOD_OFF o FLOOD_ON.
</p>
</dd>
<dt class="hdlist1">
<strong>g5x_index</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
sistema de coordenadas actualmente activo, G54 = 1, G55 = 2, etc.
</p>
</dd>
<dt class="hdlist1">
<strong>g5x_offset</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
desplazamiento del sistema de coordenadas actualmente activo.
</p>
</dd>
<dt class="hdlist1">
<strong>g92_offset</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
pose del offset g92 actual.
</p>
</dd>
<dt class="hdlist1">
<strong>gcodes</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de enteros)</em> -
Códigos G activos para cada grupo modal.
Constantes de código G
G_0, G_1, G_2, G_3, G_4, G_5, G_5_1, G_5_2, G_5_3, G_7, G_8, G_100, G_17,
G_17_1, G_18, G_18_1, G_19, G_19_1, G_20, G_21, G_28, G_28_1, G_30, G_30_1,
G_33, G_33_1, G_38_2, G_38_3, G_38_4, G_38_5, G_40, G_41, G_41_1, G_42, G_42_1,
G_43, G_43_1, G_43_2, G_49, G_50, G_51, G_53, G_54, G_55, G_56, G_57, G_58,
G_59, G_59_1, G_59_2, G_59_3, G_61, G_61_1, G_64, G_73, G_76, G_80, G_81, G_82,
G_83, G_84, G_85, G_86, G_87, G_88, G_89, G_90, G_90_1, G_91, G_91_1, G_92,
G_92_1, G_92_2, G_92_3, G_93, G_94, G_95, G_96, G_97, G_98, G_99
</p>
</dd>
<dt class="hdlist1">
<strong>homed</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de enteros)</em> -
articulaciones actualmente con/sin home, 0 = sin home, 1 = con home.
</p>
</dd>
<dt class="hdlist1">
<strong>id</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
ID de movimiento actualmente en ejecución.
</p>
</dd>
<dt class="hdlist1">
<strong>inpos</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
bandera machine-in-position.
</p>
</dd>
<dt class="hdlist1">
<strong>input_timeout</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
bandera de temporizador M66 en progreso.
</p>
</dd>
<dt class="hdlist1">
<strong>interp_state</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
estado actual del intérprete RS274NGC. Uno de
INTERP_IDLE, INTERP_READING, INTERP_PAUSED, INTERP_WAITING.
</p>
</dd>
<dt class="hdlist1">
<strong>interpreter_errcode</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
código de retorno actual del intérprete RS274NGC. Uno de
INTERP_OK, INTERP_EXIT, INTERP_EXECUTE_FINISH, INTERP_ENDFILE,
INTERP_FILE_NOT_OPEN, INTERP_ERROR.
ver src/emc/nml_intf/interp_return.hh
</p>
</dd>
<dt class="hdlist1">
<strong>joint</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de diccionarios)</em> -
refleja los valores de articulación actuales. Ver
<a href="python-interface_es.html#sec:the-joint-dictionary">El diccionario de articulaciones</a>.
</p>
</dd>
<dt class="hdlist1">
<strong>joint_actual_position</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
Posiciones articulares reales.
</p>
</dd>
<dt class="hdlist1">
<strong>joint_position</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
Posiciones articulares deseadas.
</p>
</dd>
<dt class="hdlist1">
<strong>joints</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Número de articulaciones. Refleja [KINS]JOINTS del ini.
</p>
</dd>
<dt class="hdlist1">
<strong>kinematics_type</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
El tipo de cinemática. Uno de:
</p>
<div class="ulist"><ul>
<li>
<p>
KINEMATICS_IDENTITY
</p>
</li>
<li>
<p>
KINEMATICS_FORWARD_ONLY
</p>
</li>
<li>
<p>
KINEMATICS_INVERSE_ONLY
</p>
</li>
<li>
<p>
KINEMATICS_BOTH
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
<strong>limit</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de enteros)</em> -
Máscaras de límites de eje. minHardLimit = 1,
maxHardLimit = 2, minSoftLimit = 4, maxSoftLimit = 8.
</p>
</dd>
<dt class="hdlist1">
<strong>linear_units</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
unidades lineales de máquina por mm, refleja valor ini [TRAJ]LINEAR_UNITS.
</p>
</dd>
<dt class="hdlist1">
<strong>lube</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
bandera de "lubricación ON".
</p>
</dd>
<dt class="hdlist1">
<strong>lube_level</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
refleja <em>iocontrol.0.lube_level</em>.
</p>
</dd>
<dt class="hdlist1">
<strong>max_acceleration</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
máxima aceleración, refleja [TRAJ]MAX_ACCELERATION.
</p>
</dd>
<dt class="hdlist1">
<strong>max_velocity</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
velocidad máxima refleja [TRAJ]MAX_VELOCITY.
</p>
</dd>
<dt class="hdlist1">
<strong>mcodes</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de 10 enteros)</em> -
códigos M actualmente activos.
</p>
</dd>
<dt class="hdlist1">
<strong>mist</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Estado de la niebla, ya sea MIST_OFF o MIST_ON
</p>
</dd>
<dt class="hdlist1">
<strong>motion_line</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
 número de línea fuente del movimiento que se está ejecutando actualmente. Relación
con <code>id</code> no aclarada.
</p>
</dd>
<dt class="hdlist1">
<strong>motion_mode</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Este es el modo del controlador de movimiento. Uno de TRAJ_MODE_COORD,
TRAJ_MODE_FREE, TRAJ_MODE_TELEOP.
</p>
</dd>
<dt class="hdlist1">
<strong>motion_type</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
El tipo de movimiento que se está ejecutando actualmente. Uno de:
    * MOTION_TYPE_TRAVERSE
    * MOTION_TYPE_FEED
    * MOTION_TYPE_ARC
    * MOTION_TYPE_TOOLCHANGE
    * MOTION_TYPE_PROBING
    * MOTION_TYPE_INDEXROTARY
    * 0 si no hay movimiento en este momento.
</p>
</dd>
<dt class="hdlist1">
<strong>optional_stop</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
bandera de stop opcional.
</p>
</dd>
<dt class="hdlist1">
<strong>paused</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
bandera de <code>movimiento en pausa</code>.
</p>
</dd>
<dt class="hdlist1">
<strong>pocket_prepped</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
comando Tx completado, la ranura está preparada. -1 si la
ranura no está preparada.
</p>
</dd>
<dt class="hdlist1">
*poll() * 
</dt>
<dd>
<p>
- <em>(función incorporada)</em>
Método para actualizar los atributos del estado actual.
</p>
</dd>
<dt class="hdlist1">
<strong>position</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
posición en trayectoria
</p>
</dd>
<dt class="hdlist1">
<strong>probe_tripped</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
bandera, True si la sonda se ha disparado (con latch)
</p>
</dd>
<dt class="hdlist1">
<strong>probe_val</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
refleja el valor del pin <code>motion.probe-input</code>.
</p>
</dd>
<dt class="hdlist1">
<strong>probed_position</strong>
</dt>
<dd>
<p>
<em>(devuelve la tupla de floats)</em> -
posición donde se disparó la sonda.
</p>
</dd>
<dt class="hdlist1">
<strong>sondeo</strong>
</dt>
<dd>
<p>
<em>(devuelve booleano)</em> -
bandera, True si hay una operación de sonda en progreso.
</p>
</dd>
<dt class="hdlist1">
<strong>program_units</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
uno de CANON_UNITS_INCHES=1 , CANON_UNITS_MM=2, CANON_UNITS_CM=3
</p>
</dd>
<dt class="hdlist1">
<strong>queue</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
tamaño actual de la cola del planificador de trayectoria.
</p>
</dd>
<dt class="hdlist1">
<strong>queue_full</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
la cola del planificador de trayectoria está llena.
</p>
</dd>
<dt class="hdlist1">
<strong>rapidrate</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
escala de ajustes de rápidos.
</p>
</dd>
<dt class="hdlist1">
<strong>read_line</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
línea que el intérprete RS274NGC está leyendo actualmente.
</p>
</dd>
<dt class="hdlist1">
<strong>rotación_xy</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
ángulo de rotación XY actual alrededor del eje Z.
</p>
</dd>
<dt class="hdlist1">
<strong>settings</strong> 
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
configuración actual del intérprete. settings[0] =
número de secuencia, settings[1] = velocidad de avance, settings[2] = velocidad
</p>
</dd>
<dt class="hdlist1">
<strong>spindle</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de diccionarios)</em> -
devuelve el estado actual del husillo
ver &lt;sec:the-spindle-dictionary, El diccionario spindle&gt;&gt;
</p>
</dd>
<dt class="hdlist1">
<strong>spindles</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Número de husillos. Refleja el valor ini [TRAJ]SPINDLES.
</p>
</dd>
<dt class="hdlist1">
<strong>state</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
estado actual de ejecución del comando. Uno de RCS_DONE,
RCS_EXEC, RCS_ERROR.
</p>
</dd>
<dt class="hdlist1">
<strong>task_mode</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
modo de tarea actual. uno de MODE_MDI, MODE_AUTO,
MODE_MANUAL.
</p>
</dd>
<dt class="hdlist1">
<strong>task_paused</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
bandera Task pausado.
</p>
</dd>
<dt class="hdlist1">
<strong>task_state</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
estado actual de la tarea. uno de STATE_ESTOP,
STATE_ESTOP_RESET, STATE_ON, STATE_OFF.
</p>
</dd>
<dt class="hdlist1">
<strong>tool_in_spindle</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
Número de herramienta actual.
</p>
</dd>
<dt class="hdlist1">
<strong>tool_offset</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de floats)</em> -
valores de offsets de la herramienta actual.
</p>
</dd>
<dt class="hdlist1">
<strong>tool_table</strong>
</dt>
<dd>
<p>
<em>(devuelve tupla de tool_results)</em> -
lista de entradas de herramientas. Cada entrada es una secuencia de los siguientes campos:
id, xoffset, yoffset, zoffset, aoffset, boffset, coffset, uoffset, voffset,
woffset, diameter, frontangle, backangle, orientation. La identificación y orientación
son enteros y el resto son floats.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># -*- coding: utf-8 -*-</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc
s <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">stat</span></span><span style="color: #990000">()</span>
s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">poll</span></span><span style="color: #990000">()</span>
<span style="font-style: italic"><span style="color: #9A1900"># para encontrar la información de la herramienta cargada en el índice 0 de la tabla de herramientas</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">if</span></span> s<span style="color: #990000">.</span>tool_table<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span>id <span style="color: #990000">!=</span> <span style="color: #993399">0</span><span style="color: #990000">:</span> <span style="font-style: italic"><span style="color: #9A1900"># se carga una herramienta</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">print</span></span> s<span style="color: #990000">.</span>tool_table<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">].</span>zoffset
<span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #0000FF">print</span></span> <span style="color: #FF0000">"sin herramienta cargada"</span></tt></pre></div></div>
<div class="ulist"><ul>
<li>
<p>
velocity*:: <em>(devuelve float)</em> -
Esta propiedad está definida, pero no tiene una interpretación útil.
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_el_diccionario_code_axis_code_a_id_sec_the_axis_dictionary_a">3.2. El diccionario <code>axis</code> <a id="sec:the-axis-dictionary"></a></h3>
<div class="paragraph"><p>La configuración de ejes y los valores de estado están disponibles a través de una lista
de diccionarios por eje. Aquí hay un ejemplo de cómo acceder a un atributo
de un eje particular:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># -*- coding: utf-8 -*-</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc
s <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">stat</span></span><span style="color: #990000">()</span>
s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">poll</span></span><span style="color: #990000">()</span>
<span style="font-weight: bold"><span style="color: #0000FF">print</span></span> <span style="color: #FF0000">"Joint 1 homed: "</span><span style="color: #990000">,</span> s<span style="color: #990000">.</span>joint<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">][</span><span style="color: #FF0000">"homed"</span><span style="color: #990000">]</span></tt></pre></div></div>
<div class="paragraph"><p>Tenga en cuenta que muchas propiedades que anteriormente estaban en el diccionario <code>axis</code> están
ahora en el diccionario <code>joint</code>, porque en máquinas con cinemáticas no triviales
estos elementos (como el backlash) no son propiedades de un eje.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>max_position_limit</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
límite máximo (límite soft) para el movimiento del eje, en unidades máquina del parametro
units.configuration, refleja [JOINT_n]MAX_LIMIT.
</p>
</dd>
<dt class="hdlist1">
<strong>min_position_limit</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
límite mínimo (límite soft) para el movimiento del eje, en unidades máquina del parametro
units.configuration, refleja [JOINT_n]MIN_LIMIT.
</p>
</dd>
<dt class="hdlist1">
<strong>velocity</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
velocidad actual
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_el_diccionario_code_joint_code_a_id_sec_the_joint_dictionary_a">3.3. El diccionario <code>joint</code> <a id="sec:the-joint-dictionary"></a></h3>
<div class="paragraph"><p>Para cada articulación, están disponibles las siguientes claves de diccionario:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>backlash</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
backlash en unidades máquina del parametro units.configuration, refleja [JOINT_n]BACKLASH.
</p>
</dd>
<dt class="hdlist1">
<strong>enabled</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
no cero significa habilitado.
</p>
</dd>
<dt class="hdlist1">
<strong>fault</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
no cero significa fallo del amplificador del eje.
</p>
</dd>
<dt class="hdlist1">
<strong>ferror_current</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
error de seguimiento actual
</p>
</dd>
<dt class="hdlist1">
<strong>ferror_highmark</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
magnitud del error de seguimiento máximo.
</p>
</dd>
<dt class="hdlist1">
<strong>homed</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
distintos de cero han sido homed.
</p>
</dd>
<dt class="hdlist1">
<strong>homing</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
distinto de cero significa homing en progreso.
</p>
</dd>
<dt class="hdlist1">
<strong>inpos</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
no cero significa en posición.
</p>
</dd>
<dt class="hdlist1">
<strong>input</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
entrada de posición actual.
</p>
</dd>
<dt class="hdlist1">
<strong>jointType</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
parámetro del tipo de configuración del eje, refleja
[JOINT_n]TYPE. LINEAL=1, ANGULAR=2. Ver <a href="ini-config_es.html#sec:axis-section">configuración ini de articulacion</a> para más detalles.
</p>
</dd>
<dt class="hdlist1">
<strong>max_ferror</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
Máximo error de seguimiento. parámetro de configuración,
refleja [JOINT_n]FERROR.
</p>
</dd>
<dt class="hdlist1">
<strong>max_hard_limit</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
distinto de cero significa que se ha excedido el límite hard máximo.
</p>
</dd>
<dt class="hdlist1">
<strong>max_position_limit</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
Límite máximo (límite soft) para el movimiento articular, en unidades de máquina. parámetro de configuración,
refleja [JOINT_n]MAX_LIMIT.
</p>
</dd>
<dt class="hdlist1">
*max_soft_limit * 
</dt>
<dd>
<p>
distinto de cero significa que se ha excedido <code>max_position_limit</code>, int
</p>
</dd>
<dt class="hdlist1">
<strong>min_ferror</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
parámetro de configuración, refleja [JOINT_n]MIN_FERROR.
</p>
</dd>
<dt class="hdlist1">
<strong>min_hard_limit</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
distinto de cero significa que se excedió el límite hard mínimo.
</p>
</dd>
<dt class="hdlist1">
<strong>min_position_limit</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
límite mínimo (límite soft) para el movimiento articular, en unidades de máquina. parámetro de configuración,
refleja [JOINT_n]MIN_LIMIT.
</p>
</dd>
<dt class="hdlist1">
<strong>min_soft_limit</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
distinto de cero significa que se ha excedido <code>min_position_limit</code>.
</p>
</dd>
<dt class="hdlist1">
<strong>output</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
posición de salida ordenada.
</p>
</dd>
<dt class="hdlist1">
<strong>override_limits</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
no cero significa que los límites se han ajustado.
</p>
</dd>
<dt class="hdlist1">
<strong>units</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
unidades de articulacion por mm, o por grado para juntas angulares.<br />
(las unidades de articulacion son las mismas que las unidades d máquina, a menos que se establezca lo contrario
por el parámetro de configuración [JOINT_n]UNITS)
</p>
</dd>
<dt class="hdlist1">
<strong>velocity</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
velocidad actual
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_el_diccionario_code_spindle_code_a_id_sec_the_spindle_dictionary_a">4. El diccionario <code>spindle</code> <a id="sec:the-spindle-dictionary"></a></h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>brake</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
valor de la bandera del freno del husillo.
</p>
</dd>
<dt class="hdlist1">
<strong>direction</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
dirección rotacional del huso. adelante = 1, atrás = -1.
</p>
</dd>
<dt class="hdlist1">
<strong>enabled</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
valor de la bandera de husillo habilitado.
</p>
</dd>
<dt class="hdlist1">
<strong>homed</strong>
</dt>
<dd>
<p>
(no implementado actualmente)
</p>
</dd>
<dt class="hdlist1">
<strong>increasing</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em> -
poco claro.
</p>
</dd>
<dt class="hdlist1">
<strong>orient_fault</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em>
</p>
</dd>
<dt class="hdlist1">
<strong>orient_state</strong>
</dt>
<dd>
<p>
<em>(devuelve entero)</em>
</p>
</dd>
<dt class="hdlist1">
<strong>override</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
Escala de ajuste de velocidad del husillo.
</p>
</dd>
<dt class="hdlist1">
<strong>override_enabled</strong>
</dt>
<dd>
<p>
<em>(devuelve boolean)</em> -
valor de la bandera habilitacion para ajustar el husillo.
</p>
</dd>
<dt class="hdlist1">
<strong>speed</strong>
</dt>
<dd>
<p>
<em>(devuelve float)</em> -
valor de velocidad del husillo, rpm,&gt; 0: en sentido horario, &lt;0:
en sentido anti-horario.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_preparacion_para_enviar_comandos">5. Preparacion para enviar comandos</h2>
<div class="sectionbody">
<div class="paragraph"><p>Siempre se pueden enviar algunos comandos, independientemente del modo y el estado.
Por ejemplo, siempre se puede llamar al método <code>linuxcnc.command.abort()</code>.</p></div>
<div class="paragraph"><p>Otros comandos pueden enviarse solo en el estado apropiado, y probarlos
puede ser un poco complicado. Por ejemplo, un comando MDI solo se puede enviar si:</p></div>
<div class="ulist"><ul>
<li>
<p>
ESTOP no se ha activado, y
</p>
</li>
<li>
<p>
la máquina está encendida y
</p>
</li>
<li>
<p>
los ejes tienen home y
</p>
</li>
<li>
<p>
el intérprete no está funcionando y
</p>
</li>
<li>
<p>
el modo está configurado en <code>modo MDI</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p>entonces una prueba apropiada antes de enviar un comando MDI a través de
<code>linuxcnc.command.mdi()</code> podría ser:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># -*- coding: utf-8 -*-</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc
s <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">stat</span></span><span style="color: #990000">()</span>
c <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">command</span></span><span style="color: #990000">()</span>

<span style="font-weight: bold"><span style="color: #0000FF">def</span></span> <span style="font-weight: bold"><span style="color: #000000">ok_for_mdi</span></span><span style="color: #990000">():</span>
    s<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">poll</span></span><span style="color: #990000">()</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">not</span></span> s<span style="color: #990000">.</span>estop <span style="font-weight: bold"><span style="color: #0000FF">and</span></span> s<span style="color: #990000">.</span>enabled <span style="font-weight: bold"><span style="color: #0000FF">and</span></span> <span style="color: #990000">(</span>s<span style="color: #990000">.</span>homed<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">count</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">)</span> <span style="color: #990000">==</span> s<span style="color: #990000">.</span>joints<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">and</span></span> <span style="color: #990000">(</span>s<span style="color: #990000">.</span>interp_state <span style="color: #990000">==</span> linuxcnc<span style="color: #990000">.</span>INTERP_IDLE<span style="color: #990000">)</span>

<span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="font-weight: bold"><span style="color: #000000">ok_for_mdi</span></span><span style="color: #990000">():</span>
    c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mode</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>MODE_MDI<span style="color: #990000">)</span>
    c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">wait_complete</span></span><span style="color: #990000">()</span> <span style="font-style: italic"><span style="color: #9A1900"># espera hasta que se ejecute el cambio de modo</span></span>
    c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mdi</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"G0 X10 Y20 Z30"</span><span style="color: #990000">)</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_enviar_comandos_a_través_de_code_linuxcnc_command_code">6. Enviar comandos a través de <code>linuxcnc.command</code></h2>
<div class="sectionbody">
<div class="paragraph"><p>Antes de enviar un comando, inicialice un canal de comando así:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># -*- coding: utf-8 -*-</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc
c <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">command</span></span><span style="color: #990000">()</span>

<span style="font-style: italic"><span style="color: #9A1900"># Ejemplos de uso para algunos de los comandos enumerados a continuación:</span></span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">abort</span></span><span style="color: #990000">()</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">auto</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>AUTO_RUN<span style="color: #990000">,</span> program_start_line<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">auto</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>AUTO_STEP<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">auto</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>AUTO_PAUSE<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">auto</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>AUTO_RESUME<span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">brake</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>BRAKE_ENGAGE<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">brake</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>BRAKE_RELEASE<span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">flood</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>FLOOD_ON<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">flood</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>FLOOD_OFF<span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">home</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">jog</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>JOG_STOP<span style="color: #990000">,</span>        jjogmode<span style="color: #990000">,</span> joint_num_or_axis_index<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">jog</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>JOG_CONTINUOUS<span style="color: #990000">,</span>  jjogmode<span style="color: #990000">,</span> joint_num_or_axis_index<span style="color: #990000">,</span> velocity<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">jog</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>JOG_INCREMENT<span style="color: #990000">,</span>   jjogmode<span style="color: #990000">,</span> joint_num_or_axis_index<span style="color: #990000">,</span> velocity<span style="color: #990000">,</span> increment<span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">load_tool_table</span></span><span style="color: #990000">()</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">maxvel</span></span><span style="color: #990000">(</span><span style="color: #993399">200.0</span><span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mdi</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"G0 X10 Y20 Z30"</span><span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mist</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>MIST_ON<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mist</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>MIST_OFF<span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mode</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>MODE_MDI<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mode</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>MODE_AUTO<span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">mode</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>MODE_MANUAL<span style="color: #990000">)</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">override_limits</span></span><span style="color: #990000">()</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">program_open</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"foo.ngc"</span><span style="color: #990000">)</span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">reset_interpreter</span></span><span style="color: #990000">()</span>

c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">tool_offset</span></span><span style="color: #990000">(</span>toolno<span style="color: #990000">,</span> z_offset<span style="color: #990000">,</span>  x_offset<span style="color: #990000">,</span> diameter<span style="color: #990000">,</span> frontangle<span style="color: #990000">,</span> backangle<span style="color: #990000">,</span> orientation<span style="color: #990000">)</span></tt></pre></div></div>
<div class="sect2">
<h3 id="_atributos_code_linuxcnc_command_code">6.1. Atributos <code>linuxcnc.command</code></h3>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>serial</code>
</dt>
<dd>
<p>
    el número de serie del comando actual
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_métodos_code_linuxcnc_command_code">6.2. métodos <code>linuxcnc.command</code>:</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>abort()</code>
</dt>
<dd>
<p>
    enviar mensaje EMC_TASK_ABORT.
</p>
</dd>
<dt class="hdlist1">
<code>auto(int [, int])</code>
</dt>
<dd>
<p>
    ejecutar, escalonar, pausar o reanudar un programa.
</p>
</dd>
<dt class="hdlist1">
<code>brake(int)</code>
</dt>
<dd>
<p>
    engrane o suelte el freno del husillo.
</p>
</dd>
<dt class="hdlist1">
<code>debug(int)</code>
</dt>
<dd>
<p>
    establecer el nivel de depuración a través del mensaje EMC_SET_DEBUG.
</p>
</dd>
<dt class="hdlist1">
<code>feedrate(float)</code>
</dt>
<dd>
<p>
    establecer la velocidad de avance.
</p>
</dd>
<dt class="hdlist1">
<code>flood(int)</code>
</dt>
<dd>
<p>
    encender/apagar inundacion.<br />
    Sintaxis:<br />
    flood(command)<br />
    flood(linuxcnc.FLOOD_ON)<br />
    flood(linuxcnc.FLOOD_OFF)<br />
    Constants:<br />
    FLOOD_ON<br />
    FLOOD_OFF
</p>
</dd>
<dt class="hdlist1">
<code>home(int)</code>
</dt>
<dd>
<p>
    home una articulación determinada.
</p>
</dd>
<dt class="hdlist1">
<code>jog(command-constant, bool, int[, float[, float]])</code>
</dt>
<dd>
<p>
    Sintaxis:<br />
    jog(command,                 jjogmode, joint_num_or_axis_index, velocity[, distance]])<br />
    jog(linuxcnc.JOG_STOP,       jjogmode, joint_num_or_axis_index)<br />
    jog(linuxcnc.JOG_CONTINUOUS, jjogmode, joint_num_or_axis_index, velocity)<br />
    jog(linuxcnc.JOG_INCREMENT,  jjogmode, joint_num_or_axis_index, velocity, distance)
    Constantes de comando;
    linuxcnc.JOG_STOP<br />
    linuxcnc.JOG_CONTINUOUS<br />
    linuxcnc.JOG_INCREMENT
</p>
<div class="dlist"><dl>
<dt class="hdlist1">
jjogmode
</dt>
<dd>
<div class="dlist"><dl>
<dt class="hdlist1">
       True
</dt>
<dd>
<p>
solicitar jog de articulacion individual (requiere teleop_enable (0))
</p>
</dd>
<dt class="hdlist1">
       False
</dt>
<dd>
<p>
solicitud jog de eje de coordenadas cartesianas (requiere teleop_enable (1))
</p>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
    joint_num_or_axis_index
</dt>
<dd>
<div class="dlist"><dl>
<dt class="hdlist1">
       Para jog articular (jjogmode = 1)
</dt>
<dd>
<p>
joint_number
</p>
</dd>
<dt class="hdlist1">
       Para jog de eje de coordenadas cartesianas (jjogmode = 0)
</dt>
<dd>
<p>
          índice de base cero de la coordenada del eje con respecto a
          las letras de coordenadas conocidas XYZABCUVW
          (x=&gt;0,y=&gt;1,z=&gt;2,a=&gt;3,b=&gt;4,c=&gt;5,u=&gt;6,v=&gt;7,w=&gt;8)
</p>
</dd>
</dl></div>
</dd>
</dl></div>
</dd>
<dt class="hdlist1">
<code>load_tool_table()</code>
</dt>
<dd>
<p>
    Vuelve a cargar la tabla de herramientas.
</p>
</dd>
<dt class="hdlist1">
<code>maxvel(float)</code>
</dt>
<dd>
<p>
    establecer la velocidad máxima
</p>
</dd>
<dt class="hdlist1">
<code>mdi(string)</code>
</dt>
<dd>
<p>
    Enviar un comando MDI. Máximo 255 caracteres.
</p>
</dd>
<dt class="hdlist1">
<code>mist(int)</code>
</dt>
<dd>
<p>
activa/desactiva la niebla.<br />
    Sintaxis:<br />
    mist(command)<br />
    mist(linuxcnc.MIST_ON)<br />
    mist(linuxcnc.MIST_OFF)<br />
    Constants:<br />
    MIST_ON<br />
    MIST_OFF
</p>
</dd>
<dt class="hdlist1">
<code>mode(int)</code>
</dt>
<dd>
<p>
    establecer modo (MODE_MDI, MODE_MANUAL, MODE_AUTO).
</p>
</dd>
<dt class="hdlist1">
<code>override_limits()</code>
</dt>
<dd>
<p>
    establecer la bandera de límites de ajuste de eje.
</p>
</dd>
<dt class="hdlist1">
<code>program_open(string)</code>
</dt>
<dd>
<p>
    Abrir un archivo NGC.
</p>
</dd>
<dt class="hdlist1">
<code>rapidrate()</code>
</dt>
<dd>
<p>
    establecer factor de ajuste de rápidos
</p>
</dd>
<dt class="hdlist1">
<code>reset_interpreter()</code>
</dt>
<dd>
<p>
    restablecer el intérprete RS274NGC
</p>
</dd>
<dt class="hdlist1">
<code>set_adaptive_feed(int)</code>
</dt>
<dd>
<p>
    establecer bandera de alimentación adaptativa
</p>
</dd>
<dt class="hdlist1">
<code>set_analog_output(int, float)</code>
</dt>
<dd>
<p>
    ajustar el pin de salida analógica al valor
</p>
</dd>
<dt class="hdlist1">
<code>set_block_delete(int)</code>
</dt>
<dd>
<p>
    establecer bloque eliminar bandera
</p>
</dd>
<dt class="hdlist1">
<code>set_digital_output(int, int)</code>
</dt>
<dd>
<p>
    configurar el pin de salida digital al valor
</p>
</dd>
<dt class="hdlist1">
<code>set_feed_hold(int)</code>
</dt>
<dd>
<p>
    activar/desactivar la retención de alimentación
</p>
</dd>
<dt class="hdlist1">
<code>set_feed_override(int)</code>
</dt>
<dd>
<p>
    activar/desactivar el ajuste de alimentación
</p>
</dd>
<dt class="hdlist1">
<code>set_max_limit(int, float)</code>
</dt>
<dd>
<p>
        establecer el límite de posición máxima para un eje dado
</p>
</dd>
<dt class="hdlist1">
<code>set_min_limit()</code>
</dt>
<dd>
<p>
        establecer el límite de posición mínima para un eje dado
</p>
</dd>
<dt class="hdlist1">
<code>set_optional_stop(int)</code>
</dt>
<dd>
<p>
    activar/desactivar parada opcional
</p>
</dd>
<dt class="hdlist1">
<code>set_spindle_override(int [, int])</code>
</dt>
<dd>
<p>
    establecer ajuste del husillo habilitado. Por defecto el husillo 0.
</p>
</dd>
<dt class="hdlist1">
<code>spindle(int [[float] [int] [float, int]])</code>
</dt>
<dd>
<p>
    establecer la dirección del husillo. Uno de SPINDLE_FORWARD,
    SPINDLE_REVERSE, SPINDLE_OFF, SPINDLE_INCREASE,
    SPINDLE_DECREASE o SPINDLE_CONSTANT.
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc
c <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">command</span></span><span style="color: #990000">()</span>

<span style="font-style: italic"><span style="color: #9A1900"># Aumente la velocidad del husillo 0 en 100 rpm. El husillo debe estar encendido primero</span></span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">spindle</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>INCREASE<span style="color: #990000">)</span>

<span style="font-style: italic"><span style="color: #9A1900"># Aumente la velocidad del husillo 2 en 100 rpm. El husillo debe estar encendido primero</span></span>
c<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">spindle</span></span><span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>SPINDLE_INCREASE<span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">)</span>

<span style="font-style: italic"><span style="color: #9A1900"># Establecer la velocidad del husillo de 0 a 1024 rpm</span></span>
c<span style="color: #990000">.</span>spindle<span style="color: #990000">.(</span>linuxcnc<span style="color: #990000">.</span>SPINDLE_FORWARD<span style="color: #990000">,</span> <span style="color: #993399">1024</span><span style="color: #990000">)</span>

<span style="font-style: italic"><span style="color: #9A1900"># Establecer la velocidad del husillo 1 a -666 rpm</span></span>
c<span style="color: #990000">.</span>spindle<span style="color: #990000">.(</span>linuxcnc<span style="color: #990000">.</span>SPINDLE_REVERSE<span style="color: #990000">,</span> <span style="color: #993399">666</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">)</span>

<span style="font-style: italic"><span style="color: #9A1900"># Detener husillo 0</span></span>
c<span style="color: #990000">.</span>spindle<span style="color: #990000">.(</span>linuxcnc<span style="color: #990000">.</span>SPINDLE_OFF<span style="color: #990000">)</span>

<span style="font-style: italic"><span style="color: #9A1900"># Detener el eje 0 explícitamente</span></span>
c<span style="color: #990000">.</span>spindle<span style="color: #990000">.(</span>linuxcnc<span style="color: #990000">.</span>SPINDLE_OFF<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>spindleoverride(float [, int])</code>
</dt>
<dd>
<p>
    establecer el factor de ajuste del husillo. Por defecto el husillo 0.
</p>
</dd>
<dt class="hdlist1">
<code>state(int)</code>
</dt>
<dd>
<p>
    establecer el estado de la máquina. El estado de la máquina debe ser STATE_ESTOP, STATE_ESTOP_RESET, STATE_ON o STATE_OFF
</p>
</dd>
<dt class="hdlist1">
<code>task_plan_sync()</code>
</dt>
<dd>
<p>
        al finalizar esta llamada, el archivo var en el disco se actualiza con
        valores vivos del intérprete.
</p>
</dd>
<dt class="hdlist1">
<code>teleop_enable(int)</code>
</dt>
<dd>
<p>
    habilitar/deshabilitar el modo teleop (deshabilitar para jogging articular).
</p>
</dd>
<dt class="hdlist1">
<code>tool_offset(int, float, float, float, float, float, int)</code>
</dt>
<dd>
<p>
        establecer offset de herramienta. Ver ejemplo de uso arriba.
</p>
</dd>
<dt class="hdlist1">
<code>traj_mode(int)</code>
</dt>
<dd>
<p>
    establecer el modo de trayectoria. El modo es uno de MODE_FREE, MODE_COORD o
    MODE_TELEOP.
</p>
</dd>
<dt class="hdlist1">
<code>unhome(int)</code>
</dt>
<dd>
<p>
    dejar sin home una articulación determinada.
</p>
</dd>
<dt class="hdlist1">
<code>wait_complete([float])</code>
</dt>
<dd>
<p>
    Esperar a que se complete el último comando enviado. Si el tiempo de espera en
    segundos no esta especificado, el valor predeterminado es 5 segundos. Devuelve -1 si
    se agota el tiempo de espera, devuelva RCS_DONE o RCS_ERROR según el
    estado de ejecución del comando
</p>
</dd>
</dl></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lectura_del_canal_de_error">7. Lectura del canal de error</h2>
<div class="sectionbody">
<div class="paragraph"><p>Para manejar mensajes de error, conéctese al canal de error y
periódicamente ejecute poll().</p></div>
<div class="paragraph"><p>Tenga en cuenta que el canal NML para mensajes de error tiene una cola (distinta a
los canales de comando y estado), lo que significa
que el primer consumidor de un mensaje de error elimina ese mensaje de
la cola; si es otro consumidor de mensajes de error (por ejemplo, Axis)
"verá" el mensaje dependiendo del timing. Se recomienda tener solo
una tarea de lector de canal de error en una configuración.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># -*- coding: utf-8 -*-</span></span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc
e <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">error_channel</span></span><span style="color: #990000">()</span>

error <span style="color: #990000">=</span> e<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">poll</span></span><span style="color: #990000">()</span>

<span style="font-weight: bold"><span style="color: #0000FF">if</span></span> error<span style="color: #990000">:</span>
    kind<span style="color: #990000">,</span> text <span style="color: #990000">=</span> error
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> kind <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="color: #990000">(</span>linuxcnc<span style="color: #990000">.</span>NML_ERROR<span style="color: #990000">,</span> linuxcnc<span style="color: #990000">.</span>OPERATOR_ERROR<span style="color: #990000">):</span>
        typus <span style="color: #990000">=</span> <span style="color: #FF0000">"error"</span>
    <span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #990000">:</span>
        typus <span style="color: #990000">=</span> <span style="color: #FF0000">"info"</span>
    <span style="font-weight: bold"><span style="color: #0000FF">print</span></span> typus<span style="color: #990000">,</span> text</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_lectura_de_valores_de_archivo_ini_a_id_python_reading_ini_values_a">8. Lectura de valores de archivo ini <a id="python:reading-ini-values"></a></h2>
<div class="sectionbody">
<div class="paragraph"><p>Aquí hay un ejemplo para leer valores de un archivo ini a través del
objeto <code>linuxcnc.ini</code>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">#!/usr/bin/env python</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># -*- coding: utf-8 -*-</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># run as:</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># python ini-example.py ~/emc2-dev/configs/sim/axis/axis_mm.ini</span></span>

<span style="font-weight: bold"><span style="color: #000080">import</span></span> sys
<span style="font-weight: bold"><span style="color: #000080">import</span></span> linuxcnc

inifile <span style="color: #990000">=</span> linuxcnc<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">ini</span></span><span style="color: #990000">(</span>sys<span style="color: #990000">.</span>argv<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">])</span>

<span style="font-style: italic"><span style="color: #9A1900"># inifile.find () devuelve None si no se encontró la clave: el</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># following idiom es útil para establecer un valor predeterminado:</span></span>

machine_name <span style="color: #990000">=</span> inifile<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">find</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"EMC"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"MACHINE"</span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">or</span></span> <span style="color: #FF0000">"unknown"</span>
<span style="font-weight: bold"><span style="color: #0000FF">print</span></span> <span style="color: #FF0000">"machine name: "</span><span style="color: #990000">,</span> machine_name

<span style="font-style: italic"><span style="color: #9A1900"># inifile.findall () devuelve una lista de coincidencias o una lista vacía</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># si no se encontró la clave:</span></span>

extensions <span style="color: #990000">=</span> inifile<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">findall</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"FILTER"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"PROGRAM_EXTENSION"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">print</span></span> <span style="color: #FF0000">"extensions: "</span><span style="color: #990000">,</span> extensions

<span style="font-style: italic"><span style="color: #9A1900"># anular el archivo NML predeterminado por parámetro ini si se proporciona</span></span>
nmlfile <span style="color: #990000">=</span> inifile<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">find</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"EMC"</span><span style="color: #990000">,</span> <span style="color: #FF0000">"NML_FILE"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">if</span></span> nmlfile<span style="color: #990000">:</span>
    linuxcnc<span style="color: #990000">.</span>nmlfile <span style="color: #990000">=</span> os<span style="color: #990000">.</span>path<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">join</span></span><span style="color: #990000">(</span>os<span style="color: #990000">.</span>path<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">dirname</span></span><span style="color: #990000">(</span>sys<span style="color: #990000">.</span>argv<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]),</span> nmlfile<span style="color: #990000">)</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_el_tipo_code_linuxcnc_positionlogger_code">9. El tipo <code>linuxcnc.positionlogger</code></h2>
<div class="sectionbody">
<div class="paragraph"><p>Algunas sugerencias de uso se pueden obtener de
<code>src/emc/usr_intf/gremlin/gremlin.py</code>.</p></div>
<div class="sect2">
<h3 id="_miembros">9.1. miembros</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>npts</code> 
</dt>
<dd>
<p>
    número de puntos.
</p>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_métodos">9.2. métodos</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
<code>start(float)</code>
</dt>
<dd>
<p>
    iniciar el registrador de posición y ejecutar cada ARG segundos
</p>
</dd>
<dt class="hdlist1">
<code>clear()</code>
</dt>
<dd>
<p>
    borrar el registrador de posición
</p>
</dd>
<dt class="hdlist1">
<code>stop()</code>
</dt>
<dd>
<p>
    detener el registrador de posición
</p>
</dd>
<dt class="hdlist1">
<code>call()</code>
</dt>
<dd>
<p>
    plot el backplot ahora.
</p>
</dd>
<dt class="hdlist1">
<code>last([int])</code>
</dt>
<dd>
<p>
    Devuelve el punto más reciente de la trama o ninguno.
,
</p>
</dd>
</dl></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-11-24 07:38:35 MST
</div>
</div>
</body>
</html>
