<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title>INI Configuration</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>INI Configuration</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="cha:ini-configuration">1. The INI File Components</h2>
<div class="sectionbody">
<div class="paragraph"><p>A typical INI file follows a rather simple layout that includes;</p></div>
<div class="ulist"><ul>
<li>
<p>
comments
</p>
</li>
<li>
<p>
sections
</p>
</li>
<li>
<p>
variables
</p>
</li>
</ul></div>
<div class="paragraph"><p>Each of these elements is separated on single lines. Each end of line
or newline character creates a new element.</p></div>
<div class="paragraph"><p></p></div>
<div class="sect2">
<h3 id="_comments">1.1. Comments</h3>
<div class="paragraph"><p>A comment line is started with a ; or a # mark. When the ini reader
sees either of these marks at the start a line, the rest of the line is
ignored by the software. Comments can be used to describe what an INI
element will do.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>; This is my mill configuration file.
# I set it up on January 12, 2012</code></pre>
</div></div>
<div class="paragraph"><p>Comments can also be used to <em>turn off</em> a variable. This makes it easier
to pick between different variables.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>DISPLAY = axis
# DISPLAY = touchy</code></pre>
</div></div>
<div class="paragraph"><p>In this list, the DISPLAY variable will be set to axis because the
other one is commented out. If someone carelessly edits a list like
this and leaves two of the lines uncommented, the first one encountered
will be used.</p></div>
<div class="paragraph"><p>Note that inside a variable, the "#" and ";" characters do not denote
comments:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>INCORRECT = value     # and a comment

# Correct Comment
CORRECT = value</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_sections">1.2. Sections</h3>
<div class="paragraph"><p>Related parts of an ini file are separated into sections.
A section name is enclosed in brackets like this <em>[THIS_SECTION]</em>
The order of sections is unimportant. Sections begin at the section
name and end at the next section name.</p></div>
<div class="paragraph"><p>The following sections are used by LinuxCNC:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>[<a href="ini-config.html#sec:emc-section">EMC</a>]</em> general information
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:display-section">DISPLAY</a>]</em> settings related to the graphical user interface
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:filter-section">FILTER</a>]</em> settings input filter programs
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:rs274ngc-section">RS274NGC</a>]</em> settings used by the g-code interpreter
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:emcmot-section">EMCMOT</a>]</em> settings used by the real time motion controller
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:task-section">TASK</a>]</em> settings used by the task controller
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:hal-section">HAL</a>]</em> specifies .hal files
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:halui-section">HALUI</a>]</em> MDI commands used by HALUI
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:applications-section">APPLICATIONS</a>]</em> Other applications to be started by LinuxCNC
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:traj-section">TRAJ</a>]</em> additional settings used by the real time motion controller
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:joint-section">JOINT_n</a>]</em> individual joint variables
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:axis-section">AXIS_n</a>]</em> individual axis variables
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:kins-section">KINS</a>]</em> kinematics variables
</p>
</li>
<li>
<p>
<em>[<a href="ini-config.html#sec:emcio-section">EMCIO</a>]</em> settings used by the I/O Controller
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_variables">1.3. Variables</h3>
<div class="paragraph"><p>A variable line is made up of a variable name, an equals sign (=), and
a value. Everything from the first non-white space character after the
= up to the end of the line is passed as the value, so you can embed
spaces in string symbols if you want to or need to. A variable name is
often called a keyword.</p></div>
<div class="listingblock">
<div class="title">Variable Example</div>
<div class="content">
<pre><code>MACHINE = My Machine</code></pre>
</div></div>
<div class="paragraph"><p>A variable line may be extended to multiple lines with a terminal backslash (\)
character.  A maximum of MAX_EXTEND_LINES (==20) are allowed.  There must be no
whitespace following the trailing backslash character.</p></div>
<div class="paragraph"><p>Section identifiers may not be extended to multiple lines.</p></div>
<div class="listingblock">
<div class="title">Variable with Line extends Example</div>
<div class="content">
<pre><code>APP = sim_pin \
ini.0.max_acceleration \
ini.1.max_acceleration \
ini.2.max_acceleration \
ini.0.max_velocity \
ini.1.max_velocity \
ini.2.max_velocity</code></pre>
</div></div>
<div class="paragraph"><p>The following sections detail each section of the configuration file,
using sample values for the configuration lines.</p></div>
<div class="paragraph"><p>Variables that are used by LinuxCNC must always use the section
names and variable names as shown. In the following example the variable
<em>MACHINE</em> is assigned the value <em>My Machine</em>.</p></div>
</div>
<div class="sect2">
<h3 id="sub:custom-variables">1.4. Custom Sections and Variables</h3>
<div class="paragraph"><p>Most sample configurations use custom sections and variables to put all of the
settings into one location for convenience.</p></div>
<div class="paragraph"><p>To add a custom variable to an existing LinuxCNC section, simply include
the variable in that section.</p></div>
<div class="listingblock">
<div class="title">Custom Variable Example</div>
<div class="content">
<pre><code>[JOINT_0]
TYPE = LINEAR
...
SCALE = 16000</code></pre>
</div></div>
<div class="paragraph"><p>To introduce a custom section with its own variables, add the section
and variables to the INI file.</p></div>
<div class="listingblock">
<div class="title">Custom Section Example</div>
<div class="content">
<pre><code>[PROBE]
Z_FEEDRATE = 50
Z_OFFSET = 12
Z_SAFE_DISTANCE = -10</code></pre>
</div></div>
<div class="paragraph"><p>To use the custom variables in your HAL file, put the section and
variable name in place of the value.</p></div>
<div class="listingblock">
<div class="title">HAL Example</div>
<div class="content">
<pre><code>setp offset.1.offset [PROBE]Z_OFFSET
setp stepgen.0.position-scale [JOINT_0]SCALE</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The value stored in the variable must match the type specified by the
component pin.</td>
</tr></table>
</div>
<div class="paragraph"><p>To use the custom variables in G-code, use the global variable syntax
<code>#&lt;_ini[section]variable&gt;</code>. The following example shows a simple
Z-axis touch-off routine for a router or mill using a probe plate.</p></div>
<div class="listingblock">
<div class="title">G-code Example</div>
<div class="content">
<pre><code>G91
G38.2 Z#&lt;_ini[probe]z_safe_distance&gt; F#&lt;_ini[probe]z_feedrate&gt;
G90
G1 Z#5063
G10 L20 P0 Z#&lt;_ini[probe]z_offset&gt;</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_include_files">1.5. Include Files</h3>
<div class="paragraph"><p>An INI file may include the contents of another file by using a #INCLUDE
directive.</p></div>
<div class="listingblock">
<div class="title">#INCLUDE Format</div>
<div class="content">
<pre><code>#INCLUDE filename</code></pre>
</div></div>
<div class="paragraph"><p>The filename can be specified as:</p></div>
<div class="ulist"><ul>
<li>
<p>
a file in the same directory as the INI file
</p>
</li>
<li>
<p>
a file located relative to the working directory
</p>
</li>
<li>
<p>
an absolute file name (starts with a /)
</p>
</li>
<li>
<p>
a user-home-relative file name (starts with a ~)
</p>
</li>
</ul></div>
<div class="paragraph"><p>Multiple #INCLUDE directives are supported.</p></div>
<div class="listingblock">
<div class="title">#INCLUDE Examples</div>
<div class="content">
<pre><code>#INCLUDE joint_0.inc
#INCLUDE ../parallel/joint_1.inc
#INCLUDE below/joint_2.inc
#INCLUDE /home/myusername/myincludes/display.inc
#INCLUDE ~/linuxcnc/myincludes/rs274ngc.inc</code></pre>
</div></div>
<div class="paragraph"><p>The #INCLUDE directives are supported for one level of expansion only&#8201;&#8212;&#8201;an
included file may not include additional files.  The recommended file extension
is .inc.  Do not use a file extension of .ini for included files.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ini_file_sections">2. INI File Sections</h2>
<div class="sectionbody">
<div class="paragraph"><p><a id="sec:emc-section"></a></p></div>
<div class="sect2">
<h3 id="_emc_section">2.1. [EMC] Section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>VERSION = 1.1</em> - The version number for the configuration. Any value other
    than 1.1 will cause the configuration checker to run and try to update the
    configuration to the new style joint axes type of configuration.
</p>
</li>
<li>
<p>
<em>MACHINE = My Controller</em> - This is the name of the controller, which is
    printed out at the top of most graphical interfaces. You can put whatever
    you want here as long as you make it a single line long.
</p>
</li>
<li>
<p>
<em>DEBUG = 0</em> - Debug level 0 means no messages will be printed when LinuxCNC is
  run from a <a href="../common/linux-faq.html#faq:terminal">terminal</a>. Debug flags are usually only useful to
  developers. See src/emc/nml_intf/debugflags.h for other settings.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:display-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_display_section">2.2. [DISPLAY] Section</h3>
<div class="paragraph"><p>Different user interface programs use different options, and not every
option is supported by every user interface. There are several interfaces,
like Axis, Gmoccapy, Touchy, qtvcp&#8217;s QtDragon and Gscreen.
Axis is an interface for use with normal
computer and monitor, Touchy is for use with touch screens. Gmoccapy
can be used both ways and offers also many connections for hardware controls.
Descriptions of the interfaces are in the Interfaces section of the
User Manual.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>DISPLAY = axis</em> - The name of the user interface to use. Valid options
   may include: <em>axis</em>, <em>touchy</em>, <em>gmoccapy</em>, <em>gscreen</em>, <em>tklinuxcnc</em>, <em>qtvcp</em>
</p>
</li>
<li>
<p>
<em>POSITION_OFFSET = RELATIVE</em> - The coordinate system (RELATIVE or MACHINE)
  to show on the DRO when the user interface starts. The RELATIVE coordinate
  system reflects the G92 and G5x coordinate offsets currently in effect.
</p>
</li>
<li>
<p>
<em>POSITION_FEEDBACK = COMMANDED</em> - The coordinate value (COMMANDED or ACTUAL)
  to show on the DRO when the user interface starts. In Axis this can be changed
  from the View menu. The COMMANDED position is the position requested by
  LinuxCNC. The ACTUAL position is the feedback position of the motors if they
  have feedback like most servo systems. Typically the COMMANDED value is used.
</p>
</li>
<li>
<p>
<em>DRO_FORMAT_MM = %+08.6f</em> - Over-ride the default DRO formatting in metric
  mode. (normally 3 decimal places, padded with spaces to 6 digits to the left)
  the example above will pad with zeros, display 6 decimal digits and force
  display of a + sign for positive numbers. Formatting follows Python practice.
  <a href="https://docs.python.org/2/library/string.html#format-specification-mini-language">https://docs.python.org/2/library/string.html#format-specification-mini-language</a>
  an error will be raised if the format can not accept a floating-point value.
</p>
</li>
<li>
<p>
<em>DRO_FORMAT_IN = % 4.1f</em> - Over-ride the default DRO formatting in imperial
  mode. (normally 4 decimal places, padded with spaces to 6 digits to the left)
  the example above will display only one decimal digit. Formatting follows
  Python practice.
  <a href="https://docs.python.org/2/library/string.html#format-specification-mini-language">https://docs.python.org/2/library/string.html#format-specification-mini-language</a>
  An error will be raised if the format can not accept a floating-point value.
</p>
</li>
<li>
<p>
<em>CONE_BASESIZE = .25</em> - Over-ride the default cone/tool base size of .5 in
  the graphics display
</p>
</li>
<li>
<p>
<em>MAX_FEED_OVERRIDE = 1.2</em> - The maximum feed override the user may select.
  1.2 means 120% of the programmed feed rate.
</p>
</li>
<li>
<p>
<em>MIN_SPINDLE_OVERRIDE = 0.5</em> - The minimum spindle override the user may
  select. 0.5 means 50% of the programmed spindle speed. (This is used to
  set the minimum spindle speed).
</p>
</li>
<li>
<p>
<em>MIN_SPINDLE_0_OVERRIDE = 0.5</em>- The minimum spindle override the user may
  select. 0.5 means 50% of the programmed spindle speed. (This is used to
  set the minimum spindle speed). On multi spindle machine there will be entries for each spindle number. Qtvcp only
</p>
</li>
<li>
<p>
<em>MAX_SPINDLE_OVERRIDE = 1.0</em> - The maximum spindle override the user may
  select. 1.0 means 100% of the programmed spindle speed.
</p>
</li>
<li>
<p>
<em>MAX_SPINDLE_0_OVERRIDE = 1.0</em> - The maximum feed override the user may select.
  1.2 means 120% of the programmed feed rate.
On multi spindle machine there will be entries for each spindle number. Qtvcp only
</p>
</li>
<li>
<p>
<em>DEFAULT_SPINDLE_SPEED = 100</em> - The default spindle RPM when the spindle
  is started in manual mode. if this setting is not present, this
  defaults to 1 RPM for AXIS and 300 RPM for gmoccapy.
</p>
</li>
<li>
<p>
<em>DEFAULT_SPINDLE_0_SPEED = 100</em> - The default spindle RPM when the spindle
  is started in manual mode. On multi spindle machine there will be entries for each spindle number. Qtvcp only
</p>
</li>
<li>
<p>
<em>SPINDLE_INCREMENT = 200</em> - The increment used when clicking increase/decrease buttons Qtvcp only
</p>
</li>
<li>
<p>
<em>MIN_SPINDLE_0_SPEED = 1000</em> - The minimum RPM that can be manually selected.
On multi spindle machine there will be entries for each spindle number. Qtvcp only
</p>
</li>
<li>
<p>
<em>MAX_SPINDLE_0_SPEED = 20000</em> - The maximum RPM that can be manually selected.
On multi spindle machine there will be entries for each spindle number. Qtvcp only
</p>
</li>
<li>
<p>
<em>PROGRAM_PREFIX = ~/linuxcnc/nc_files</em> - The default location for g-code
  files and the location for user-defined M-codes. This location is searched
  for the file name before the subroutine path and user M path if specified
  in the [RS274NGC] section.
</p>
</li>
<li>
<p>
<em>INTRO_GRAPHIC = emc2.gif</em> - The image shown on the splash screen.
</p>
</li>
<li>
<p>
<em>INTRO_TIME = 5</em> - The maximum time to show the splash screen, in seconds.
</p>
</li>
<li>
<p>
<em>CYCLE_TIME = 0.05</em> - Cycle time in seconds that display will sleep between
   polls.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The following [DISPLAY] items are used by GladeVCP, see the
<a href="../gui/gladevcp.html#gladevcp:embeding-tab">embedding a tab</a> section of the GladeVCP Chapter.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>EMBED_TAB_NAME=GladeVCP demo</em>
</p>
</li>
<li>
<p>
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Different user interface programs use different options, and not every
option is supported by every user interface.
See <a href="../gui/axis.html#cha:axis-gui">AXIS GUI</a> document for AXIS details.
See <a href="../gui/gmoccapy.html#cha:gmoccapy">gmoccapy</a> document for Gmoccapy details.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>DEFAULT_LINEAR_VELOCITY = .25</em> - The default velocity for linear jogs, in ,
   <a href="ini-config.html#sec:traj-section">machine units</a> per second.
</p>
</li>
<li>
<p>
<em>MIN_VELOCITY = .01</em> - The approximate lowest value the jog slider.
</p>
</li>
<li>
<p>
<em>MAX_LINEAR_VELOCITY = 1.0</em> - The maximum velocity for linear jogs, in machine units per second.
</p>
</li>
<li>
<p>
<em>MIN_LINEAR_VELOCITY = .01</em> - The approximate lowest value the jog slider.
</p>
</li>
<li>
<p>
<em>DEFAULT_ANGULAR_VELOCITY = .25</em> - The default velocity for angular jogs, in machine units per second.
</p>
</li>
<li>
<p>
<em>MIN_ANGULAR_VELOCITY = .01</em> - The approximate lowest value the angular jog slider.
</p>
</li>
<li>
<p>
<em>MAX_ANGULAR_VELOCITY = 1.0</em> - The maximum velocity for angular jogs, in machine units per second.
</p>
</li>
<li>
<p>
<em>INCREMENTS = 1 mm, .5 in, &#8230;</em> - Defines the increments available for incremental jogs.
    The INCREMENTS can be used to override the default.
    The values can be decimal numbers (e.g., 0.1000) or fractional numbers (e.g., 1/16),
    optionally followed by a unit (cm, mm, um, inch, in or mil).
    If a unit is not specified the machine unit is assumed.
    Metric and imperial distances may be mixed:
    INCREMENTS = 1 inch, 1 mil, 1 cm, 1 mm, 1 um is a valid entry.
</p>
</li>
<li>
<p>
<em>GRIDS = 10 mm, 1 in, &#8230;</em> - Defines the preset values for grid lines.
    The value is interpreted the same way as <em>INCREMENTS</em>.
</p>
</li>
<li>
<p>
<em>OPEN_FILE = /full/path/to/file.ngc</em> - The file to show in the preview plot when AXIS starts. Use
   a blank string "" and no file will be loaded at start up. gmoccapy will not use this setting, as it
   offers a corresponding entry on its settings page.
</p>
</li>
<li>
<p>
<em>EDITOR = gedit</em> - The editor to use when selecting File &gt; Edit to edit the G code
    from the AXIS menu. This must be configured for this menu item to
    work. Another valid entry is gnome-terminal -e vim. This entry does not apply to gmoccapy, as gmoccapy
    has an integrated editor.
</p>
</li>
<li>
<p>
<em>TOOL_EDITOR = tooledit</em> - The editor to use when editing the tool table (for example by
    selecting "File &gt; Edit tool table&#8230;" in Axis). Other valid
    entries are "gedit", "gnome-terminal -e vim", and "gvim". This entry does not apply to gmoccapy, as gmoccapy
    has an integrated editor.
</p>
</li>
<li>
<p>
<em>PYVCP = /filename.xml</em> - The PyVCP panel description file. See the
    <a href="../gui/pyvcp.html#cha:pyvcp">PyVCP Chapter</a> for more information.
</p>
</li>
<li>
<p>
<em>PYVCP_POSITION = BOTTOM</em> - The placement of the PyVCP panel in the AXIS user interface.
    If this variable is omitted the panel will default to the right side. The only valid
    alternative is BOTTOM. See the <a href="../gui/pyvcp.html#cha:pyvcp">PyVCP Chapter</a> for more information.
</p>
</li>
<li>
<p>
<em>LATHE = 1</em> - Any non-empty value (including "0") causes axis to use "lathe mode" with a top view and with Radius and Diameter on the DRO.
</p>
</li>
<li>
<p>
<em>BACK_TOOL_LATHE = 1</em> - Any non-empty value (including "0") causes axis to use "back tool lathe mode" with inverted X axis.
</p>
</li>
<li>
<p>
<em>FOAM = 1</em> - Any non-empty value (including "0") causes axis to change the display for foam-cutter mode.
</p>
</li>
<li>
<p>
<em>GEOMETRY = XYZABCUVW</em> - Controls the preview and backplot of rotary motion. This item consists
    of a sequence of axis letters, optionally preceded by a "-" sign.
    This sequence specifies the order in which the effect
    of each axis is applied, with a "-" inverting the sense of the
    rotation.
     The proper GEOMETRY string depends on the machine configuration and
    the kinematics used to control it. The example string GEOMETRY=XYZBCUVW
    is for a 5-axis machine where kinematics causes UVW to move in the
    coordinate system of the tool and XYZ to move in the coordinate system
    of the material. The order of the letters is important, because it
    expresses the order in which the different transformations are applied.
    For example rotating around C then B is different than rotating around
    B then C. Geometry has no effect without a rotary axis.
     Foam-cutting machines (FOAM = 1) should specify "XY;UV" or leave the value
    blank even though this value is presently ignored in foam-cutter mode.  A
    future version may define what ";" means, but if it does "XY;UV" will mean
    the same as the current foam default.
</p>
</li>
<li>
<p>
<em>ARCDIVISION = 64</em> - Set the quality of preview of arcs. Arcs are previewed by dividing
    them into a number of straight lines; a semicircle is divided into
    <strong>ARCDIVISION</strong> parts. Larger values give a more accurate preview, but
    take longer to
    load and result in a more sluggish display. Smaller values give a less
    accurate preview, but take less time to load and may result in a faster
    display. The default value of 64 means a circle of up to 3 inches will
    be displayed to within 1 mil (.03%).
</p>
</li>
<li>
<p>
<em>MDI_HISTORY_FILE =</em> - The name of a local MDI history file. If this is not specified Axis
    will save the MDI history in <strong>.axis_mdi_history</strong> in the user&#8217;s home
    directory. This is useful if you have multiple configurations on one
    computer.
</p>
</li>
<li>
<p>
<em>JOG_AXES =</em> - The order in which jog keys are assigned to axis letters.  The left and right arrows are assigned to the first axis letter, up and down to the second, page up/page down to the third, and left and right bracket to the fourth.  If unspecified, the default is determined from the [TRAJ]COORDINATES, [DISPLAY]LATHE and [DISPLAY]FOAM values.
</p>
</li>
<li>
<p>
<em>JOG_INVERT =</em> - For each axis letter, the jog direction is inverted.  The default is "X" for lathes and blank otherwise.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The settings for <em>JOG_AXES</em> and <em>JOG_INVERT</em> apply to world mode jogging by axis coordinate letter
and are in effect while in world mode after successful homing.  When operating in joint
mode prior to homing, keyboard jog keys are assigned in a fixed sequence: left/right: joint0,
up/down: joint1, page up/page down: joint2, left/right bracket: joint3</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>USER_COMMAND_FILE = mycommands.py</em>&#8201;&#8212;&#8201;The name of an optional, configuration-specific
  python file sourced by the axis gui instead of the user-specific file <code>~/.axisrc</code>.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The following [DISPLAY] item is used by the TKLinuxCNC interface only.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>HELP_FILE = tklinucnc.txt</em> - Path to help file.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:filter-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_filter_section">2.3. [FILTER] Section</h3>
<div class="paragraph"><p>AXIS and gmoccapy have the ability to send loaded files through a filter program.
This filter can do any desired task: Something as simple as making sure
the file ends with M2, or something as complicated as detecting whether
the input is a depth image, and generating g-code to mill the shape it
defines. The [FILTER] section of the ini file controls how filters
work. First, for each type of file, write a PROGRAM_EXTENSION line.
Then, specify the program to execute for each type of file. This
program is given the name of the input file as its first argument, and
must write RS274NGC code to standard output. This output is what will
be displayed in the text area, previewed in the display area, and
executed by LinuxCNC when Run.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>PROGRAM_EXTENSION = .extension Description</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>If your post processor outputs files in all caps you might want to add
the following line:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>PROGRAM_EXTENSION = .NGC XYZ Post Processor</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>The following lines add support for the image-to-G code converter
included with LinuxCNC.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>PROGRAM_EXTENSION = .png,.gif,.jpg Greyscale Depth Image</em>
</p>
<div class="ulist"><ul>
<li>
<p>
<em>png = image-to-gcode</em>
</p>
</li>
<li>
<p>
<em>gif = image-to-gcode</em>
</p>
</li>
<li>
<p>
<em>jpg = image-to-gcode</em>
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>An example of a custom G code converter located in the linuxcnc directory.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>PROGRAM_EXTENSION = .gcode 3D Printer</em>
</p>
<div class="ulist"><ul>
<li>
<p>
<em>gcode = /home/mill/linuxcnc/convert.py</em>
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The program file assoiated with an extension must have either the full
path to the program or be located in a directory that is on the system path.</td>
</tr></table>
</div>
<div class="paragraph"><p>It is also possible to specify an interpreter:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>PROGRAM_EXTENSION = .py Python Script</em>
</p>
<div class="ulist"><ul>
<li>
<p>
<em>py = python</em>
</p>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>In this way, any Python script can be opened, and its output is
treated as g-code. One such example script is available at
nc_files/holecircle.py. This script creates g-code for drilling a
series of holes along the circumference of a circle. Many more g-code
generators are on the LinuxCNC Wiki site
<a href="http://wiki.linuxcnc.org/">http://wiki.linuxcnc.org/</a>.</p></div>
<div class="paragraph"><p>If the environment variable AXIS_PROGRESS_BAR is set, then lines
written to stderr of the form</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>FILTER_PROGRESS=%d</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>sets the AXIS progress bar to the given percentage. This feature
should be used by any filter that runs for a long time.</p></div>
<div class="paragraph"><p>Python filters should use the print function to output the result to Axis.</p></div>
<div class="paragraph"><p>This example program filters a file and adds a W axis to match the Z axis.
It depends on there being a space between each axis word to work.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>#!/usr/bin/env python

import sys

def main(argv):

  openfile = open(argv[0], 'r')
  file_in = openfile.readlines()
  openfile.close()

  file_out = []
  for line in file_in:
    # print line
    if line.find('Z') != -1:
      words = line.rstrip('\n')
      words = words.split(' ')
      newword = ''
      for i in words:
        if i[0] == 'Z':
          newword = 'W'+ i[1:]
      if len(newword) &gt; 0:
        words.append(newword)
        newline = ' '.join(words)
        file_out.append(newline)
    else:
      file_out.append(line)
  for item in file_out:
    print "%s" % item

if __name__ == "__main__":
   main(sys.argv[1:])</code></pre>
</div></div>
<div class="paragraph"><p><a id="sec:rs274ngc-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="gcode:ini-features">2.4. [RS274NGC] Section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>PARAMETER_FILE = myfile.var</em> -
     The file located in the same directory as the ini
    file which contains the parameters used by the interpreter (saved
    between runs).
</p>
</li>
<li>
<p>
<em>ORIENT_OFFSET = 0</em> -
     A float value added to the R word parameter
    of an <a href="../gcode/m-code.html#mcode:m19">M19 Orient Spindle</a> operation. Used to define an arbitrary
    zero position regardless of encoder mount orientation.
</p>
</li>
<li>
<p>
<em>RS274NGC_STARTUP_CODE = G17 G20 G40 G49 G64 P0.001 G80 G90 G92 G94 G97 G98</em> -
     A string of NC codes that the interpreter
    is initialized with. This is not a substitute for specifying modal
    g-codes at the top of each ngc file, because the modal codes of
    machines differ, and may be changed by g-code interpreted earlier in
    the session.
</p>
</li>
<li>
<p>
<em>SUBROUTINE_PATH = ncsubroutines:/tmp/testsubs:lathesubs:millsubs</em> -
     Specifies a colon (:) separated list of up to 10
    directories to be searched when single-file subroutines are specified
    in gcode. These directories are searched after searching
    [DISPLAY]PROGRAM_PREFIX (if it is specified) and before searching
    [WIZARD]WIZARD_ROOT (if specified). The paths are searched in the order
    that they are listed. The first matching subroutine file
    found in the search is used. Directories are specified relative to the
    current directory for the ini file or as absolute paths. The list must
    contain no intervening whitespace.
</p>
</li>
<li>
<p>
<em>CENTER_ARC_RADIUS_TOLERANCE_INCH = n</em> Default 0.00005
</p>
</li>
<li>
<p>
<em>CENTER_ARC_RADIUS_TOLERANCE_MM = n</em> Default 0.00127
</p>
</li>
<li>
<p>
<em>USER_M_PATH = myfuncs:/tmp/mcodes:experimentalmcodes</em> - 
   Specifies a list of colon (:) separated directories for user defined
   functions. Directories are specified relative to the current directory
   for the ini file or as absolute paths. The list must contain no intervening
   whitespace.
</p>
<div class="paragraph"><p>A search is made for each possible user defined function, typically
(M100-M199). The search order is:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
[DISPLAY]PROGRAM_PREFIX (if specified)
</p>
</li>
<li>
<p>
If [DISPLAY]PROGRAM_PREFIX is not specified, search the default location: nc_files
</p>
</li>
<li>
<p>
Then search each directory in the list [RS274NGC]USER_M_PATH
</p>
<div class="paragraph"><p>The first executable M1xx found in the search is used for each M1xx.</p></div>
</li>
</ol></div>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The maximum number of USER_M_PATH directories is defined at compile
time (typ: <em>USER_DEFINED_FUNCTION_MAX_DIRS == 5</em>).</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>INI_VARS = 1</em> Default 1
Allows G-code programs to read values from the INI file using the format
#&lt;_ini[section]name&gt;. See <a href="../gcode/overview.html#gcode:parameters">G-code Parameters</a>.
</p>
</li>
<li>
<p>
<em>HAL_PIN_VARS = 1</em> Default 1
Allows G-code programs to read the values of HAL pins using the format
#&lt;_hal[Hal item]&gt;.  Variable access is read-only.
See <a href="../gcode/overview.html#gcode:parameters">G-code Parameters</a> for more details and an
important caveat.
</p>
</li>
<li>
<p>
<em>RETAIN_G43 = 0</em> Default 0
When set, you can  turn on G43 after loading the first tool,
and then not worry about it through the program.  When you
finally unload the last tool, G43 mode is canceled.
</p>
</li>
<li>
<p>
<em>OWORD_NARGS = 0</em> Default 0
If this feature is enabled then a called subroutine can determine the
number of actual positional parameters passed by inspecting the
<code>#&lt;n_args&gt;</code> parameter.
</p>
</li>
<li>
<p>
<em>NO_DOWNCASE_OWORD = 0</em> Default 0
Preserve case in O-word names within comments if set, enables reading of
mixed-case HAL items in structured comments like
<em>(debug, #&lt;_hal[MixedCaseItem])</em>.
</p>
</li>
<li>
<p>
<em>OWORD_WARNONLY = 0</em> Default 0
Warn rather than error in case of errors in O-word subroutines.
</p>
</li>
<li>
<p>
<em>DISABLE_G92_PERSISTENCE = 0</em> Default 0
Allow to clear the G92 offset automatically when config start-up.
</p>
</li>
<li>
<p>
<em>DISABLE_FANUC_STYLE_SUB = 0</em> Default 0
If there is reason to disable Fanuc subroutines set it to 1.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph"><p>The above six options were controlled by the <em>FEATURES</em> bitmask
in versions of LinuxCNC prior to 2.8. This INI tag will no longer
work.<br />
For reference:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>FEATURES &amp; 0x1  -&gt; RETAIN_G43
FEATURES &amp; 0x2  -&gt; OWORD_NARGS
FEATURES &amp; 0x4  -&gt; INI_VARS
FEATURES &amp; 0x8  -&gt; HAL_PIN_VARS
FEATURES &amp; 0x10 -&gt; NO_DOWNCASE_OWORD
FEATURES &amp; 0x20 -&gt; OWORD_WARNONLY</code></pre>
</div></div>
</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">[WIZARD]WIZARD_ROOT is a valid search path but the Wizard has not been fully
implemented and the results of using it are unpredictable.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>LOG_LEVEL = 0</em> Default 0
Specify the log_level (default: -1)
</p>
</li>
<li>
<p>
<em>LOG_FILE = file-name.log</em>
For specify the file used for log the data.
</p>
</li>
<li>
<p>
<em>REMAP=M400  modalgroup=10 argspec=Pq ngc=myprocedure</em>
See <a href="../remap/remap.html#cha:remap">Remap Extending G-Code</a> chapter for details.
</p>
</li>
<li>
<p>
<em>ON_ABORT_COMMAND=O &lt;on_abort&gt; call</em>
See <a href="../remap/remap.html#cha:remap">Remap Extending G-Code</a> chapter for details.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:emcmot-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_emcmot_section">2.5. [EMCMOT] Section</h3>
<div class="paragraph"><p>This section is a custom section and is not used by LinuxCNC directly. Most
configurations use values from this section to load the motion controller. For
more information on the motion controller see the <a href="core-components.html#sec:motion">Motion</a>
Section.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>EMCMOT = motmod</em> - the motion controller name is typically used here.
</p>
</li>
<li>
<p>
<em>BASE_PERIOD = 50000</em> - the <em>Base</em> task period in nanoseconds.
</p>
</li>
<li>
<p>
<em>SERVO_PERIOD = 1000000</em> - This is the "Servo" task period in nanoseconds.
</p>
</li>
<li>
<p>
<em>TRAJ_PERIOD = 100000</em> - This is the <em>Trajectory Planner</em> task period in
  nanoseconds.
</p>
</li>
<li>
<p>
<em>COMM_TIMEOUT = 1.0</em> - Number of seconds to wait for Motion (the
  realtime part of the motion controller) to acknowledge receipt of
  messages from Task (the non-realtime part of the motion controller).
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:task-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_task_section">2.6. [TASK] Section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>TASK = milltask</em> -
    Specifies the name of the <em>task</em> executable. The <em>task</em> executable does various
    things, such as communicate with the UIs over NML, communicate with the
    realtime motion planner over non-HAL shared memory, and interpret gcode.
    Currently there is only one task executable that makes sense for
    99.9% of users, milltask.
</p>
</li>
<li>
<p>
<em>CYCLE_TIME = 0.010</em> -
    The period, in seconds, at which TASK will run. This parameter
    affects the polling interval when waiting for motion to complete, when
    executing a pause instruction, and when accepting a command from a user
    interface. There is usually no need to change this number.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:hal-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_hal_section">2.7. [HAL] section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>HALFILE = example.hal</em> - Execute the file <em>example.hal</em> at start up.
    If <em>HALFILE</em> is specified multiple times, the files are executed in the order they
    appear in the ini file. Almost all configurations will have at least
    one <em>HALFILE</em>, and stepper systems typically have two such files, one which
    specifies the generic stepper configuration (<em>core_stepper.hal</em>) and
    one which specifies the machine pin out (<em>xxx_pinout.hal</em>).
    HALFILES are found using a search.  If the named file is found in the directory
    containing the ini file, it is used.  If the named file is not found in this
    ini file directory, a search is made using a system library of halfiles.
    A HALFILE may also be specified as an absolute path (when the name starts with
    a <em>/</em> character).  Absolute paths are not recommended as their use may limit
    relocation of configurations.
</p>
</li>
<li>
<p>
<em>HALFILE = texample.tcl [arg1 [arg2] &#8230;]]</em> - Execute the tcl file <em>texample.tcl</em>
    at start up with arg1, arg2, etc as ::argv list.  Files with a .tcl suffix are
    processed as above but use haltcl for processing  See the
    <a href="../hal/haltcl.html#cha:haltcl">HALTCL Chapter</a> for more information.
</p>
</li>
<li>
<p>
<em>HALFILE = LIB:sys_example.hal</em> - Execute the system library file <em>sys_example.hal</em>
    at start up.
    Explicit use of the LIB: prefix causes use of the system library HALFILE without
    searching the ini file directory.
</p>
</li>
<li>
<p>
<em>HALFILE = LIB:sys_texample.tcl [arg1 [arg2 &#8230;]]</em> - Execute the system library
    file <em>sys_texample.tcl</em> at start up.
    Explicit use of the LIB: prefix causes use of the system library HALFILE without
    searching the ini file directory.
</p>
<div class="paragraph"><p>HALFILE items specify files that loadrt Hal components and make signal
connections between component pins.  Common mistakes are 1) omission of the
addf statement needed to add a component&#8217;s function(s) to a thread, 2)
incomplete signal (net) specifiers.  Omission of required addf statements is
almost always an error.  Signals usually include one or more input
connections and a single output (but both are not strictly required).
A system library file is provided to make checks for these conditions and
report to stdout and in a popup gui:</p></div>
</li>
</ul></div>
<div class="listingblock">
<div class="content">
<pre><code>    HALFILE = LIB:halcheck.tcl [ nopopup ]</code></pre>
</div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The LIB:halcheck.tcl line should be the last [HAL]HALFILE.
Specify the <em>nopopup</em> option to suppress the popup message and allow immediate starting.
Connections made using a POSTGUI_HALFILE are not checked.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>TWOPASS = ON</em> - Use twopass processing for loading HAL components. With TWOPASS processing,
    [HAL]HALFILE= lines are processed in two passes.  In the first pass (pass0), all
    HALFILES are read and multiple appearances of loadrt and loadusr commands are accumulated.
    These accumulated load commands are executed at the end of pass0.  This accumulation allows
    load lines to be specified more than once for a given component (provided the
    names= names used are unique on each use).  In the second pass (pass1), the
    HALFILES are reread and all commands except the previously executed load commands
    are executed.
</p>
</li>
<li>
<p>
<em>TWOPASS = nodelete verbose</em> - The TWOPASS feature can be activated with any
  non-null string including the keywords verbose and nodelete. The verbose
  keyword causes printing of details to stdout. The nodelete keyword preserves
  temporary files in /tmp.
</p>
<div class="paragraph"><p>For more information see the <a href="../hal/twopass.html#cha:hal-twopass">Hal TWOPASS</a> chapter.</p></div>
</li>
<li>
<p>
<em>HALCMD = command</em> - Execute <em>command</em> as a single HAL command.
   If <em>HALCMD</em> is specified multiple times, the commands are executed in the order
    they appear in the ini file. <em>HALCMD</em> lines are executed after all
    <em>HALFILE</em> lines.
</p>
</li>
<li>
<p>
<em>SHUTDOWN = shutdown.hal</em> - Execute the file <em>shutdown.hal</em> when LinuxCNC is exiting.
   Depending on the hardware drivers used, this may make it possible to set outputs to
    defined values when LinuxCNC is exited normally. However, because there is
    no guarantee this file will be executed (for instance, in the case of a
    computer crash) it is not a replacement for a proper physical e-stop
    chain or other protections against software failure.
</p>
</li>
<li>
<p>
<em>POSTGUI_HALFILE = example2.hal</em> - Execute <em>example2.hal</em> after the GUI has created
  its HAL pins.  Some GUIs create hal pins and support the use of a postgui halfile
  to use them. GUIs that support postgui halfiles include Touchy, Axis, Gscreen, and
  gmoccapy.
</p>
<div class="literalblock">
<div class="content">
<pre><code>See section &lt;&lt;sec:pyvcp-with-axis,pyVCP with Axis&gt;&gt; Section for more information.</code></pre>
</div></div>
</li>
<li>
<p>
<em>HALUI = halui</em> - adds the HAL user interface pins. For more information see
   the <a href="../gui/halui.html#cha:hal-user-interface">HAL User Interface</a> chapter.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:halui-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_halui_section">2.8. [HALUI] section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>MDI_COMMAND = G53 G0 X0 Y0 Z0</em> -
     An MDI command can be executed by using halui.mdi-command-00. Increment
    the number for each command listed in the [HALUI] section.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:applications-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_applications_section">2.9. [APPLICATIONS] Section</h3>
<div class="paragraph"><p>LinuxCNC can start other applications before the specified gui is started.
The applications can be started after a specified delay to allow for
gui-dependent actions (like creating gui-specific hal pins).</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>DELAY = value</em> - seconds to wait beore starting other
   applications.  A delay may be needed if an application has
   dependencies on [HAL]POSTGUI_HALFILE actions or gui-created
   hal pins (default DELAY=0).
</p>
</li>
<li>
<p>
<em>APP = appname [arg1 [arg2 &#8230;]]</em> - Application to be started.
   This specification can be included multiple times.  The appname can be
   explicitly named as an absolute or tilde specified filename (first character
   is / or ~), a relative filename (first characters of filename are ./), or as
   a file in the inifile directory.  If no executable file is found using
   these names, then the user search PATH is used to find the application.
</p>
<div class="literalblock">
<div class="content">
<pre><code>Examples:</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
Simulate inputs to hal pins for testing (using sim_pin&#8201;&#8212;&#8201;a simple gui to set inputs to parameters, unconnected pins, or signals with no writers):
</p>
<div class="literalblock">
<div class="content">
<pre><code>APP = sim_pin motion.probe-input halui.abort motion.analog-in-00</code></pre>
</div></div>
</li>
<li>
<p>
Invoke halshow with a previuosly saved watchlist. Since linuxcnc sets the working directory to the directory for the inifile, you can refer to files in that directory (example: my.halshow):
</p>
<div class="literalblock">
<div class="content">
<pre><code>APP = halshow my.halshow</code></pre>
</div></div>
</li>
<li>
<p>
Alternatively, a watchlist file identified with a full pathname could be specified:
</p>
<div class="literalblock">
<div class="content">
<pre><code>APP = halshow ~/saved_shows/spindle.halshow</code></pre>
</div></div>
</li>
<li>
<p>
Open halscope using a previously saved configuration:
</p>
<div class="literalblock">
<div class="content">
<pre><code>APP = halscope -i my.halscope</code></pre>
</div></div>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:traj-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_traj_section">2.10. [TRAJ] Section</h3>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">The new Trajectory Planner (TP) is on by default.<br />
If you have no TP settings in your [TRAJ] section - LinuxCNC defaults to:<br />
ARC_BLEND_ENABLE = 1<br />
ARC_BLEND_FALLBACK_ENABLE = 0<br />
ARC_BLEND_OPTIMIZATION_DEPTH = 50<br />
ARC_BLEND_GAP_CYCLES = 4<br />
ARC_BLEND_RAMP_FREQ = 100</td>
</tr></table>
</div>
<div class="paragraph"><p>The [TRAJ] section contains general parameters for the trajectory
planning module in <em>motion</em>.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>ARC_BLEND_ENABLE = 1</em> - Turn on new TP. If set to 0 TP uses parabolic
   blending (1 segment look ahead.) Default value 1.
</p>
</li>
<li>
<p>
<em>ARC_BLEND_FALLBACK_ENABLE = 0</em> - Optionally fall back to parabolic blends
   if the estimated speed is faster. However, this estimate is rough, and it
   seems that just disabling it gives better performance. Default value 0.
</p>
</li>
<li>
<p>
<em>ARC_BLEND_OPTIMIZATION_DEPTH = 50</em> - Look ahead depth in number of segments.
</p>
<div class="paragraph"><p>To expand on this a bit, you can choose this value somewhat arbitrarily.
Here&#8217;s a formula to estimate how much <em>depth</em> you need for a particular
config:</p></div>
<div class="paragraph"><p># n = v_max / (2.0 * a_max * t_c)
# where:
# n = optimization depth
# v_max = max axis velocity (UU / sec)
# a_max = max axis acceleration (UU / sec)
# t_c = servo period (seconds)</p></div>
<div class="paragraph"><p>So, a machine with a maximum axis velocity of 10 IPS, a max acceleration
of 100 IPS^2, and a servo period of 0.001 sec would need:</p></div>
<div class="paragraph"><p>10 / (2.0 * 100 * 0.001) = 50 segments to always reach maximum velocity
along the fastest axis.</p></div>
<div class="paragraph"><p>In practice, this number isn&#8217;t that important to tune, since the
look ahead rarely needs the full depth unless you have lots of very short
segments. If during testing, you notice strange slowdowns and can&#8217;t
figure out where they come from, first try increasing this depth using
the formula above.</p></div>
<div class="paragraph"><p>If you still see strange slowdowns, it may be because you have short
segments in the program. If this is the case, try adding a small
tolerance for Naive CAM detection. A good rule of thumb is this:</p></div>
<div class="paragraph"><p># min_length ~= v_req * t_c
# where:
# v_req = desired velocity in UU / sec
# t_c = servo period (seconds)</p></div>
<div class="paragraph"><p>If you want to travel along a path at 1 IPS = 60 IPM, and your servo
period is 0.001 sec, then any segments shorter than min_length will slow
the path down. If you set Naive CAM tolerance to around this min length,
overly short segments will be combined together to eliminate this
bottleneck. Of course, setting the tolerance too high means big path
deviations, so you have to play with it a bit to find a good value. I&#8217;d
start at 1/2 of the min_length, then work up as needed.</p></div>
</li>
<li>
<p>
<em>ARC_BLEND_GAP_CYCLES = 4</em> How short the previous segment must be before
   the trajectory planner <em>consumes</em> it.
</p>
<div class="paragraph"><p>Often, a circular arc blend will leave short line segments in between
the blends. Since the geometry has to be circular, we can&#8217;t blend over
all of a line if the next one is a little shorter. Since the trajectory
planner has to touch each segment at least once, it means that very tiny
segments will slow things down significantly. My fix to this way to
"consume" the short segment by making it a part of the blend arc. Since
the line+blend is one segment, we don&#8217;t have to slow down to hit the
very short segment. Likely, you won&#8217;t need to touch this setting.</p></div>
</li>
<li>
<p>
<em>ARC_BLEND_RAMP_FREQ = 20</em> - This is a <em>cutoff</em> frequency for using ramped
   velocity.
</p>
<div class="paragraph"><p><em>Ramped velocity</em> in this case just means constant acceleration over the
whole segment. This is less optimal than a trapezoidal velocity profile,
since the acceleration is not maximized. However, if the segment is
short enough, there isn&#8217;t enough time to accelerate much before we hit
the next segment. Recall the short line segments from the previous
example. Since they&#8217;re lines, there&#8217;s no cornering acceleration, so
we&#8217;re free to accelerate up to the requested speed. However, if this
line is between two arcs, then it will have to quickly decelerate again
to be within the maximum speed of the next segment. This means that we
have a spike of acceleration, then a spike of deceleration, causing a
large jerk, for very little performance gain. This setting is a way to
eliminate this jerk for short segments.</p></div>
<div class="paragraph"><p>Basically, if a segment will complete in less time than 1 /
ARC_BLEND_RAMP_FREQ, we don&#8217;t bother with a trapezoidal velocity profile
on that segment, and use constant acceleration. (Setting
ARC_BLEND_RAMP_FREQ = 1000 is equivalent to always using trapezoidal
acceleration, if the servo loop is 1kHz).</p></div>
<div class="paragraph"><p>You can characterize the worst-case loss of performance by comparing the
velocity that a trapezoidal profile reaches vs. the ramp:</p></div>
<div class="paragraph"><p># v_ripple = a_max / (4.0 * f)
# where:
# v_ripple = average velocity "loss" due to ramping
# a_max = max axis acceleration
# f = cutoff frequency from INI</p></div>
<div class="paragraph"><p>For the aforementioned machine, the ripple for a 20Hz cutoff frequency
is 100 / (4 * 20) = 1.25 IPS. This seems high, but keep in mind that it
is only a worst-case estimate. In reality , the trapezoidal motion
profile is limited by other factors, such as normal acceleration or
requested velocity, and so the actual performance loss should be much
smaller. Increasing the cutoff frequency can squeeze out more
performance, but make the motion rougher due to acceleration
discontinuities. A value in the range 20Hz to 200Hz should be reasonable
to start.</p></div>
<div class="paragraph"><p>Finally, no amount of tweaking will speed up a toolpath with lots of
small, tight corners, since you&#8217;re limited by cornering acceleration.</p></div>
</li>
<li>
<p>
<em>SPINDLES = 3</em> - The number of spindles to support. It is imperative that this
   number matches the "num_spindles" parameter passed to the motion module.
</p>
</li>
<li>
<p>
<em>COORDINATES = X Y Z</em> - The names of the axes being controlled.
   Only X, Y, Z, A, B, C, U, V, W are valid. Only axes named in <em>COORDINATES</em>
   are accepted in g-code.  It is permitted to write an axis name more than
   once (e.g., X Y Y Z for a gantry machine).
   For the common <em>trivkins kinematics</em>, joint numbers are assigned in sequence
   according to the trivkins parameter <em>coordinates=</em>.  So, for trivkins
   <em>coordinates=xz</em>, joint0 corresponds to X and joint1 corresponds to Z.
   See the kinematics man page (<em>$ man kins</em>) for information on
   trivkins and other kinematics modules.
</p>
</li>
<li>
<p>
<em>LINEAR_UNITS = &lt;units&gt;</em> -  Specifies the <em>machine units</em> for linear axes.
    Possible choices are mm or inch.
    This does not affect the linear units in NC code (the G20 and G21
    words do this).
</p>
</li>
<li>
<p>
<em>ANGULAR_UNITS = &lt;units&gt;</em> -  Specifies the <em>machine units</em> for rotational axes.
    Possible choices are <em>deg</em>, <em>degree</em> (360 per circle), <em>rad</em>, <em>radian</em>
    (2pi per circle), <em>grad</em>, or <em>gon</em> (400 per circle).
    This does not affect the angular units of NC code. In RS274NGC, A-, B-
    and C- words are always expressed in degrees.
</p>
</li>
<li>
<p>
<em>DEFAULT_LINEAR_VELOCITY = 0.0167</em> - The initial rate for jogs of linear axes, in
  machine units per second. The value shown in <em>Axis</em> equals
  machine units per minute.
</p>
</li>
<li>
<p>
<em>DEFAULT_LINEAR_ACCELERATION = 2.0</em> - In machines with nontrivial kinematics, the acceleration used
    for "teleop" (Cartesian space) jogs, in <em>machine units</em> per second per second.
</p>
</li>
<li>
<p>
<em>MAX_LINEAR_VELOCITY = 5.0</em> -  The maximum velocity for any axis or coordinated
    move, in <em>machine units</em> per second. The value shown equals 300 units per
    minute.
</p>
</li>
<li>
<p>
<em>MAX_LINEAR_ACCELERATION = 20.0</em> -  The maximum acceleration for any axis or
    coordinated axis move, in <em>machine units</em> per second per second.
</p>
</li>
<li>
<p>
<em>POSITION_FILE = position.txt</em> - If set to a non-empty value, the joint positions are stored between
    runs in this file. This allows the machine to start with the same
    coordinates it had on shutdown. This assumes there was no movement of
    the machine while powered off. If unset, joint positions are not stored
    and will begin at 0 each time LinuxCNC is started. This can help on smaller
    machines without home switches. If using the Mesa resolver interface
    this file can be used to emulate absolute encoders and eliminate the
    need for homing (with no loss of accuracy). See the hostmot2 manpage
    for more details.
</p>
</li>
<li>
<p>
<em>NO_FORCE_HOMING = 1</em> - The default behavior is for LinuxCNC to force the
   user to home the machine before any MDI command or a program is run.
   Normally, only jogging is allowed before homing.  For configurations using
   identity kinematics, setting NO_FORCE_HOMING = 1 allows the user to make
   MDI moves and run programs without homing the machine first. Interfaces
   using identity kinematics without homing ability will need to have this
   option set to 1.
</p>
</li>
<li>
<p>
<em>HOME = 0 0 0 0 0 0 0 0 0</em> - World home position needed for kinematics modules
   that compute world coordinates using kinematicsForward() when switching
   from joint to teleop mode.  Up to nine coordinate values (X Y Z A B C U V W)
   may be specified, unused trailing items may be omitted. This value is only
   used for machines with nontrivial kinematics. On machines with trivial
   kinematics (mill, lathe, gantry types) this value is ignored.
   Note: the sim hexapod config requires a non-zero value for the Z coordinate.
</p>
</li>
<li>
<p>
<em>NO_PROBE_JOG_ERROR = 0</em> - Allow to bypass probe tripped check when you jog manually
</p>
</li>
<li>
<p>
<em>NO_PROBE_HOME_ERROR = 0</em> - Allow to bypass probe tripped check when homing is in progress
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">LinuxCNC will not know your joint travel limits when using <em>NO_FORCE_HOMING = 1</em>.</td>
</tr></table>
</div>
<div class="paragraph"><p><a id="sec:kins-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_kins_section">2.11. [KINS] Section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>JOINTS = 3</em> - Specifies the number of joints (motors) in the system.
    For example, a trivkins XYZ machine with a single motor for each axis has 3
    joints.  A gantry machine with one motor on each of two of the axes,
    and two motors on the third axis, has 4 joints.
    (This config variable may be used by a gui to set the number of joints
    (num_joints) specified to the motion module (motmod)).
    The Axis gui, pncconf,  and stepconf use this item.
</p>
</li>
<li>
<p>
<em>KINEMATICS = trivkins</em> - Specify a kinematics module for the motion module.
     Guis may use this variable to specify the loadrt line in hal files for
     the motmod module.  For more information on kinematics modules see the
     manpage: <em>$ man kins</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:axis-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_axis__lt_letter_gt_section">2.12. [AXIS_&lt;letter&gt;] Section</h3>
<div class="paragraph"><p>The &lt;letter&gt; specifies one of: X Y Z A B C U V W</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>MAX_VELOCITY = 1.2</em> -
    Maximum velocity for this axis in <a href="ini-config.html#sec:traj-section">machine units</a> per second.
</p>
</li>
<li>
<p>
<em>MAX_ACCELERATION = 20.0</em> -
     Maximum acceleration for this axis in machine units per
    second squared.
</p>
</li>
<li>
<p>
<em>MIN_LIMIT = -1000</em> -
     The minimum limit (soft limit) for axis motion, in machine units.
    When this limit is exceeded, the controller aborts axis motion.
    The axis must be homed before MIN_LIMIT is in force.
    For a rotary axis (A,B,C typ)  with unlimited rotation having no MIN_LIMIT
    for that axis in the [AXIS_&lt;letter&gt;] section a value of -1e99 is used.
</p>
</li>
<li>
<p>
<em>MAX_LIMIT = 1000</em> -
     The maximum limit (soft limit) for axis motion, in machine units.
    When this limit is exceeded, the controller aborts axis motion.
    The axis must be homed before MAX_LIMIT is in force.
    For a rotary axis (A,B,C typ) with unlimited rotation having no MAX_LIMIT
    for that axis in the [AXIS_&lt;letter&gt;] section a value of 1e99 is used.
</p>
</li>
<li>
<p>
<em>WRAPPED_ROTARY = 1</em> -
    When this is set to 1 for an ANGULAR axis the axis will move 0-359.999
    degrees. Positive Numbers will move the axis in a positive direction and
    negative numbers will move the axis in the negative direction.
</p>
</li>
<li>
<p>
<em>LOCKING_INDEXER_JOINT = 4</em> - This value selects a joint to use for
    a locking indexer for the specified axis &lt;letter&gt;.  In this example, the
    joint is 4 which would correspond to the B axis for a XYZAB system with
    trivkins (identity) kinematics.
    When set, a G0 move for this axis will initiate an unlock with the
    joint.4.unlock pin then wait for the joint.4.is-unlocked pin then move
    the joint at the rapid rate for that joint.  After the move the
    joint.4.unlock will be false and motion will wait for joint.4.is-unlocked
    to go false. Moving with other joints is not allowed when moving a
    locked rotary joint.
    To create the unlock pins, use the motmod parameter:
</p>
<div class="literalblock">
<div class="content">
<pre><code>unlock_joints_mask=jointmask</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>The jointmask bits are: (LSB)0:joint0, 1:joint1, 2:joint2, ...</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>Example: loadrt motmod ... unlock_joints_mask=0x38
creates  unlock  pins for joints 3,4,5</code></pre>
</div></div>
</li>
<li>
<p>
<em>OFFSET_AV_RATIO = 0.1</em> - If nonzero, this item enables the use of
   hal input pins for external axis offsets:
</p>
<div class="literalblock">
<div class="content">
<pre><code>'axis.&lt;letter&gt;.eoffset-enable'
'axis.&lt;letter&gt;.eoffset-counts'
'axis.&lt;letter&gt;.eoffset-scale'</code></pre>
</div></div>
</li>
</ul></div>
<div class="paragraph"><p>See the chapter: <a href="../motion/external-offsets.html#cha:external-offsets"><em>External Axis Offsets</em></a> for
usage information.</p></div>
<div class="paragraph"><p><a id="sec:joint-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_joint__lt_num_gt_section">2.13. [JOINT_&lt;num&gt;] Section</h3>
<div class="paragraph"><p>The &lt;num&gt; specifies the joint number 0 &#8230; (num_joints-1)
The value of <em>num_joints</em> is set by [KINS]JOINTS=</p></div>
<div class="paragraph"><p>The [JOINT_0], [JOINT_1], etc. sections contains general parameters for
the individual components in the joint control module. The joint section
names begin numbering at 0, and run through the number of joints
specified in the [KINS]JOINTS entry minus 1.</p></div>
<div class="paragraph"><p>Typically (for systems using <em>trivkins kinematics</em>, there is a 1:1
correspondence between a joint and an axis coordinate letter):</p></div>
<div class="ulist"><ul>
<li>
<p>
JOINT_0 = X
</p>
</li>
<li>
<p>
JOINT_1 = Y
</p>
</li>
<li>
<p>
JOINT_2 = Z
</p>
</li>
<li>
<p>
JOINT_3 = A
</p>
</li>
<li>
<p>
JOINT_4 = B
</p>
</li>
<li>
<p>
JOINT_5 = C
</p>
</li>
<li>
<p>
JOINT_6 = U
</p>
</li>
<li>
<p>
JOINT_7 = V
</p>
</li>
<li>
<p>
JOINT_8 = W
</p>
</li>
</ul></div>
<div class="paragraph"><p>Other kinematics modules with identity kinematics are available to support
configurations with partial sets of axes.  For example, using trivkins
with coordinates=XZ, the joint-axes relationships are:</p></div>
<div class="ulist"><ul>
<li>
<p>
JOINT_0 = X
</p>
</li>
<li>
<p>
JOINT_1 = Z
</p>
</li>
</ul></div>
<div class="paragraph"><p>For more information on kinematics modules see the manpage: <em>$ man kins</em></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>TYPE = LINEAR</em> -
    The type of joint, either LINEAR or ANGULAR.
</p>
</li>
<li>
<p>
<em>UNITS = INCH</em> -
     If specified, this setting overrides the related [TRAJ] UNITS setting.
    (e.g., [TRAJ]LINEAR_UNITS if the TYPE of this joint is LINEAR,
    [TRAJ]ANGULAR_UNITS if the TYPE of this joint is ANGULAR)
</p>
</li>
<li>
<p>
<em>MAX_VELOCITY = 1.2</em> -
    Maximum velocity for this joint in <a href="ini-config.html#sec:traj-section">machine units</a> per second.
</p>
</li>
<li>
<p>
<em>MAX_ACCELERATION = 20.0</em> -
     Maximum acceleration for this joint in machine units per
    second squared.
</p>
</li>
<li>
<p>
<em>BACKLASH = 0.0000</em> -
     Backlash in machine units. Backlash compensation value
    can be used to make up for small deficiencies in the hardware used to
    drive an joint. If backlash is added to an joint and you are using
    steppers the STEPGEN_MAXACCEL must be increased to 1.5 to 2 times the
    MAX_ACCELERATION for the joint. Excessive backlash compensation can cause an
    joint to jerk as it changes direction. If a COMP_FILE is specificed for a
    joint BACKLASH is not used.
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>COMP_FILE = file.extension</em> -
     The compensation file consists of map of position
    information for the joint. Compensation file values are in machine units.
    Each set of values are are on one line separated by a space. The first value
    is the nominal value (the commanded position). The second and third values
    depend on the setting of COMP_FILE_TYPE. Points in between nominal values
    are interpolated between the two nominals. Compensation files must start
    with the smallest nominal and be in ascending order to the largest value of
    nominals. File names are case sensitive and can contain letters and/or
    numbers. Currently the limit inside LinuxCNC is for 256 triplets per joint.
   <br />
   <br />
    If COMP_FILE is specified for an joint, BACKLASH is not used. A
    <em>COMP_FILE_TYPE</em> must be specified for each <em>COMP_FILE</em>.
</p>
</li>
<li>
<p>
<em>COMP_FILE_TYPE = 0 or 1</em> - Specifies the type of compensation file. The
   first value is the nominal (commanded) position for both types.
</p>
<div class="ulist"><ul>
<li>
<p>
<em>Type 0:</em> The second value specifies the actual position as the joint is moving
    in the positive direction (increasing value) and the third value specifies
    the actual position as the joint is moving in the negative direction
    (decreasing value).
   <br />
   <br />
Type 0 Example
</p>
<div class="listingblock">
<div class="content">
<pre><code>-1.000 -1.005 -0.995
0.000 0.002 -0.003
1.000 1.003 0.998</code></pre>
</div></div>
</li>
<li>
<p>
<em>Type 1:</em> The second value specifies positive offset from nominal while
    traveling in the positive direction. The third value specifies the negitive
    offset from nominal while traveling in a negitive direction.
   <br />
   <br />
Type 1 Example
</p>
<div class="listingblock">
<div class="content">
<pre><code>-1.000 0.005 -0.005
0.000 0.002 -0.003
1.000 0.003 -0.004</code></pre>
</div></div>
</li>
</ul></div>
</li>
<li>
<p>
<em>MIN_LIMIT = -1000</em> -  The minimum limit for joint motion, in
    machine units.  When this limit is reached, the controller aborts joint
    motion.
    For a rotary joint with unlimited rotation having no MIN_LIMIT
    for that joint in the [JOINT_N] section a the value -1e99 is used.
</p>
</li>
<li>
<p>
<em>MAX_LIMIT = 1000</em> -  The maximum limit for joint motion, in
    machine units.  When this limit is reached, the controller aborts joint
    motion.
    For a rotary joint with unlimited rotation having no MAX_LIMIT
    for that joint in the [JOINT_N] section a the value 1e99 is used.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">For <strong>identity</strong> kinematics, the [JOINT_N]MIN_LIMIT,MAX_LIMIT settings must equal
or exceed the corresponding (one-to-one identity) [AXIS_L] limits.  These
settings are verified at startup when the trivkins kinematics modules is
specified.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The [JOINT_N]MIN_LIMIT, MAX_LIMIT settings are enforced while jogging in joint
mode prior to homing.  After homing, [AXIS_L]MIN_LIMIT,MAX_LIMIT coordinate
limits are used as constraints for axis (coordinate letter) jogging and
by the trajectory planning used for gcode moves (programs and mdi commands).
The trajectory planner works in Cartesian space (XYZABCUVW) and has no
information about the motion of joints implemented by <strong>any</strong> kinematics module.
It is possible for joint limit violations to occur for gcode that obeys
trajectory planning position limits when non identity kinematics are used.  The
motion module always detects joint position limit violations and faults if they
occur during the execution of gcode commands.  See also related github issue
#97.</td>
</tr></table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>MIN_FERROR = 0.010</em> -  This is the value in machine units by
    which the joint is permitted to deviate from commanded position at very low
    speeds. If MIN_FERROR is smaller than FERROR, the two produce a ramp of
    error trip points. You could think of this as a graph where one dimension is
    speed and the other is permitted following error. As speed increases the
    amount of following error also increases toward the FERROR value.
</p>
</li>
<li>
<p>
<em>FERROR = 1.0</em> -  FERROR is the maximum allowable following error,
    in machine units. If the difference between commanded and sensed position
    exceeds this amount, the controller disables servo calculations, sets all
    the outputs to 0.0, and disables the amplifiers. If MIN_FERROR is present in
    the .ini file, velocity-proportional following errors are used. Here, the
    maximum allowable following error is proportional to the speed, with FERROR
    applying to the rapid rate set by [TRAJ]MAX_VELOCITY, and proportionally
    smaller following errors for slower speeds. The maximum allowable following
    error will always be greater than MIN_FERROR. This prevents small following
    errors for stationary axes from inadvertently aborting motion. Small
    following errors will always be present due to vibration, etc.
</p>
</li>
<li>
<p>
<em>LOCKING_INDEXER = 1</em> -
     Indicates the joint is used as a locking indexer.
</p>
</li>
</ul></div>
<div class="paragraph"><div class="title">Homing</div><p>These parameters are Homing related, for a better explanation read the
<a href="ini-homing.html#cha:homing-configuration">Homing Configuration</a> Chapter.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>HOME = 0.0</em> -
     The position that the joint will go to upon completion of the homing
    sequence.
</p>
</li>
<li>
<p>
<em>HOME_OFFSET = 0.0</em> -
     The joint position of the home switch or index pulse, in
    <a href="ini-config.html#sec:traj-section">machine units</a>. When the home point is found during
    the homing process, this is the position that is assigned to that point.
    When sharing home and limit switches and using a home sequence that will
    leave the home/limit switch in the toggled state the home offset can be
    used define the home switch position to be other than 0 if your HOME
    position is desired to be 0.
</p>
</li>
<li>
<p>
<em>HOME_SEARCH_VEL = 0.0</em> -
     Initial homing velocity in machine units per second.
    Sign denotes direction of travel. A value of zero means assume that the current
    location is the home position for the machine. If your machine has no
    home switches you will want to leave this value at zero.
</p>
</li>
<li>
<p>
<em>HOME_LATCH_VEL = 0.0</em> -
     Homing velocity in machine units per second to the home
    switch latch position. Sign denotes direction of travel.
</p>
</li>
<li>
<p>
<em>HOME_FINAL_VEL = 0.0</em> -
     Velocity in machine units per second from home latch position to home
    position. If left at 0 or not included in the joint rapid velocity is
    used. Must be a positive number.
</p>
</li>
<li>
<p>
<em>HOME_USE_INDEX = NO</em> -
     If the encoder used for this joint has an index pulse, and the motion
    card has provision for this signal you may set it to yes. When it is
    yes, it will affect the kind of home pattern used. Currently, you can&#8217;t
    home to index with steppers unless you&#8217;re using stepgen in velocity mode
    and PID.
</p>
</li>
<li>
<p>
<em>HOME_IGNORE_LIMITS = NO</em> -
     When you use the limit switch as a home switch and the limit switch
    this should be set to YES. When set to YES the limit switch for this
    joint is ignored when homing. You must configure your homing
    so that at the end of your home move the home/limit switch is not in the
    toggled state you will get a limit switch error after the home move.
</p>
</li>
<li>
<p>
<em>HOME_IS_SHARED = &lt;n&gt;</em> -
     If the home input is shared by more than one joint set &lt;n&gt; to 1 to
    prevent homing from starting if the one of the shared switches is
    already closed. Set &lt;n&gt; to 0 to permit homing if a switch is closed.
</p>
</li>
<li>
<p>
<em>HOME_ABSOLUTE_ENCODER = 0 | 1 | 2</em> -
     Used to indicate the joint uses an absolute encoder.  At a request
    for homing, the current joint value is set to the <em>HOME_OFFSET</em> value.
    If the <em>HOME_ABSOLUTE_ENCODER</em> setting is 1, the machine makes the usual
    final move to the <em>HOME</em> value.
    If the <em>HOME_ABSOLUTE_ENCODER</em> setting is 2, no final move is made.
</p>
</li>
<li>
<p>
<em>HOME_SEQUENCE = &lt;n&gt;</em> -
    Used to define the "Home All" sequence. &lt;n&gt; must start at 0 or
    1 or -1.  Additional sequences may be specified with numbers increasing
    by 1 (in absolute value).  Skipping of sequence numbers is not allowed.
    If a HOME_SEQUENCE is omitted, the joint will not be homed by the
    "Home All" function.  More than one joint can be homed at the same
    time by specifying the same sequence number for more than one joint.
    A negative sequence number is used to defer the final move for
    all joints having that (negative or positive) sequence number.
    For additional info, see: <a href="ini-homing.html#sec:homing-section">HOME SEQUENCE</a>
</p>
</li>
<li>
<p>
<em>VOLATILE_HOME = 0</em> -
     When enabled (set to 1) this joint will be unhomed if the Machine
    Power is off or if E-Stop is on. This is useful if your machine has
    home switches and does not have position feedback such as a step and
    direction driven machine.
</p>
</li>
</ul></div>
<div class="paragraph"><div class="title">Servo</div><p>These parameters are relevant to joints controlled by servos.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">The following are custom INI file entries that you may find in a sample INI file
or a wizard generated file. These are not used by the LinuxCNC software. They
are only there to put all the settings in one place. For more information on
custom INI file entries see the
<a href="ini-config.html#sub:custom-variables">Custom Sections and Variables</a> subsection.</td>
</tr></table>
</div>
<div class="paragraph"><p>The following items might be used by a PID component and the assumption is
that the output is volts.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>DEADBAND = 0.000015</em> - How close is close enough to consider the motor in position,
in <a href="ini-config.html#sec:traj-section">machine units</a>. This is often set to a distance equivalent to 1, 1.5, 2,
or 3 encoder counts, but there are no strict rules.
Looser (larger) settings allow less servo <em>hunting</em> at the expense of lower accuracy.
Tighter (smaller) settings attempt higher accuracy at the expense of more servo <em>hunting</em>.
Is it really more accurate if it&#8217;s also more uncertain?
As a general rule, it&#8217;s good to avoid, or at least limit, servo <em>hunting</em> if you can.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Be careful about going below 1 encoder count, since you may create a condition where
there is no place that your servo is happy. This can go beyond <em>hunting</em> (slow) to
<em>nervous</em> (rapid), and even to <em>squealing</em> which is easy to confuse with
oscillation caused by improper tuning. Better to be a count or two loose
here at first, until you&#8217;ve been through <em>gross tuning</em> at least.</p></div>
<div class="paragraph"><p>Example of calculating machine units per encoder pulse to use in deciding DEADBAND value:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="images/encoder-counts-math.png" alt="images/encoder-counts-math.png" />
</div>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>BIAS = 0.000</em> - This is used by hm2-servo and some others.
    Bias is a constant amount
    that is added to the output. In most cases it should be left at zero.
    However, it can sometimes be useful to compensate for offsets in servo
    amplifiers, or to balance the weight of an object that moves
    vertically. bias is turned off when the PID loop is disabled, just like
    all other components of the output.
</p>
</li>
<li>
<p>
<em>P = 50</em> - The proportional gain for the joint servo. This value
    multiplies the
    error between commanded and actual position in machine units, resulting
    in a contribution to the computed voltage for the motor amplifier. The
    units on the P gain are volts per machine unit, e.g.,
    <span class="image">
<img src="images/p-term.png" alt="images/p-term.png" height="25" />
</span>
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>I = 0</em> - The integral gain for the joint servo. The value
    multiplies the
    cumulative error between commanded and actual position in machine
    units, resulting in a contribution to the computed voltage for the
    motor amplifier. The units on the I gain are volts per machine unit
    second, e.g., <span class="image">
<img src="images/i-term.png" alt="images/i-term.png" height="25" />
</span>
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>D = 0</em> - The derivative gain for the joint servo. The value
    multiplies the
    difference between the current and previous errors, resulting in a
    contribution to the computed voltage for the motor amplifier. The units
    on the D gain are volts per machine unit per second, e.g.,
    <span class="image">
<img src="images/i-term.png" alt="images/i-term.png" height="25" />
</span>
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>FF0 = 0</em> - The 0th order feed forward gain. This number is
    multiplied by the
    commanded position, resulting in a contribution to the computed voltage
    for the motor amplifier. The units on the FF0 gain are volts per
    machine unit, e.g., <span class="image">
<img src="images/p-term.png" alt="images/p-term.png" height="25" />
</span>
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>FF1 = 0</em> - The 1st order feed forward gain. This number is
    multiplied by the
    change in commanded position per second, resulting in a contribution to
    the computed voltage for the motor amplifier. The units on the FF1 gain
    are volts per machine unit per second, e.g., <span class="image">
<img src="images/i-term.png" alt="images/i-term.png" height="25" />
</span>
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>FF2 = 0</em> - The 2nd order feed forward gain. This number is
    multiplied by the
    change in commanded position per second per second, resulting in a
    contribution to the computed voltage for the motor amplifier. The units
    on the FF2 gain are volts per machine unit per second per second,
    e.g., <span class="image">
<img src="images/ff2.png" alt="images/ff2.png" height="25" />
</span>
</p>
</li>
</ul></div>
<div class="ulist"><ul>
<li>
<p>
<em>OUTPUT_SCALE = 1.000</em> -
</p>
</li>
<li>
<p>
<em>OUTPUT_OFFSET = 0.000</em> - These two values are the scale and offset factors for
    the joint output to the motor amplifiers.
    The second value (offset) is subtracted from
    the computed output (in volts), and divided by the first value (scale
    factor), before being written to the D/A converters. The units on the
    scale value are in true volts per DAC output volts. The units on the
    offset value are in volts. These can be used to linearize a DAC.
     Specifically, when writing outputs, the LinuxCNC first converts the desired
    output in quasi-SI units to raw actuator values, e.g., volts for an
    amplifier DAC. This scaling
    looks like: <span class="image">
<img src="images/output-offset.png" alt="images/output-offset.png" />
</span>
</p>
</li>
</ul></div>
<div class="paragraph"><p>The value for scale can be obtained analytically by doing a unit
analysis, i.e., units are [output SI units]/[actuator units]. For
example, on a machine with a velocity mode amplifier such that
1 volt results in 250 mm/sec velocity.</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="images/scale-math.png" alt="images/scale-math.png" />
</div>
</div>
<div class="paragraph"><p>Note that the units of the offset are in machine units, e.g.,
mm/sec, and they are pre-subtracted from the sensor readings. The value
for this offset is obtained by finding the value of your output which
yields 0.0 for the actuator output. If the DAC is linearized, this
offset is normally 0.0.</p></div>
<div class="paragraph"><p>The scale and offset can be used to linearize the DAC as well,
resulting in values that reflect the combined effects of amplifier
gain, DAC non-linearity, DAC units, etc.</p></div>
<div class="paragraph"><p>To do this, follow this procedure.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Build a calibration table for the output, driving the DAC with a
   desired voltage and measuring the result.
</p>
</li>
<li>
<p>
Do a least-squares linear fit to get coefficients a, b such
   that <span class="image">
<img src="images/calibration-1.png" alt="images/calibration-1.png" />
</span>
</p>
</li>
<li>
<p>
Note that we want raw output such that our measured result is
   identical to the commanded output. This means
</p>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
<span class="image">
<img src="images/calibration-2.png" alt="images/calibration-2.png" />
</span>
</p>
</li>
<li>
<p>
<span class="image">
<img src="images/calibration-3.png" alt="images/calibration-3.png" />
</span>
</p>
</li>
</ol></div>
</li>
<li>
<p>
As a result, the a and b coefficients from the linear fit can be
   used as the scale and offset for the controller directly.
</p>
</li>
</ol></div>
<div class="paragraph"><p>See the following table for an example of voltage measurements.</p></div>
<div class="tableblock">
<table rules="all"
width="50%"
frame="border"
cellspacing="0" cellpadding="4">
<caption class="title">Table 1. Output Voltage Measurements</caption>
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="center" valign="top">Raw </th>
<th align="center" valign="top"> Measured</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p class="table">-10</p></td>
<td align="center" valign="top"><p class="table">-9.93</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table">-9</p></td>
<td align="center" valign="top"><p class="table">-8.83</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table">0</p></td>
<td align="center" valign="top"><p class="table">-0.03</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table">1</p></td>
<td align="center" valign="top"><p class="table">0.96</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table">9</p></td>
<td align="center" valign="top"><p class="table">9.87</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table">10</p></td>
<td align="center" valign="top"><p class="table">10.87</p></td>
</tr>
</tbody>
</table>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>MAX_OUTPUT = 10</em> - The maximum value for the output of the PID compensation
    that is written to the motor amplifier, in volts. The computed
    output value is clamped to this limit. The limit is applied before
    scaling to raw output units. The value is applied symmetrically to
    both the plus and the minus side.
</p>
</li>
<li>
<p>
<em>INPUT_SCALE = 20000</em> - in Sample configs
</p>
</li>
<li>
<p>
<em>ENCODER_SCALE = 20000</em> - in PNCconf built configs
Specifies the number of pulses that
corresponds to a move of one machine unit as set in the [TRAJ] section.
For a linear joint one machine unit will be equal to
the setting of LINEAR_UNITS.
For an angular joint one unit is equal to the setting in ANGULAR_UNITS.
A second number, if specified, is ignored.
For example, on a 2000 counts per rev encoder, and 10
revs/inch gearing, and desired units of inch, we
have:
</p>
</li>
</ul></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="images/encoder-scale.png" alt="images/encoder-scale.png" />
</div>
</div>
<div class="paragraph"><div class="title">Stepper</div><p>These parameters are relevant to joints controlled by steppers.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">The following are custom INI file entries that you may find in a sample INI file
or a wizard generated file. These are not used by the LinuxCNC software. They
are only there to put all the settings in one place. For more information on
custom INI file entries see the
<a href="ini-config.html#sub:custom-variables">Custom Sections and Variables</a> subsection.</td>
</tr></table>
</div>
<div class="paragraph"><p>The following items might be used by a stepgen component.</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>SCALE = 4000</em> - in Sample configs
</p>
</li>
<li>
<p>
<em>STEP_SCALE = 4000</em> - in PNCconf built configs
Specifies the number of pulses that corresponds to a
move of one machine unit as set in the [TRAJ] section.
For stepper systems, this is
the number of step pulses issued per machine unit. For a linear joint
one machine unit will be equal to the setting of LINEAR_UNITS. For an
angular joint one unit is equal to the setting in ANGULAR_UNITS. For
servo systems, this is the number of feedback pulses per machine unit.
A second number, if specified, is ignored.
</p>
</li>
</ul></div>
<div class="paragraph"><p>For example, on a 1.8 degree stepper motor with half-stepping, and 10
revs/inch gearing, and desired <a href="ini-config.html#sec:traj-section">machine units</a> of inch, we
have:</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="images/stepper-scale.png" alt="images/stepper-scale.png" />
</div>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>ENCODER_SCALE = 20000</em> (Optionally used in PNCconf built configs) -
Specifies the number of pulses that
corresponds to a move of one machine unit as set in the [TRAJ] section.
For a linear joint one machine unit will be equal to
the setting of LINEAR_UNITS.
For an angular joint one unit is equal to the setting in ANGULAR_UNITS.
A second number, if specified, is ignored.
For example, on a 2000 counts per rev encoder, and 10
revs/inch gearing, and desired units of inch, we
have:
</p>
</li>
</ul></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="images/encoder-scale.png" alt="images/encoder-scale.png" />
</div>
</div>
<div class="ulist"><ul>
<li>
<p>
<em>STEPGEN_MAXACCEL = 21.0</em> -  Acceleration limit for the step generator.
    This should be 1% to 10%
    larger than the joint MAX_ACCELERATION. This value improves the tuning
    of stepgen&#8217;s "position loop". If you have added backlash compensation
    to an joint then this should be 1.5 to 2 times greater than
    MAX_ACCELERATION.
</p>
</li>
<li>
<p>
<em>STEPGEN_MAXVEL = 1.4</em> - Older configuration files have a velocity limit for
    the step
    generator as well. If specified, it should also be 1% to 10% larger
    than the joint MAX_VELOCITY. Subsequent testing has shown that use of
    STEPGEN_MAXVEL does not improve the tuning of stepgen&#8217;s position loop.
</p>
</li>
</ul></div>
<div class="paragraph"><p><a id="sec:emcio-section"></a></p></div>
</div>
<div class="sect2">
<h3 id="_emcio_section">2.14. [EMCIO] Section</h3>
<div class="ulist"><ul>
<li>
<p>
<em>EMCIO = io</em> - Name of IO controller program
</p>
</li>
<li>
<p>
<em>CYCLE_TIME = 0.100</em> -
    The period, in seconds, at which EMCIO will run. Making
    it 0.0 or a
    negative number will tell EMCIO not to sleep at all. There is usually
    no need to change this number.
</p>
</li>
<li>
<p>
<em>TOOL_TABLE = tool.tbl</em> -
    The file which contains tool information, described in
    the User Manual.
</p>
</li>
<li>
<p>
<em>TOOL_CHANGE_POSITION = 0 0 2</em> -
    Specifies the XYZ location to move to when performing a
    tool change if three digits are used.
    Specifies the XYZABC location when 6 digits are used.
    Specifies the XYZABCUVW location when 9 digits are used.
    Tool Changes can be combined. For example if you combine the
    quill up with change position you can move the Z first then the X and Y.
</p>
</li>
<li>
<p>
<em>TOOL_CHANGE_WITH_SPINDLE_ON = 1</em> -
    The spindle will be left on during the tool change when the value is 1.
    Useful for lathes or machines where the material is in the spindle,
    not the tool.
</p>
</li>
<li>
<p>
<em>TOOL_CHANGE_QUILL_UP = 1</em> -
    The Z axis will be moved to machine zero prior to the tool change when
    the value is 1. This is the same as issuing a G0 G53 Z0.
</p>
</li>
<li>
<p>
<em>TOOL_CHANGE_AT_G30 = 1</em> -
    The machine is moved to reference point defined by parameters
    5181-5186 for G30 if the value is 1. For more information see
    <a href="../gcode/overview.html#gcode:parameters">G-Code Parameters</a> and
    <a href="../gcode/g-code.html#gcode:g30-g30.1">G-Code G30-G30.1</a>.
</p>
</li>
<li>
<p>
<em>RANDOM_TOOLCHANGER = 1</em> -
    This is for machines that cannot place the tool back into the pocket
    it came from. For example, machines that exchange the tool in the
    active pocket with the tool in the spindle.
</p>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-11-24 07:38:35 MST
</div>
</div>
</body>
</html>
