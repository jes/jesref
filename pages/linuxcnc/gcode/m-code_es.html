<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title>Códigos M</title>
<link rel="stylesheet" href="..//asciidoc.css" type="text/css" />


<link rel="stylesheet" href="..//linuxcnc.css" type="text/css" />
<script type="text/javascript" src="..//asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="book">
<div id="header">
<h1>Códigos M</h1>
<div id="toc">
  <div id="toctitle">Tabla de contenidos</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="cha:m-codes">1. Tabla de referencia rápida de códigos M</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="60%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="28%" />
<col width="71%" />
<thead>
<tr>
<th align="center" valign="top">Código                        </th>
<th align="left" valign="top"> Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m0-m1">M0 M1</a></p></td>
<td align="left" valign="top"><p class="table">Pausa del programa</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m2-m30">M2 M30</a></p></td>
<td align="left" valign="top"><p class="table">Fin del programa</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m60">M60</a></p></td>
<td align="left" valign="top"><p class="table">Pausa Cambio Palet</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m3-m4-m5">M3 M4 M5</a></p></td>
<td align="left" valign="top"><p class="table">Control de husillo</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m6">M6</a></p></td>
<td align="left" valign="top"><p class="table">Cambio de herramienta</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m7-m8-m9">M7 M8 M9</a></p></td>
<td align="left" valign="top"><p class="table">Control de refrigerante</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m19">M19</a></p></td>
<td align="left" valign="top"><p class="table">Orientacion de Husillo</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m48-m49">M48 M49</a></p></td>
<td align="left" valign="top"><p class="table">Activar/Desactivar Ajustes de avance y husillo</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m50">M50</a></p></td>
<td align="left" valign="top"><p class="table">Control de ajuste de alimentación</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m51">M51</a></p></td>
<td align="left" valign="top"><p class="table">Control de ajuste del husillo</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m52">M52</a></p></td>
<td align="left" valign="top"><p class="table">Control adaptativo de alimentación</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m53">M53</a></p></td>
<td align="left" valign="top"><p class="table">Control de parada de alimentación</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m61">M61</a></p></td>
<td align="left" valign="top"><p class="table">Establecer número de herramienta actual</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m62-m65">M62-M65</a></p></td>
<td align="left" valign="top"><p class="table">Control de salida</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m66">M66</a></p></td>
<td align="left" valign="top"><p class="table">Control de entrada</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m67">M67</a></p></td>
<td align="left" valign="top"><p class="table">Control de salida analógica sicronizada</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m68">M68</a></p></td>
<td align="left" valign="top"><p class="table">Control de salida analógica inmediata</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m70">M70</a></p></td>
<td align="left" valign="top"><p class="table">Guardar estado modal</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m71">M71</a></p></td>
<td align="left" valign="top"><p class="table">Invalidar estado modal almacenado</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m72">M72</a></p></td>
<td align="left" valign="top"><p class="table">Restaurar estado modal</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m73">M73</a></p></td>
<td align="left" valign="top"><p class="table">Guardar estado modal Autorestore</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m98-m99">M98 M99</a></p></td>
<td align="left" valign="top"><p class="table">Llamar y regresar de subprograma</p></td>
</tr>
<tr>
<td align="center" valign="top"><p class="table"><a href="m-code_es.html#mcode:m100-m199">M100-M199</a></p></td>
<td align="left" valign="top"><p class="table">Códigos M definidos por el usuario</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m0-m1">2. M0, M1 Pausa del programa</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M0</em> - pausa temporalmente un programa en ejecución. LinuxCNC permanece en el modo automático
y MDI y otras acciones manuales no están habilitadas. Presionando
el botón de reanudacion se reiniciará el programa en la siguiente línea.
</p>
</li>
<li>
<p>
<em>M1</em> - pausa temporalmente un programa en ejecución si el interruptor de parada opcional está activado.
LinuxCNC permanece en el modo automático, por lo que MDI y otras acciones manuales
no están disponibles. Al presionar el botón de reanudacion se reiniciará el programa en la
línea siguiente.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">Está bien programar <em>M0</em> y <em>M1</em> en modo MDI,
pero el efecto probablemente no se notará
porque el comportamiento normal en modo MDI es
detenerse de todos modos después de cada línea de entrada.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m2-m30">3. M2, M30 Fin del Programa</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M2</em> - finaliza el programa. Al presionar <code>Ejecutar Programa</code> ("R"en la GUI Axis)
         reiniciará el programa desde el comienzo del archivo.
</p>
</li>
<li>
<p>
<em>M30</em> - intercambia lanzaderas de palets y finaliza el programa.
          Presionando <em>Ejecutar Programa</em> comenzará el programa
          desde el principio del archivo.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Ambos comandos tienen los siguientes efectos:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Cambia del modo automático al modo MDI.
</p>
</li>
<li>
<p>
Los offsets de origen se establecen en el valor predeterminado (como <em>G54</em>).
</p>
</li>
<li>
<p>
El plano seleccionado se establece en el plano XY (como <em>G17</em>).
</p>
</li>
<li>
<p>
El modo de distancia se establece en modo absoluto (como <em>G90</em>).
</p>
</li>
<li>
<p>
El modo de velocidad de avance se establece en unidades por minuto (como <em>G94</em>).
</p>
</li>
<li>
<p>
Los ajustes de avance y velocidad están activadas (como <em>M48</em>).
</p>
</li>
<li>
<p>
La compensación del cortador está desactivada (como <em>G40</em>).
</p>
</li>
<li>
<p>
El husillo se detiene (como <em>M5</em>).
</p>
</li>
<li>
<p>
El modo de movimiento actual está configurado para alimentacion (como <em>G1</em>).
</p>
</li>
<li>
<p>
El refrigerante está apagado (como <em>M9</em>).
</p>
</li>
</ol></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">Las líneas de código después de M2/M30 no se ejecutarán. Presionando <code>Ejecutar Programa</code>
iniciará el programa desde el comienzo del archivo.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Aviso</div>
</td>
<td class="content">Usar % para terminar el código G no hace lo mismo que un <em>Fin de programa</em>. Ver
<a href="overview_es.html#gcode:file-requirements">Requisitos de archivo</a> para obtener más información sobre lo
que % no hace.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m60">4. Pausa de cambio de palet M60</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M60</em> - intercambia lanzaderas de palets y luego detiene un programa en ejecución
          temporalmente (independientemente de la configuración de parada opcional).
          Presionando el botón de inicio del ciclo
          reiniciará el programa en la siguiente línea.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m3-m4-m5">5. M3, M4, M5 Control de husillo</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M3 [$n]</em> - inicia el husillo seleccionado en sentido horario a la velocidad <em>S</em>.
</p>
</li>
<li>
<p>
<em>M4 [$n]</em> - inicia el husillo seleccionado en sentido antihorario a la velocidad <em>S</em>.
</p>
</li>
<li>
<p>
<em>M5 [$n]</em> - detiene el husillo seleccionado.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Use $ para operar en husillos específicos. Si se omite $, entonces los comandos
operan en el husillo 0 predeterminado.
Use $-1 para operar en todos los husillos activos.</p></div>
<div class="paragraph"><p>Este ejemplo iniciará los husillos 0, 1 y 2 simultáneamente a diferentes
velocidades:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">S100 </span></span>$<span style="color: #993399">0</span>
<span style="font-weight: bold"><span style="color: #0000FF">S200 </span></span>$<span style="color: #993399">1</span>
<span style="font-weight: bold"><span style="color: #0000FF">S300 </span></span>$<span style="color: #993399">2</span>
<span style="font-weight: bold"><span style="color: #0000FF">M3</span></span> $<span style="color: #993399">-1</span></tt></pre></div></div>
<div class="paragraph"><p>Este ejemplo invertirá el husillo 1 pero dejará los otros husillos.
girando hacia adelante:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">M4</span></span> $<span style="color: #993399">1</span></tt></pre></div></div>
<div class="paragraph"><p>Y esto detendrá el husillo 2 y dejará rotar a los otros husillos:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">M5</span></span> $<span style="color: #993399">2</span></tt></pre></div></div>
<div class="paragraph"><p>Si se omite $, entonces el comportamiento es exactamente el normal para una
máquina de un solo husillo</p></div>
<div class="paragraph"><p>Está bien usar <em>M3</em> o <em>M4</em> si la velocidad del husillo <a href="other-code_es.html#sec:set-spindle-speed">S</a>
se establece a cero. Si se hace esto,
(o si el interruptor de ajuste de velocidad está habilitado y configurado en cero),
el husillo no comenzará a girar.
Si, más tarde, la velocidad del husillo se establece por encima de cero
(o el interruptor de ajuste está activado),
el husillo comenzará a girar.
Está bien usar <em>M3</em> o <em>M4</em> cuando el husillo ya está
girando o usar <em>M5</em> cuando el husillo ya está parado.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m6">6. Cambio de herramienta M6</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="sect2">
<h3 id="_cambio_manual_de_herramienta">6.1. Cambio manual de herramienta</h3>
<div class="paragraph"><p>Si el componente HAL hal_manualtoolchange está cargado,
M6 detendrá el husillo y le pedirá al usuario que cambie la herramienta
basado en el último número <em>T-</em> programado.
Para más información sobre hal_manualtoolchange ver
la sección <a href="../gui/axis_es.html#sec:manual-tool-change">Cambio Manual de Herramienta</a>.</p></div>
</div>
<div class="sect2">
<h3 id="_cambiador_de_herramientas">6.2. Cambiador de herramientas</h3>
<div class="paragraph"><p>Para cambiar una herramienta en el husillo por la
herramienta seleccionada más recientemente (usando una palabra T - vea la Sección
<a href="other-code_es.html#sec:select-tool">Seleccionar Herramienta</a>), programar <em>M6</em>.
Cuando se completa el cambio de herramienta:</p></div>
<div class="ulist"><ul>
<li>
<p>
El husillo se detendrá.
</p>
</li>
<li>
<p>
La herramienta seleccionada (por una palabra T en la misma línea o en cualquier
   línea después del cambio de herramienta anterior) estará en el husillo.
</p>
</li>
<li>
<p>
Si la herramienta seleccionada no estaba en el husillo antes del cambio de herramienta,
   la herramienta que estaba en el husillo (si hubiera) se colocará
   de nuevo en el cambiador de herramientas.
</p>
</li>
<li>
<p>
Si está configurado en el archivo .ini, algunas posiciones de eje pueden moverse cuando
   se emite un M6. Vea la <a href="../config/ini-config_es.html#sec:emcio-section">sección EMCIO</a> para más
   información sobre opciones de cambio de herramienta.
</p>
</li>
<li>
<p>
No se realizarán otros cambios. Por ejemplo, el refrigerante continuará
   fluyendo durante el cambio de herramienta a menos que haya sido desactivado por un <em>M9</em>.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Aviso</div>
</td>
<td class="content">El offset de la longitud de la herramienta no cambia con <em>M6</em>, use <em><a href="g-code_es.html#gcode:g43">G43</a></em> después de
<em>M6</em> para cambiar el offset de longitud de la herramienta.</td>
</tr></table>
</div>
<div class="paragraph"><p>El cambio de herramienta puede incluir movimiento de ejes.
Está bien (pero no es útil) programar un cambio en la herramienta que ya está en el husillo.
Está bien si no hay ninguna herramienta en la ranura seleccionada;
en ese caso, el husillo estará vacío después del cambio de herramienta.
Si se seleccionó por última vez la ranura cero,
definitivamente no habrá herramienta en el husillo después de un cambio de herramienta.
El cambiador tendrá que estar configurado para realizar el cambio de herramienta en hal y posiblemente
con classicladder.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m7-m8-m9">7. M7, M8, M9 Control de refrigerante</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M7</em> - activa el refrigerante de niebla. M7 controla el pin iocontrol.0.coolant-mist.
</p>
</li>
<li>
<p>
<em>M8</em> - activa el refrigerante de inundación. M8 controla el pin iocontrol.0.coolant-flood iocontrol.0.
</p>
</li>
<li>
<p>
<em>M9</em> - apaga M7 y M8.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Conecte uno o ambos pines de control de refrigerante en HAL antes de que M7 o M8 puedan
controlar una salida. M7 y M8 se pueden usar para activar cualquier salida a través del código G.</p></div>
<div class="paragraph"><p>Está bien usar cualquiera de estos comandos, independientemente del estado actual del refrigerante.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m19">8. M19 Orientacion del Husillo</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M19 R- Q- [P-] [$-]</em>
</p>
</li>
<li>
<p>
Posición <em>R</em> para rotar desde 0; el rango válido es 0-360 grados
</p>
</li>
<li>
<p>
<em>Q</em> Número de segundos de espera hasta que se complete la orientación. Si
      spindle.N.is-oriented no se hace true dentro del tiempo de espera Q,
      se produce un error
</p>
</li>
<li>
<p>
Dirección <em>P</em> para rotar a la posición.
</p>
<div class="ulist"><ul>
<li>
<p>
<em>0</em> girar segun el movimiento angular más pequeño (predeterminado)
</p>
</li>
<li>
<p>
<em>1</em> siempre girar en sentido horario (igual que la dirección M3)
</p>
</li>
<li>
<p>
<em>2</em> siempre girar en sentido antihorario (igual que en la dirección M4)
</p>
</li>
</ul></div>
</li>
<li>
<p>
<em>$</em> El husillo a orientar (en realidad solo determina a qué pines HAL
llevar los comandos de posición del husillo)
</p>
</li>
</ul></div>
<div class="paragraph"><p>M19 es eliminado por cualquiera de M3, M4, M5.</p></div>
<div class="paragraph"><p>La orientación del husillo requiere un codificador de cuadratura con un índice para detectar la
posición del eje del husillo y la dirección de rotación.</p></div>
<div class="paragraph"><p>Configuración INI en la sección [RS274NGC].</p></div>
<div class="paragraph"><p>ORIENT_OFFSET = 0-360 (offset fijo en grados agregado a la palabra M19 R)</p></div>
<div class="paragraph"><p>Pines HAL</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>spindle.N.orient-angle</em> (out float)
Orientación deseada del husillo para M19. Valor del parámetro de palabra M19 R
más el valor del parámetro ini [RS274NGC]ORIENT_OFFSET.
</p>
</li>
<li>
<p>
<em>spindle.N.orient-mode</em> (out s32)
Modo de rotación deseado del husillo. Refleja la palabra del parámetro M19 P, Predeterminado = 0
</p>
</li>
<li>
<p>
<em>spindle.N.orient</em> (out bit))
Indica el inicio del ciclo de orientación del husillo. Establecido por M19. Autorizado por cualquiera de
M3, M4, M5.
  Si spindle-orient-fault no es cero cuando spindle-orient es true, el
comando M19 falla con un mensaje de error.
</p>
</li>
<li>
<p>
<em>spindle.N.is-oriented</em> (in bit)
Pin de reconocimiento para orientacion del husillo. Completa el ciclo de orientación. Si
spindle-orient era true cuando
se afirmó spindle-is-oriented, el pin spindle-orient se limpia y se
se afirma el pin spindle-locked. Además, se afirma el pin spindle-brake.
</p>
</li>
<li>
<p>
<em>spindle.N.orient-fault</em> (in s32)
  Entrada del código de fallo para el ciclo de orientación. Cualquier valor que no sea cero
hace que el ciclo de orientación se cancele.
</p>
</li>
<li>
<p>
<em>spindle.N.locked</em> (out bit)
Pin de orientacion de husillo completa. Limpiado por cualquiera de M3, M4, M5.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m48-m49">9. M48, M49 Control de ajustes de velocidad y alimentación</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M48</em> - habilita los controles de ajuste de velocidad del husillo y velocidad de avance.
</p>
</li>
<li>
<p>
<em>M49</em> - deshabilita ambos controles.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Estos comandos también toman un parámetro $ opcional para determinar qué
husillo es el que operan.</p></div>
<div class="paragraph"><p>Está bien habilitar o deshabilitar los controles cuando
ya están habilitados o deshabilitados.
Consulte la sección <a href="machining-center_es.html#sub:feed-rate">velocidad de alimentación</a> para obtener más detalles.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m50">10. M50 Control de ajuste de alimentación</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M50 &lt;P1&gt;</em> - habilita el control de ajuste de la velocidad de alimentación. El P1
               es opcional.
</p>
</li>
<li>
<p>
<em>M50 P0</em> - deshabilita el control de velocidad de avance.
 
Mientras esté desactivado, el ajuste de alimentación no tendrá influencia,
y el movimiento se ejecutará a la velocidad de avance programada.
(a menos que haya una ajuste de velocidad de alimentación adaptativa activo).
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m51">11. M51 Control de ajuste de velocidad del husillo</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M51 &lt;P1&gt; &lt;$-&gt;</em> - habilita el control de ajuste de velocidad del husillo para el
                   husillo seleccionado. P1 es opcional.
</p>
</li>
<li>
<p>
<em>M51 P0 &lt;$-&gt;</em> - deshabilita el programa de control de ajuste de velocidad del husillo.
                   Mientras está deshabilitado, el ajuste de velocidad del husillo no tendrá
                   influencia, y la velocidad del husillo tendrá la
                   programada por el valor especificado de la palabra S
                   (descrito en la seccion <a href="other-code_es.html#sec:set-spindle-speed">velocidad del husillo​​</a>).
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m52">12. M52 Control de alimentación adaptable</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M52 &lt;P1&gt;</em> - utilice una alimentación adaptativa. P1 es opcional.
</p>
</li>
<li>
<p>
<em>M52 P0</em> - dejar de usar alimentación adaptativa.
 
Cuando la alimentación adaptativa está habilitada, algunos valores de entrada externa se usan junto
con el valor de ajuste de alimentación de la interfaz de usuario y la velocidad de alimentación ordenada
para establecer la velocidad de alimentación real. En LinuxCNC, el pin HAL <em>motion.adaptive-feed</em>
se utiliza para este propósito. Los valores en <em>motion.adaptive-feed</em> deberían variar
de -1 (velocidad programada en reversa) a 1 (velocidad máxima). 0 es equivalente
a mantener avance.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">El uso de alimentación adaptativa negativa para marcha inversa es una nueva
característica y aún no está muy bien probada. El uso previsto es para
cortadores de plasma y electroerosion, pero no se limita a tales aplicaciones.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m53">13. M53 Control de parada de alimentación</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M53 &lt;P1&gt;</em> - activa el interruptor de parada de alimentación. P1 es opcional.
               Habilitar el interruptor de parada de alimentación permitirá que el movimiento sea
               interrumpido por medio del control de parada de alimentación. En LinuxCNC,
               el pin HAL <em>motion.feed-hold</em> se usa para este propósito.
               El valor true hará que el movimiento se detenga cuando <em>M53</em> esté activo.
</p>
</li>
<li>
<p>
<em>M53 P0</em> - deshabilita el interruptor de parada de alimentación. El estado de <em>motion.feed-hold</em>
             no tendrá ningún efecto en la alimentación cuando M53 no esté activo.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m61">14. M61 Establecer herramienta actual</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M61 Q-</em> - cambia el número de herramienta actual mientras está en modo MDI o Manual sin
             cambio de herramienta. Un uso es cuando enciende LinuxCNC con una herramienta
             actualmente en el husillo; puede establecer ese número de herramienta sin
             hacer un cambio de herramienta.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Aviso</div>
</td>
<td class="content">El desplazamiento de la longitud de la herramienta no cambia con <em>M61</em>, use <em><a href="g-code_es.html#gcode:g43">G43</a></em> después
de <em>M61</em> para cambiar el offset de longitud de la herramienta.</td>
</tr></table>
</div>
<div class="paragraph"><p>Es un error si:</p></div>
<div class="ulist"><ul>
<li>
<p>
Q- no es 0 o mayor
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m62-m65">15. M62 - Control de salida digital M65</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="ulist"><ul>
<li>
<p>
<em>M62 P-</em> - activa la salida digital sincronizada con el movimiento.
             La palabra P especifica el número de salida digital.
</p>
</li>
<li>
<p>
<em>M63 P-</em> - apaga la salida digital sincronizada con el movimiento.
             La palabra P especifica el número de salida digital.
</p>
</li>
<li>
<p>
<em>M64 P-</em> - activa la salida digital de inmediato.
             La palabra P especifica el número de salida digital.
</p>
</li>
<li>
<p>
<em>M65 P-</em> - apaga la salida digital inmediatamente.
             La palabra P especifica el número de salida digital.
</p>
</li>
</ul></div>
<div class="paragraph"><p>La palabra P varía de 0 a un valor predeterminado de 3. Si es necesario, el
número de E/S se puede aumentar utilizando el parámetro num_dio al cargar
el controlador de movimiento. Vea la <a href="../config/core-components_es.html#sec:motion">Sección de movimiento</a> para más
información.</p></div>
<div class="paragraph"><p>Los comandos M62 y M63 se pondrán en cola. Comandos posteriores referentes
al mismo número de salida sobrescribirá la configuración anterior.
Se puede especificar mas de un cambio de salida emitiendo más de un comando M62/M63.</p></div>
<div class="paragraph"><p>El cambio real de las salidas especificadas ocurrirá en el
comienzo del siguiente comando de movimiento. Si no hay movimiento posterior,
los cambios de salida en cola no sucederán. Lo mejor es siempre
programar un código G de movimiento (G0, G1, etc.) justo después del M62/63.</p></div>
<div class="paragraph"><p>M64 y M65 suceden inmediatamente cuando son recibidos por el
controlador. No están sincronizados con el movimiento, y haran
romper la mezcla</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">M62-65 no funcionará a menos que los pines motion.digital-out-nn apropiados sean
conectado en su archivo hal a las salidas.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m66">16. M66 Esperar en entrada</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="listingblock">
<div class="content">
<pre><code>M66 P- | E- &lt;L-&gt;</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<em>P-</em> - especifica el número de entrada digital de 0 a 3.
</p>
</li>
<li>
<p>
<em>E-</em> - especifica el número de entrada analógica de 0 a 3.
</p>
</li>
<li>
<p>
<em>L-</em> - especifica el tipo de modo de espera.
</p>
<div class="ulist"><ul>
<li>
<p>
<em>Modo 0: IMMEDIATE</em> - sin esperas, regresa de inmediato.
       El valor actual de la entrada se almacena en el parámetro #5399
</p>
</li>
<li>
<p>
<em>Modo 1: RISE</em> - espera a que la entrada seleccionada realize un evento de subida.
</p>
</li>
<li>
<p>
<em>Modo 2: FALL</em> - espera a que la entrada seleccionada realize un evento de bajada.
</p>
</li>
<li>
<p>
<em>Modo 3: HIGH</em> - espera a que la entrada seleccionada pase al estado ALTO.
</p>
</li>
<li>
<p>
<em>Modo 4: LOW</em> - espera a que la entrada seleccionada pase al estado BAJO.
</p>
</li>
</ul></div>
</li>
<li>
<p>
<em>Q-</em> - especifica el tiempo de espera en segundos. Si el tiempo de espera es
         excedido, la espera se interrumpe y la variable #5399 se mantendrá
         en el valor -1. El valor Q se ignora si la palabra L es cero (INMEDIATO).
         Un valor Q de cero es un error si la palabra L no es cero.
</p>
</li>
<li>
<p>
El modo 0 es el único permitido para una entrada analógica.
</p>
</li>
</ul></div>
<div class="listingblock">
<div class="title">Líneas de ejemplo M66</div>
<div class="content">
<pre><code>M66 P0 L3 Q5 (espere hasta 5 segundos para que se active la entrada digital 0)</code></pre>
</div></div>
<div class="paragraph"><p>M66 detiene la ejecución posterior del programa, hasta que
se produce el evento seleccionado (o el tiempo de espera programado).</p></div>
<div class="paragraph"><p>Es un error programar M66 con una palabra P y una palabra E (por lo tanto
seleccionando una entrada analógica y una digital). En LinuxCNC
las entradas no se controlan en tiempo real y, por lo tanto, no se deben utilizar para
aplicaciones de tiempo crítico.</p></div>
<div class="paragraph"><p>El número de E/S se puede aumentar utilizando el parámetro num_dio o num_aio
al cargar el controlador de movimiento. Vea la <a href="../config/core-components_es.html#sec:motion">Sección de movimiento</a>
para más información.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">M66 no funcionará a menos que los pines motion.digital-in-nn o motion.analog-in-nn
estén conectados en su archivo hal a una entrada.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">Ejemplo de conexión HAL</div>
<div class="content">
<pre><code>net signal-name motion.digital-in-00 &lt;= parport.0.pin10-in</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m67">17. M67 Salida analógica, sincronizada</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="listingblock">
<div class="content">
<pre><code>M67 E- Q-</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<em>M67</em> - establece una salida analógica sincronizada con el movimiento.
</p>
</li>
<li>
<p>
<em>E-</em> - número de salida que va de 0 a 3.
</p>
</li>
<li>
<p>
<em>Q-</em> - es el valor a configurar (establecer a 0 para desactivar).
</p>
</li>
</ul></div>
<div class="paragraph"><p>El cambio real de las salidas especificadas ocurrirá en el
comienzo del siguiente comando de movimiento. Si no hay comando de movimiento posterior,
los cambios de salida en cola no sucederán. Lo mejor es siempre
programar un código G de movimiento (G0, G1, etc.) justo después de M67. Las funciones M67
son las mismas que las de M62-63.</p></div>
<div class="paragraph"><p>El número de E/S se puede aumentar utilizando el parámetro num_dio o num_aio
al cargar el controlador de movimiento. Vea la <a href="../config/core-components_es.html#sec:motion">Sección de movimiento</a> para
más información.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">M67 no funcionará a menos que los pines motion.analog-out-nn apropiados sean
conectado en su archivo hal a las salidas.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m68">18. M68 Salida analógica, inmediata</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="listingblock">
<div class="content">
<pre><code>M68 E- Q-</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<em>M68</em> - establece una salida analógica de inmediato.
</p>
</li>
<li>
<p>
<em>E-</em> - número de salida que va de 0 a 3.
</p>
</li>
<li>
<p>
<em>Q-</em> - es el valor a configurar (establecer a 0 para desactivar).
</p>
</li>
</ul></div>
<div class="paragraph"><p>La salida M68 ocurre inmediatamente cuando son recibidos por el
controlador. No están sincronizados con el movimiento, y harán
romper la mezcla. M68 funciona igual que M64-65.</p></div>
<div class="paragraph"><p>El número de E/S se puede aumentar utilizando el parámetro num_dio o num_aio
al cargar el controlador de movimiento. Vea la <a href="../config/core-components_es.html#sec:motion">Sección de movimiento</a> para
más información.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">M68 no funcionará a menos que los pines motion.analog-out-nn apropiados sean
conectado en su archivo hal a las salidas.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m70">19. M70 Guardar estado modal</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="paragraph"><p>Para guardar explícitamente el estado modal en el nivel de llamada actual, programe
<em>M70</em>. Una vez que el estado modal se ha guardado con <em>M70</em>, se puede restaurar
exactamente a ese estado ejecutando un <em>M72</em>.</p></div>
<div class="paragraph"><p>Un par de instrucciones <em>M70</em> y <em>M72</em> generalmente se utilizarán para
proteger un programa contra cambios modales involuntarios dentro de
subrutinas</p></div>
<div class="paragraph" id="mcode:m70-saved-state"><p>El estado guardado consiste en:</p></div>
<div class="ulist"><ul>
<li>
<p>
configuración actual de G20/G21 (imperial/métrica)
</p>
</li>
<li>
<p>
plano seleccionado (G17/G18/G19 G17.1, G18.1, G19.1)
</p>
</li>
<li>
<p>
estado de la compensación del cortador (G40, G41, G42, G41.1, G42,1)
</p>
</li>
<li>
<p>
modo distancia - relativo/absoluto (G90/G91)
</p>
</li>
<li>
<p>
modo de alimentación (G93/G94, G95)
</p>
</li>
<li>
<p>
sistema de coordenadas actual (G54-G59.3)
</p>
</li>
<li>
<p>
estado de offset de longitud de herramienta (G43, G43.1, G49)
</p>
</li>
<li>
<p>
modo de retracción (G98, G99)
</p>
</li>
<li>
<p>
modo de husillo (G96-css o G97-RPM)
</p>
</li>
<li>
<p>
modo de distancia de arco (G90.1, G91.1)
</p>
</li>
<li>
<p>
modo de radio/diámetro de torno (G7, G8)
</p>
</li>
<li>
<p>
modo de control de ruta (G61, G61.1, G64)
</p>
</li>
<li>
<p>
avance y velocidad actuales (valores <em>F</em> y <em>S</em>)
</p>
</li>
<li>
<p>
estado del husillo (M3, M4, M5) - encendido/apagado y dirección
</p>
</li>
<li>
<p>
estado de niebla (M7) e inundación (M8)
</p>
</li>
<li>
<p>
configuración de ajuste de velocidad (M51) y ajuste de alimentación (M50)
</p>
</li>
<li>
<p>
ajuste de alimentación adaptativa (M52)
</p>
</li>
<li>
<p>
ajuste de retención de alimentación (M53)
</p>
</li>
</ul></div>
<div class="paragraph"><p>Tenga en cuenta que, en particular, el modo de movimiento (G1, etc.) NO se restaura.</p></div>
<div class="paragraph"><p><em>nivel de llamada actual</em> significa:</p></div>
<div class="paragraph"><p> * ejecutando en el programa principal. Hay una única ubicación de almacenamiento
 para el estado en el nivel principal del programa; si varias instrucciones <em>M70</em>
 se ejecutan a la vez, solo se restaura el estado guardado más recientemente
 cuando se ejecute <em>M72</em>.</p></div>
<div class="paragraph"><p> * ejecutando dentro de una subrutina de código G. El estado guardado con <em>M70</em>
 dentro de una subrutina se comporta exactamente como un parámetro con nombre local:
 solo se puede hacer referencia a esta invocación de subrutina con un
 <em>M72</em> y cuando la subrutina sale, el parámetro desaparece.</p></div>
<div class="paragraph"><p>Una invocación recursiva de una subrutina introduce un nuevo nivel de llamada.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m71">20. M71 Invalidar estado modal almacenado</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="paragraph"><p>Se invalida el estado modal guardado con un <em>M70</em>, o por un <em>M73</em> en la llamada actual
(ya no se puede restaurar).</p></div>
<div class="paragraph"><p>Un <em>M72</em> posterior en el mismo nivel de llamada fallará.</p></div>
<div class="paragraph"><p>Si se ejecuta en una subrutina que protege el estado modal mediante un <em>M73</em>,
return o endsub <strong>no</strong> restaurará el estado modal.</p></div>
<div class="paragraph"><p>La utilidad de esta función es dudosa. No se debe confiar en ella.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m72">21. M72 Restaurar estado modal</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="paragraph"><p><a href="m-code_es.html#mcode:m70-saved-state">El estado modal guardado con un código <em>M70</em></a> puede ser
restaurado ejecutando un <em>M72</em>.</p></div>
<div class="paragraph"><p>El manejo de G20/G21 se trata especialmente a medida que se interpretan los avances
de manera diferente dependiendo de G20/G21: si las unidades de longitud (mm/in) están a punto de
ser cambiadas por la operación de restauración, <em>M72</em> restaurará primero el modo distancia
y luego todos los demás estados, incluido el avance, para asegurarse de que
el valor de alimentación se interpreta en la configuración correcta de la unidad.</p></div>
<div class="paragraph"><p>Es un error ejecutar un <em>M72</em> sin guardar con <em>M70</em> previo a ese nivel.</p></div>
<div class="paragraph"><p>El siguiente ejemplo demuestra como guardar y restaurar explícitamente el
estado modal alrededor de una llamada de subrutina usando <em>M70</em> y <em>M72</em>. Tenga en cuenta que
la subrutina <em>imperialsub</em> no es "consciente" de las características de M7x y puede ser
usado sin modificar:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>O &lt;<span style="font-weight: bold"><span style="color: #0000FF">sh</span></span>o<span style="color: #FF6600">w</span><span style="font-weight: bold"><span style="color: #0000FF">st</span></span><span style="color: #FF6600">a</span><span style="font-weight: bold"><span style="color: #0000FF">t</span></span>e&gt; <span style="font-weight: bold"><span style="color: #000080">sub</span></span>
<span style="font-style: italic"><span style="color: #9A1900">(DEBUG, imperial=</span></span><span style="color: #009900">#&lt;_imperial&gt;</span><span style="font-style: italic"><span style="color: #9A1900"> absoluto=</span></span><span style="color: #009900">#&lt;_absolute&gt;</span><span style="font-style: italic"><span style="color: #9A1900"> avance=</span></span><span style="color: #009900">#&lt;_feed&gt;</span><span style="font-style: italic"><span style="color: #9A1900"> rpm=</span></span><span style="color: #009900">#&lt;_rpm&gt;</span><span style="font-style: italic"><span style="color: #9A1900">)</span></span>
O &lt;<span style="font-weight: bold"><span style="color: #0000FF">sh</span></span>o<span style="color: #FF6600">w</span><span style="font-weight: bold"><span style="color: #0000FF">st</span></span><span style="color: #FF6600">a</span><span style="font-weight: bold"><span style="color: #0000FF">t</span></span>e&gt; <span style="font-weight: bold"><span style="color: #000080">endsub</span></span>

O &lt;<span style="color: #FF6600">i</span>m<span style="color: #FF6600">p</span>e<span style="color: #FF6600">rial</span><span style="font-weight: bold"><span style="color: #000080">sub</span></span>&gt; <span style="font-weight: bold"><span style="color: #000080">sub</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g20</span></span> <span style="font-style: italic"><span style="color: #9A1900">(imperial)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g91</span></span> <span style="font-style: italic"><span style="color: #9A1900">(modo relativo)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">F5 </span></span><span style="font-style: italic"><span style="color: #9A1900">(alimentación baja)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">S300 </span></span><span style="font-style: italic"><span style="color: #9A1900">(bajas rpm)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">(debug, in subroutine, state now:)</span></span>
<span style="font-weight: bold"><span style="color: #000080">o&lt;showstate&gt; call</span></span>
<span style="font-weight: bold"><span style="color: #000080">O&lt;imperialsub&gt; endsub</span></span>

<span style="font-style: italic"><span style="color: #9A1900">; programa principal</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g21</span></span> <span style="font-style: italic"><span style="color: #9A1900">(métrico)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g90</span></span> <span style="font-style: italic"><span style="color: #9A1900">(absoluto)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">f200 </span></span><span style="font-style: italic"><span style="color: #9A1900">(velocidad rápida)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">S2500 </span></span><span style="font-style: italic"><span style="color: #9A1900">(rpm altas)</span></span>

<span style="font-style: italic"><span style="color: #9A1900">(debug, in main, state now:)</span></span>
<span style="font-weight: bold"><span style="color: #000080">o&lt;showstate&gt; call</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">M70</span></span> <span style="font-style: italic"><span style="color: #9A1900">(guardar el estado de la llamada en el nivel global)</span></span>
<span style="font-weight: bold"><span style="color: #000080">O&lt;imperialsub&gt; call</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">M72</span></span> <span style="font-style: italic"><span style="color: #9A1900">(restaurar explícitamente el estado)</span></span>

<span style="font-style: italic"><span style="color: #9A1900">(debug, back in main, state now:)</span></span>
<span style="font-weight: bold"><span style="color: #000080">o&lt;showstate&gt; call</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">m2</span></span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m73">22. M73 Guardar y Autorestaurar estado modal</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="paragraph"><p>Para guardar el estado modal dentro de una subrutina y restaurar el estado en
<em>endsub</em> o cualquier ruta de <em>retorno</em>, programe <em>M73</em>.</p></div>
<div class="paragraph"><p>Abortar un programa en ejecución en una subrutina que tiene un <em>M73</em>
<strong>no</strong> restaurará el estado.</p></div>
<div class="paragraph"><p>Además, el final normal (<em>M2</em>) de un programa principal que contiene un <em>M73</em>
<strong>no</strong> restaurará el estado.</p></div>
<div class="paragraph"><p>El uso sugerido es al comienzo de una subrutina O-word como en el
siguiente ejemplo. Usar <em>M73</em> de esta manera permite diseñar subrutinas
que necesitan modificar el estado modal pero protegerán el programa de llamada
contra cambios modales involuntarios. Tenga en cuenta el uso de
<a href="overview_es.html#gcode:predefined-named-parameters">parámetros con nombre predefinidos</a> en
la subrutina <em>showstate</em>.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">O&lt;showstate&gt; sub</span></span>
<span style="font-style: italic"><span style="color: #9A1900">(DEBUG, imperial=</span></span><span style="color: #009900">#&lt;_imperial&gt;</span><span style="font-style: italic"><span style="color: #9A1900"> absoluto=</span></span><span style="color: #009900">#&lt;_absolute&gt;</span><span style="font-style: italic"><span style="color: #9A1900"> avance=</span></span><span style="color: #009900">#&lt;_feed&gt;</span><span style="font-style: italic"><span style="color: #9A1900"> rpm=</span></span><span style="color: #009900">#&lt;_rpm&gt;</span><span style="font-style: italic"><span style="color: #9A1900">)</span></span>
<span style="font-weight: bold"><span style="color: #000080">O&lt;showstate&gt; endsub</span></span>

<span style="font-weight: bold"><span style="color: #000080">O&lt;imperialsub&gt; sub</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">M73</span></span> <span style="font-style: italic"><span style="color: #9A1900">(guardar el estado de la llamada en el contexto de llamada actual, restaurar en return o endsub)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g20</span></span> <span style="font-style: italic"><span style="color: #9A1900">(imperial)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g91</span></span> <span style="font-style: italic"><span style="color: #9A1900">(modo relativo)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">F5 </span></span><span style="font-style: italic"><span style="color: #9A1900">(alimentación baja)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">S300 </span></span><span style="font-style: italic"><span style="color: #9A1900">(bajas rpm)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">(depuración, en subrutina, estado ahora :)</span></span>
<span style="font-weight: bold"><span style="color: #000080">o&lt;showstate&gt; call</span></span>

<span style="font-style: italic"><span style="color: #9A1900">; nota: no se necesita M72 aquí - el siguiente endsub o un</span></span>
<span style="font-style: italic"><span style="color: #9A1900">; 'return' explícito restaurará el estado del llamador</span></span>
<span style="font-weight: bold"><span style="color: #000080">O&lt;imperialsub&gt; endsub</span></span>

<span style="font-style: italic"><span style="color: #9A1900">; programa principal</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g21</span></span> <span style="font-style: italic"><span style="color: #9A1900">(métrico)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g90</span></span> <span style="font-style: italic"><span style="color: #9A1900">(absoluto)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">f200 </span></span><span style="font-style: italic"><span style="color: #9A1900">(velocidad rápida)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">S2500 </span></span><span style="font-style: italic"><span style="color: #9A1900">(rpm altas)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">(depuración, en estado principal, ahora:)</span></span>
<span style="font-weight: bold"><span style="color: #000080">o&lt;showstate&gt; call</span></span>
<span style="font-weight: bold"><span style="color: #000080">o&lt;imperialsub&gt; call</span></span>
<span style="font-style: italic"><span style="color: #9A1900">(depuración, de nuevo en main, estado ahora:)</span></span>
<span style="font-weight: bold"><span style="color: #000080">o&lt;showstate&gt; call</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">m2</span></span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m98-m99">23. M98 y M99</h2>
<div class="sectionbody">
<div class="paragraph"><p>El intérprete admite programas principales y subprogramas de estilo Fanuc con
códigos <em>M98</em> y <em>M99</em>. Ver <a href="o-code_es.html#ocode:fanuc-style-programs">Programas estilo Fanuc</a>.</p></div>
<div class="sect2">
<h3 id="_restauración_selectiva_del_estado_modal">23.1. Restauración selectiva del estado modal</h3>
<div class="paragraph"><p>Ejecutar un <em>M72</em> o regresar de una subrutina que contiene un
<em>M73</em> restaurará <a href="m-code_es.html#mcode:m70-saved-state"><strong>todo</strong> estado modal guardado</a>.</p></div>
<div class="paragraph"><p>Si solo se deben preservar algunos aspectos del estado modal, una
alternativa es el uso de <a href="overview_es.html#gcode:predefined-named-parameters">parámetros con nombre predefinidos</a>, parámetros locales y declaraciones condicionales.
La idea es recordar los modos que se restaurarán en el
comienzo de la subrutina y restaurar estos antes de salir. Aquí está
un ejemplo, basado en el fragmento de <em>nc_files/tool-length-probe.ngc</em>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">O&lt;measure&gt; sub</span></span> <span style="font-style: italic"><span style="color: #9A1900">(medida de herramienta de referencia)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">;</span></span>
<span style="color: #009900">#&lt;absolute&gt;</span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900">#&lt;_absolute&gt;</span> <span style="font-style: italic"><span style="color: #9A1900">(recuerda en la variable local si se configuró G90)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">;</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g30</span></span> <span style="font-style: italic"><span style="color: #9A1900">(interruptor)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g38.2</span></span> <span style="color: #FF6600">z</span><span style="color: #993399">0</span> <span style="font-weight: bold"><span style="color: #0000FF">f15 </span></span><span style="font-style: italic"><span style="color: #9A1900">(medida)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">g91</span></span> <span style="font-weight: bold"><span style="color: #0000FF">g0</span></span><span style="color: #FF6600">z</span><span style="color: #993399">.2</span> <span style="font-style: italic"><span style="color: #9A1900">(fuera del interruptor)</span></span>
<span style="color: #009900">#1000</span><span style="font-weight: bold"><span style="color: #000000">=</span></span><span style="color: #009900">#5063</span> <span style="font-style: italic"><span style="color: #9A1900">(guardar la longitud de la herramienta de referencia)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">(print, la longitud de referencia es #1000)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">;</span></span>
<span style="font-weight: bold"><span style="color: #000080">O&lt;restore_abs&gt; if</span></span> <span style="font-weight: bold"><span style="color: #000000">[</span></span><span style="color: #009900">#&lt;absolute&gt;</span><span style="font-weight: bold"><span style="color: #000000">]</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">g90</span></span> <span style="font-style: italic"><span style="color: #9A1900">(restaurar G90 solo si se configuró en la entrada:)</span></span>
<span style="font-weight: bold"><span style="color: #000080">O&lt;restore_abs&gt; endif</span></span>
<span style="font-style: italic"><span style="color: #9A1900">;</span></span>
<span style="font-weight: bold"><span style="color: #000080">O&lt;measure&gt; endsub</span></span></tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mcode:m100-m199">24. M100 - M199 Comandos definidos por el usuario</h2>
<div class="sectionbody">
<div class="paragraph"><p></p></div>
<div class="listingblock">
<div class="content">
<pre><code>M1-- &lt;P- Q-&gt;</code></pre>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<em>M1--</em> - un entero en el rango de 100 a 199.
</p>
</li>
<li>
<p>
<em>P-</em> - un número pasado al archivo como primer parámetro.
</p>
</li>
<li>
<p>
<em>Q-</em> - un número pasado al archivo como segundo parámetro.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Nota</div>
</td>
<td class="content">Después de crear un nuevo archivo <em>M1nn</em> debe reiniciar la GUI para que tenga en cuenta
el nuevo archivo, de lo contrario obtendrá un error de <em>Código M desconocido</em>.</td>
</tr></table>
</div>
<div class="paragraph"><p>El programa externo llamado <em>M100</em> a <em>M199</em> (sin extensión y M mayuscula)
se ejecuta con los valores opcionales P y Q como sus dos argumentos.
La ejecución del archivo de código G se detiene hasta que sale del programa externo.
Se puede usar cualquier archivo ejecutable válido. El archivo debe estar ubicado en la ruta de búsqueda
especificada en la configuración del archivo ini. Ver la
<a href="../config/ini-config_es.html#sec:display-section">Seccion Display</a> para obtener más información sobre las rutas de búsqueda.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Aviso</div>
</td>
<td class="content">No use un procesador de textos para crear o editar los archivos. Un procesador de textos
dejará códigos invisibles que causarán problemas y pueden hacer que un bash o
un archivo Python no trabaje. Use un editor de texto como Gedit o Notepad++
para crear o editar los archivos.</td>
</tr></table>
</div>
<div class="paragraph"><p>El error <em>Código M desconocido utilizado</em> denota uno de los siguientes</p></div>
<div class="ulist"><ul>
<li>
<p>
El comando definido por el usuario no existe
</p>
</li>
<li>
<p>
El archivo no es un archivo ejecutable
</p>
</li>
<li>
<p>
El nombre del archivo tiene una extensión
</p>
</li>
<li>
<p>
El nombre del archivo no sigue este formato M1nn donde nn = 00 a 99
</p>
</li>
<li>
<p>
El nombre del archivo utiliza una M minúscula
</p>
</li>
</ul></div>
<div class="paragraph"><p>Por ejemplo, para abrir y cerrar una pinza que está controlada por un
pin de puerto paralelo usando un archivo de script bash usando M101 y M102. Crea dos
archivos llamados M101 y M102. Establecerlos como archivos ejecutables (generalmente
clic derecho/propiedades/permisos) antes de ejecutar LinuxCNC. Asegúrar que
el pin del puerto paralelo no está conectado a nada en el archivo HAL.</p></div>
<div class="listingblock">
<div class="title">Archivo de ejemplo M101</div>
<div class="content">
<pre><code>#!/bin/bash
# archivo para activar parport pin 14 para abrir la pinza
halcmd setp parport.0.pin-14-out True
exit 0</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Archivo de ejemplo M102</div>
<div class="content">
<pre><code>#!/bin/bash
# archivo para apagar parport pin 14 para abrir pinza
halcmd setp parport.0.pin-14-out False
exit 0</code></pre>
</div></div>
<div class="paragraph"><p>Para pasar una variable a un archivo M1nn, use la opción P y Q de esta manera:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>M100 P123.456 Q321.654</code></pre>
</div></div>
<div class="listingblock">
<div class="title">Archivo de ejemplo M100</div>
<div class="content">
<pre><code>#!/bin/bash
voltaje=$1
avance=$2
halcmd setp thc.voltage $voltaje
halcmd setp thc.feedrate $avance
exit 0</code></pre>
</div></div>
<div class="paragraph"><p>Para mostrar un mensaje gráfico y detener hasta que se cierre la ventana del mensaje
use un programa de visualización gráfica como Eye of Gnome para mostrar el
archivo gráfico. Cuando lo cierre, el programa se reanudará.</p></div>
<div class="listingblock">
<div class="title">Archivo de ejemplo M110</div>
<div class="content">
<pre><code>#!/bin/bash
eog /home/john/linuxcnc/nc_files/message.png
exit 0</code></pre>
</div></div>
<div class="paragraph"><p>Para mostrar un mensaje gráfico y continuar procesando el archivo de código G
sufije un ampersand al comando.</p></div>
<div class="listingblock">
<div class="title">Ejemplo de visualización y sigue adelante M110</div>
<div class="content">
<pre><code>#!/bin/bash
eog /home/john/linuxcnc/nc_files/message.png &amp;
exit 0</code></pre>
</div></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-11-24 07:38:35 MST
</div>
</div>
</body>
</html>
